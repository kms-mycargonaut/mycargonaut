(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.r(e),n.d(e,"Component",function(){return o}),n.d(e,"ComponentContainer",function(){return u}),n.d(e,"Provider",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.__assign)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.__read)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.__read)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.__values)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.__read)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.__values)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},f=d("localStorage"),p=d("sessionStorage"),g=new s.Logger("@firebase/database"),m=(c=1,function(){return c++}),b=function(t){var e=Object(i.stringToByteArray)(t),n=new i.Sha1;n.update(e);var r=n.digest();return i.base64.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=v.apply(null,o):n+="object"==typeof o?Object(i.stringify)(o):o,n+=" "}return n},y=null,_=!0,w=function(t,e){Object(i.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.LogLevel.VERBOSE,y=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,p.remove("logging_enabled"))},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===y&&!0===p.get("logging_enabled")&&w(!0)),y){var n=v.apply(null,t);y(n)}},C=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];I.apply(void 0,Object(o.__spreadArray)([t],Object(o.__read)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));throw g.error(n),new Error(n)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.warn(n)},E=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",x="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===T||e===x)return-1;if(e===T||t===x)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},R=function(t,e){return t===e?0:t<e?-1:1},D=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.stringify)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(i.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.stringify)(e[o]),r+=":",r+=N(t[e[o]]);return r+"}"},j=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,o,s;Object(i.assert)(!E(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},L=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(L.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout(function(){throw k("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){k('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';k(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H="websocket",W="long_polling",G=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function K(t,e,n){var r;if(Object(i.assert)("string"==typeof e,"typeof type must == string"),Object(i.assert)("object"==typeof n,"typeof params must == object"),e===H)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==W)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return P(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var $=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.deepCopy)(this.counters_)},t}(),Y={},X={};function J(t){var e=t.toString();return Y[e]||(Y[e]=new $),Y[e]}var Z=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(t),this.stats_=J(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),K(e,W,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Z(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.isNodeSdk)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.base64Encode)(e),r=j(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){I("frame writing exception"),u.stack&&I(u.stack),I(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||I("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){I("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=J(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&Q.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),K(t,H,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(i.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=j(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var u=Object(o.__values)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=D("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ut=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ct=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.__spreadArray)([],Object(o.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.assert)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.isMobileCordova)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ct),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ht("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function yt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function It(t,e){for(var n=bt(t,0),r=bt(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ct(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ot(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(){return function(t,e){this.errorPrefix_=e,this.parts_=bt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.stringLength)(this.parts_[n]);kt(this)}}();function kt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Et(t))}function Et(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Tt,xt,At=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ct),Rt=1e3,Dt=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=C("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Rt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return At.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.stringify)(o)),Object(i.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.Deferred,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.assert)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.contains)(t,"w")){var n=Object(i.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();k("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(i.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.__awaiter)(this,void 0,void 0,function(){var t,n,r,s,a,u,c,l,h,d,f,p,g,m=this;return Object(o.__generator)(this,function(b){switch(b.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,b.label=1;case 1:return b.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=o.__read.apply(void 0,[b.sent(),2]),f=d[0],p=d[1],u?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){k(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=b.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&k(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){I("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){I("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){I("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){I("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.__values)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.__values)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.isMobileCordova)()?t["framework.cordova"]=1:Object(i.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ut),Nt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),jt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Nt(T,t),r=new Nt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Nt.MIN},t}(),Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Tt},set:function(t){Tt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(x,Tt)},e.prototype.makePost=function(t,e){return Object(i.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Nt(t,Tt)},e.prototype.toString=function(){return".key"},e}(jt),Mt=new Pt,Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}();function qt(t,e){return A(t.name,e.name)}function Bt(t,e){return A(t,e)}var zt,Qt,Ht,Wt,Gt,Kt=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},$t=function(t){if(t.isLeafNode()){var e=t.val();Object(i.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.contains)(e,".sv"),"Priority must be a string or number.")}else Object(i.assert)(t===xt||t.isEmpty(),"priority of unexpected type.");Object(i.assert)(t===xt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$t(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.assert)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Kt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=b(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.assert)(o>=0,"Unknown leaf type: "+n),Object(i.assert)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(x,new Yt("[PRIORITY-POST]",Ht))},e.prototype.makePost=function(t,e){var n=Qt(t);return new Nt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(jt)),Jt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Zt(t.length));return new Vt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.assert)(ee&&Xt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ee},{".priority":Xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(i.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.assert)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Nt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.__assign)({},this.indexSet_);h[l]=e;var d=Object(o.__assign)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.map)(this.indexes_,function(t,o){var s=Object(i.safeGet)(r.indexSet_,o);if(Object(i.assert)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Nt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Nt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.map)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Nt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$t(this.priorityNode_),this.children_.isEmpty()&&Object(i.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Vt(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Nt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Gt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;Object(i.assert)(".priority"!==ft(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Kt(this.getPriority().val())+":"),this.forEachChild(Xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":b(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Nt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xt),r=e.getIterator(Xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Vt(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return P(t,function(e,r){if(Object(i.contains)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Nt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(o){var a=te(r,Xt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Xt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Nt,{MIN:{value:new Nt(T,re.EMPTY_NODE)},MAX:{value:new Nt(x,ie)}}),Pt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,xt=ie,Ht=ie,Qt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.assert)(!_t(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Nt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Nt(x,t)},e.prototype.toString=function(){return bt(this.indexPath_,0).join("/")},e}(jt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return Nt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Nt(e,n)},e.prototype.toString=function(){return".value"},e}(jt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.assert)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.assert)(20===o.length,"nextPushId: Length should be 20."),o}),de=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return T;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function be(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(i.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(be(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(be(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ye=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Nt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Xt,function(t,e){i.matches(new Nt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new ye(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Nt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.assert)(u.numChildren()===this.limit_,"");var c=new Nt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(be(e,n,d)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(me(e,d));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(me(l.name,l.node)),o.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ie(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ce(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Oe(t,e){var n=t.copy();return n.index_=e,n}function Se(t){var e,n={};return t.isDefault()||(t.index_===Xt?e="$priority":t.index_===ce?e="$value":t.index_===Mt?e="$key":(Object(i.assert)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.stringify)(e),t.startSet_&&(n.startAt=Object(i.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function ke(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}var Ee=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=C("p:rest:"),o.listens_={},o}return Object(o.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Se(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.safeGet)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Se(t._queryParams),r=t._path.toString(),o=new i.Deferred;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.__read)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.jsonEval)(h.responseText)}catch(e){k("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&k("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ut),Te=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function xe(){return{value:null,children:new Map}}function Ae(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,xe()),Ae(t.children.get(r),e=gt(e),n)}}function Re(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xt,function(e,n){Ae(t,new ht(e),n)}),Re(t,e)}if(t.children.size>0){var r=ft(e);return e=gt(e),t.children.has(r)&&Re(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function De(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){De(r,new ht(e.toString()+"/"+t),n)})}var Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.__assign)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),je=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,o){o>0&&Object(i.contains)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Pe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Me(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Le,Fe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Pe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(i.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(dt(),n,this.revert)}return Object(i.assert)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Ue=function(){function t(t,e){this.source=t,this.path=e,this.type=Pe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt()):new t(this.source,gt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Pe.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Pe.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ve(this.source,dt(),n.value):new t(this.source,dt(),n)}return Object(i.assert)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ze=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Qe(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.assertionError)("Should only compare child_ events.");var r=new Nt(e.childName,e.snapshotNode),o=new Nt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function He(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return He(new Be(e,n,r),t.serverCache)}function Ge(t,e,n,r){return He(t.eventCache,new Be(e,n,r))}function Ke(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $e(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(Le||(Le=new Vt(R)),e=Le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(_t(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:yt(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(yt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),yt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),yt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(yt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Je(t,e,n){if(_t(e))return new Xe(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Xe(t.writeTree_.set(i,o))}var a=new Ye(n),u=t.writeTree_.setTree(e,a);return new Xe(u)}function Ze(t,e,n){var r=t;return P(n,function(t,n){r=Je(r,yt(e,t),n)}),r}function tn(t,e){if(_t(e))return Xe.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Xe(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xt,function(t,n){e.push(new Nt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Nt(t,n.value))}),e}function on(t,e){if(_t(e))return t;var n=nn(t,e);return new Xe(null!=n?new Ye(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return un(dt(),t.writeTree_,e)}function un(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.assert)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=un(yt(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(yt(t,".priority"),r)),n}function cn(t,e){return _n(e,t)}function ln(t,e){if(t.snap)return Ot(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ot(yt(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function dn(t,e,n){for(var r=Xe.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ot(n,a)?r=Je(r,u=wt(n,a),s.snap):Ot(a,n)&&(u=wt(a,n),r=Je(r,dt(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.assertionError)("WriteRecord should have .snap or .children");if(Ot(n,a))r=Ze(r,u=wt(n,a),s.children);else if(Ot(a,n))if(_t(u=wt(a,n)))r=Ze(r,dt(),s.children);else{var c=Object(i.safeGet)(s.children,ft(u));if(c){var l=c.getChild(gt(u));r=Je(r,dt(),l)}}}}}return r}function fn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,dt())?an(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ot(t.path,e)||Ot(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,dt())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return fn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Xt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,o){Object(i.assert)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=yt(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function bn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,yt(t.treePath,e))}function vn(t,e,n){return function(t,e,n,r){var i=yt(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function yn(t,e){return _n(yt(t.treePath,e),t.writeTree)}function _n(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,be(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,be(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),In=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Cn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$e(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=on(t.visibleWrites,e),c=nn(u,dt());if(null!=c)a=c;else{if(null==n)return[];a=an(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function On(t,e,n,r,o,s){var a=e.eventCache;if(null!=bn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(i.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=$e(e),h=gn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=pn(r,$e(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ft(n);if(".priority"===f){Object(i.assert)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=gt(n),b=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=mn(r,n,a.getNode(),c);b=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else b=vn(r,f,e.serverCache);u=null!=b?t.filter.updateChild(a.getNode(),f,b,m,o,s):a.getNode()}}return We(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function Sn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=ft(n);if(!c.isCompleteForPath(n)&&pt(n)>1)return e;var f=gt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,In,null)}var g=Ge(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return On(t,g,n,i,new Cn(i,g,o),a)}function kn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Cn(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,u,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=gt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(_t(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===mt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:We(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function En(t,e){return t.eventCache.isCompleteForChild(e)}function Tn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function xn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=Tn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ht(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Tn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ht(n),h,i,o,s,a)}}),c}var An,Rn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new ye(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=He(h,l),this.eventGenerator_=new ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Dn(t,e){var n=$e(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function Nn(t){return 0===t.eventRegistrations_.length}function jn(t,e,n){var r=[];if(n){Object(i.assert)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Pn(t,e,n,r){e.type===Pe.MERGE&&null!==e.source.queryId&&(Object(i.assert)($e(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.assert)(Ke(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new wn;if(n.type===Pe.OVERWRITE){var c=n;c.source.fromUser?s=kn(t,e,c.path,c.snap,r,o,u):(Object(i.assert)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=Sn(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===Pe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=yt(n,r);En(e,ft(c))&&(a=kn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=yt(n,r);En(e,ft(c))||(a=kn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,o,u):(Object(i.assert)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=xn(t,e,l.path,l.children,r,o,a,u))}else if(n.type===Pe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=bn(r,n))return e;var u=new Cn(r,e,o),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,$e(e));else{var d=e.serverCache.getNode();Object(i.assert)(d instanceof re,"serverChildren would be complete if leaf node"),h=gn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=ft(n),p=vn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,gt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,re.EMPTY_NODE,gt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,$e(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=bn(r,dt()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=bn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ye(null);return u.getNode().forEachChild(Mt,function(t,e){c=c.set(new ht(t),e)}),xn(t,e,n,c,i,o,a,s)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=yt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),xn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==Pe.LISTEN_COMPLETE)throw Object(i.assertionError)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return On(t,Ge(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,In,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ke(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe(Ke(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.assert)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.assert)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.assert)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Mn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Qe(t,i,"child_removed",e,r,n),Qe(t,i,"child_added",e,r,n),Qe(t,i,"child_moved",o,r,n),Qe(t,i,"child_changed",e,r,n),Qe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Ln,Fn=function(){return function(){this.views=new Map}}();function Un(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Pn(c,e,n,r)}var l=[];try{for(var h=Object(o.__values)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Pn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=gn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var u=He(new Be(s,a,!1),new Be(r,i,!1));return new Rn(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(o.__values)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var s=Object(o.__values)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||Dn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function zn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function Qn(t,e){return null!=zn(t,e)}function Hn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=Object(o.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,Kn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Xe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function $n(t,e,n,r,o){return function(t,e,n,r,o){Object(i.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Je(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&ln(u,r.path)?o=!1:Ot(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=dn(t.allWrites,hn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):P(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,yt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Ye(null);return null!=r.snap?o=o.set(dt(),!0):P(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Fe(r.path,o,n))}return[]}function Xn(t,e,n){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||Qn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=Hn(t);if("default"===u)try{for(var d=Object(o.__values)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(o.__read)(f.value,2),m=g[0];l=l.concat(jn(p=g[1],n,r)),Nn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(b){s={error:b}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(jn(p,n,r)),Nn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Hn(t)&&c.push(new(Object(i.assert)(An,"Reference.ts has not been loaded"),An)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Hn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Hn(e))return[Wn(e)];var r=[];return e&&(r=qn(e)),P(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],b=m.query,v=ir(t,m);t.listenProvider_.startListening(lr(b),or(t,b),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Zn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||Bn(e,n),s=s||Hn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Hn(u),o=o||Bn(u,dt())):(u=new Fn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,dt());n&&(o=o.updateImmediateChild(t,n))}));var c=Qn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Mn(t,r,n.getNode(),e)}(s,n)}(u,e,n,cn(t.pendingWriteTree_,r),o,a);if(!c&&!s){var f=zn(u,e);d=d.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.assert)(!Hn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&Hn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,f))}return d}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,wt(t,e));if(r)return r});return fn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,cn(t.pendingWriteTree_,dt()))}function nr(t,e,n,r){if(_t(t.path))return rr(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[],s=ft(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=yn(r,s);o=o.concat(nr(a,u,c,l))}return i&&(o=o.concat(Un(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=yn(r,e),u=t.operationForChild(e);u&&(o=o.concat(rr(u,i,s,a)))}),i&&(o=o.concat(Un(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=ur(r),o=i.path,s=i.queryId,a=wt(o,e);return cr(t,o,new Ue(Me(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Jn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function ur(t){var e=t.indexOf("$");return Object(i.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function cr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.assert)(r,"Missing sync point for query tag that we're tracking"),Un(r,n,cn(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.assert)(Ln,"Reference.ts has not been loaded"),Ln)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=yt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),fr=function(t,e,n){return t&&"object"==typeof t?(Object(i.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.assert)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.assert)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.assert)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},mr=function(t,e,n,r){return vr(e,new dr(n,t),r)},br=function(t,e,n){return vr(t,new hr(e),n)};function vr(t,e,n){var r,i=t.getPriority().val(),o=fr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=fr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Xt,function(t,i){var o=vr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var yr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function _r(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=ft(n);null!==o;){var s=Object(i.safeGet)(r.node.children,o)||{children:{},childCount:0};r=new yr(o,r,s),o=ft(n=gt(n))}return r}function wr(t){return t.node.value}function Ir(t,e){t.node.value=e,Er(t)}function Cr(t){return t.node.childCount>0}function Or(t,e){P(t.node.children,function(n,r){e(new yr(n,t,r))})}function Sr(t,e,n,r){n&&!r&&e(t),Or(t,function(t){Sr(t,e,!0,r)}),n&&r&&e(t)}function kr(t){return new ht(null===t.parent?t.name:kr(t.parent)+"/"+t.name)}function Er(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Cr(t)}(n),o=Object(i.contains)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Er(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,Er(t))}(t.parent,t.name,t)}var Tr=/[\[\].#$\/\u0000-\u001F\u007F]/,xr=/[\[\].#$\u0000-\u001F\u007F]/,Ar=10485760,Rr=function(t){return"string"==typeof t&&0!==t.length&&!Tr.test(t)},Dr=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Nr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!E(t)||t&&"object"==typeof t&&Object(i.contains)(t,".sv")},jr=function(t,e,n,r){r&&void 0===e||Pr(Object(i.errorPrefix)(t,"value"),e,n)},Pr=function(t,e,n){var r=n instanceof ht?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Et(r));if("function"==typeof e)throw new Error(t+"contains a function "+Et(r)+" with contents = "+e.toString());if(E(e))throw new Error(t+"contains "+e.toString()+" "+Et(r));if("string"==typeof e&&e.length>Ar/3&&Object(i.stringLength)(e)>Ar)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Et(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(P(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Rr(e)))throw new Error(t+" contains an invalid key ("+e+") "+Et(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.stringLength)(e),kt(t)}(r,e),Pr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.stringLength)(u),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+Et(r)+" in addition to actual children.")}},Mr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];P(e,function(t,e){var r=new ht(t);if(Pr(o,e,yt(n,r)),".priority"===mt(r)&&!Nr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=bt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Rr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(It);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ot(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Lr=function(t,e,n){if(!n||void 0!==e){if(E(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nr(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ur=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Dr(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Rr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Dr(t)}(n))throw new Error(Object(i.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.errorPrefix)(t,e)+"must be a boolean.")},Qr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Hr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ct(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){Hr(t,n),Kr(t,function(t){return Ct(t,e)})}function Gr(t,e,n){Hr(t,n),Kr(t,function(t){return Ot(t,e)||Ot(e,t)})}function Kr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?($r(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function $r(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();y&&I("event: "+n.toString()),U(r)}}}var Yr="repo_interrupt",Xr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xe(),this.transactionQueueTree_=new yr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Jr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Zr(t){return(e=(e={timestamp:Jr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.map)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ye.fromObject(n);return cr(t,s,new qe(Me(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e);return cr(t,s,new Ve(Me(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.map)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ye.fromObject(n);return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Xn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=fi(t,s)),Gr(t.eventQueue_,d,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ci(t,"onDisconnectEvents");var e=Zr(t),n=xe();De(t.onDisconnect_,dt(),function(r,i){var o=mr(r,i,t.serverSyncTree_,e);Ae(n,r,o)});var r=[];De(n,dt(),function(e,n){r=r.concat(Xn(t.serverSyncTree_,e,n));var i=vi(t,e);fi(t,i)}),t.onDisconnect_=xe(),Gr(t.eventQueue_,dt(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Xn(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ci(t,"set",{path:e.toString(),value:n,priority:r});var o=Zr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),u=br(s,a,o),c=ri(t),l=$n(t.serverSyncTree_,e,u,c,!0);Hr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||k("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o);Gr(t.eventQueue_,e,s),li(0,i,n,r)});var h=vi(t,e);fi(t,h),Gr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Re(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Ae(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===ft(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ui(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),I.apply(void 0,Object(o.__spreadArray)([r],Object(o.__read)(e)))}function li(t,e,n,r){e&&U(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||bi(t,e),wr(e)){var n=gi(t,e);Object(i.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ci(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(bi(t,_r(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(k("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;fi(t,e)}},a)}(t,kr(e),n)}else Cr(e)&&Or(e,function(e){di(t,e)})}function fi(t,e){var n=pi(t,e),r=kr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(i.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=hi(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Pr("transaction failed: Data returned ",f,c.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(i.contains)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=Zr(t),b=br(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=ri(t),s.splice(s.indexOf(g),1),o=(o=o.concat($n(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Gr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(bi(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);di(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===wr(r);)r=_r(r,n),n=ft(e=gt(e));return r}function gi(t,e){var n=[];return mi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function mi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Or(e,function(e){mi(t,e,n)})}function bi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ir(e,n.length>0?n:void 0)}Or(e,function(e){bi(t,e)})}function vi(t,e){var n=kr(pi(t,e)),r=_r(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){yi(t,e)}),yi(t,r),Sr(r,function(e){yi(t,e)}),n}function yi(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Ir(e,void 0):n.length=s+1,Gr(t.eventQueue_,kr(e),o),a=0;a<r.length;a++)U(r[a])}}var _i=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new G(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.__values)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},Ii=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.stringify)(this.snapshot.exportVal())},t}(),Ci=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Oi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Si=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.Deferred;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new i.Deferred;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),jr("OnDisconnect.set",t,this._path,!1);var e=new i.Deferred;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),jr("OnDisconnect.setWithPriority",t,this._path,!1),Lr("OnDisconnect.setWithPriority",e,!1);var n=new i.Deferred;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Ae(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Mr("OnDisconnect.update",t,this._path,!1);var e=new i.Deferred;return function(t,e,n,r){if(Object(i.isEmpty)(n))return I("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&P(n,function(n,r){var i=oe(r);Ae(t.onDisconnect_,yt(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),ki=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ai(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=ke(this._queryParams),e=N(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return ke(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ct(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ei(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ti(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Xt){if(null!=e&&!Nr(e)||null!=n&&!Nr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.assert)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ai=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=vt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(ki),Ri=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=ji(this.ref,e);return new t(this._node.getChild(n),r,Xt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,ji(n.ref,r),Xt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Di(t,e){return(t=Object(i.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?ji(t._root,e):t._root}function Ni(t,e){(t=Object(i.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=_i(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Di(t,n.path.toString())}function ji(t,e){var n;return null===ft((t=Object(i.getModularInstance)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new Ai(t._repo,yt(t._path,e))}function Pi(t,e){t=Object(i.getModularInstance)(t),qr("push",t._path),jr("push",e,t._path,!0);var n,r=Jr(t._repo),o=he(r),s=ji(t,o),a=ji(t,o);return n=null!=e?Li(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Mi(t){return qr("remove",t._path),Li(t,null)}function Li(t,e){t=Object(i.getModularInstance)(t),qr("set",t._path),jr("set",e,t._path,!1);var n=new i.Deferred;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Fi(t,e){t=Object(i.getModularInstance)(t),qr("setPriority",t._path),Lr("setPriority",e,!1);var n=new i.Deferred;return ii(t._repo,yt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e,n){if(qr("setWithPriority",t._path),jr("setWithPriority",e,t._path,!1),Lr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.Deferred;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Mr("update",e,t._path,!1);var n=new i.Deferred;return function(t,e,n,r){ci(t,"update",{path:e.toString(),value:n});var o=!0,s=Zr(t),a={};if(P(n,function(n,r){o=!1,a[n]=mr(yt(e,n),oe(r),t.serverSyncTree_,s)}),o)I("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var u=ri(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ye.fromObject(n);return er(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);Hr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||k("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o),a=s.length>0?fi(t,e):e;Gr(t.eventQueue_,a,s),li(0,r,n,i)}),P(n,function(n){var r=vi(t,yt(e,n));fi(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ii("value",this,new Ri(t.snapshotNode,new Ai(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ci(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ci(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.assert)(null!=t.childName,"Child events should have a childName.");var n=ji(new Ai(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ii(t.type,this,new Ri(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function zi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ai(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Oi(n,o||void 0),c="value"===e?new qi(u):new Bi(e,u);return function(t,e,n){var r;r=".info"===ft(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ai(t._repo,t,c)}}function Qi(t,e,n,r){return zi(t,"value",e,n,r)}function Hi(t,e,n,r){return zi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return zi(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return zi(t,"child_moved",e,n,r)}function Ki(t,e,n,r){return zi(t,"child_removed",e,n,r)}function $i(t,e,n){var r=null,i=n?new Oi(n):null;"value"===e?r=new qi(i):e&&(r=new Bi(e,i)),ai(t._repo,t,r)}var Yi=function(){return function(){}}(),Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){jr("endAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(xi(e),Ti(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ki(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Ji(t,e){return Ur("endAt","key",e,!0),new Xi(t,e)}var Zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){jr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?T:fe(r)),i.endBeforeSet_=!0,i);if(xi(o),Ti(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ki(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function to(t,e){return Ur("endBefore","key",e,!0),new Zi(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){jr("startAt",this._value,t._path,!0);var e=Ie(t._queryParams,this._value,this._key);if(xi(e),Ti(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ki(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function no(t,e){return void 0===t&&(t=null),Ur("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){jr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=de(n)),i=Ie(e,n,r)):i=Ie(e,n,null==r?x:de(r)),i.startAfterSet_=!0,i);if(xi(o),Ti(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ki(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function io(t,e){return Ur("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ki(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ki(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function uo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var co=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ei(t,"orderByChild");var e=new ht(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ue(e),r=Oe(t._queryParams,n);return Ti(r),new ki(t._repo,t._path,r,!0)},e}(Yi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new co(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ei(t,"orderByKey");var e=Oe(t._queryParams,Mt);return Ti(e),new ki(t._repo,t._path,e,!0)},e}(Yi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ei(t,"orderByPriority");var e=Oe(t._queryParams,Xt);return Ti(e),new ki(t._repo,t._path,e,!0)},e}(Yi);function go(){return new po}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ei(t,"orderByValue");var e=Oe(t._queryParams,ce);return Ti(e),new ki(t._repo,t._path,e,!0)},e}(Yi);function bo(){return new mo}var vo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(jr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xi(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Yi);function yo(t,e){return Ur("equalTo","key",e,!0),new vo(t,e)}function _o(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.getModularInstance)(t);try{for(var u=Object(o.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.assert)(!An,"__referenceConstructor has already been defined"),An=t}(Ai),function(t){Object(i.assert)(!Ln,"__referenceConstructor has already been defined"),Ln=t}(Ai);var wo={},Io=!1;function Co(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),I("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=_i(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=_i(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new z(z.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),_t(a.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Xr(t,Io,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new Oo(h,t)}var Oo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ee(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.stringify)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Dt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){P(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new je(t.stats_,t.server_)},o=t.repoInfo_.toString(),X[o]||(X[o]=r()),X[o]),t.infoData_=new Te,t.infoSyncTree_=new Kn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Xn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new Kn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ai(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||S("Database "+e+"("+t.repoInfo_+") has already been deleted."),ui(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&S("Cannot call "+t+" on a deleted database.")},t}();function So(t){(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOffline"),ui(t._repo)}function ko(t){var e;(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}var Eo={".sv":"timestamp"},To=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function xo(t,e,n){var r;if(t=Object(i.getModularInstance)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.Deferred,a=Qi(t,function(){});return function(e,n,r,o,a,u){ci(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ri(r,new Ai(t._repo,t._path),Xt),s.resolve(new To(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Pr("transaction failed: Data returned ",h,c.path),c.status=0;var d=_r(e.transactionQueueTree_,n),f=wr(d)||[];f.push(c),Ir(d,f);var p=void 0;"object"==typeof h&&null!==h&&Object(i.contains)(h,".priority")?(p=Object(i.safeGet)(h,".priority"),Object(i.assert)(Nr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=Zr(e),b=oe(h,p),v=br(b,l,g);c.currentOutputSnapshotRaw=b,c.currentOutputSnapshotResolved=v,c.currentWriteId=ri(e);var y=$n(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Gr(e.eventQueue_,n,y),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var Ao=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.validateArgCount)("OnDisconnect.set",1,2,arguments.length),Object(i.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.validateCallback)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),Ro=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Do=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),Object(i.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new jo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),No=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.validateArgCount)("Query.on",2,4,arguments.length),Object(i.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new Do(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Qi(this._delegate,c,l),n;case"child_added":return Hi(this._delegate,c,l),n;case"child_removed":return Ki(this._delegate,c,l),n;case"child_changed":return Wi(this._delegate,c,l),n;case"child_moved":return Gi(this._delegate,c,l),n;default:throw new Error(Object(i.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.validateArgCount)("Query.off",0,3,arguments.length),Fr("Query.off",t,!0),Object(i.validateCallback)("Query.off","callback",e,!0),Object(i.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,$i(this._delegate,t,r)}else $i(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,dt()):(i=new Fn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return Ke(Vn(i,e,cn(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n),i=Xn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ci(t,"get for query "+Object(i.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.getModularInstance)(t))._repo,t).then(function(e){return new Ri(e,new Ai(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Do(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.validateArgCount)("Query.once",1,4,arguments.length),Object(i.validateCallback)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.Deferred,c=function(t,e){var r=new Do(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Qi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,_o(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,_o(this._delegate,uo(e)))},t.prototype.orderByChild=function(e){return Object(i.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,_o(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,_o(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,_o(this._delegate,go()))},t.prototype.orderByValue=function(){return Object(i.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,_o(this._delegate,bo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,_o(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,_o(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,_o(this._delegate,Ji(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,_o(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,_o(this._delegate,yo(e,n)))},t.prototype.toString=function(){return Object(i.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,Object(i.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new jo(this.database,new Ai(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),jo=function(t){function e(e,n){var r=t.call(this,e,new ki(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.__extends)(e,t),e.prototype.getKey=function(){return Object(i.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,ji(this._delegate,t))},e.prototype.getParent=function(){Object(i.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.validateArgCount)("Reference.set",1,2,arguments.length),Object(i.validateCallback)("Reference.set","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(i.validateCallback)("Reference.update","onComplete",e,!0);var o=Vi(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Ui(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.validateArgCount)("Reference.remove",0,1,arguments.length),Object(i.validateCallback)("Reference.remove","onComplete",t,!0);var e=Mi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.validateArgCount)("Reference.transaction",1,3,arguments.length),Object(i.validateCallback)("Reference.transaction","transactionUpdate",t,!1),Object(i.validateCallback)("Reference.transaction","onComplete",e,!0),zr("Reference.transaction","applyLocally",n,!0);var o=xo(this._delegate,t,{applyLocally:n}).then(function(t){return new Ro(t.committed,new Do(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.validateArgCount)("Reference.setPriority",1,2,arguments.length),Object(i.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.validateArgCount)("Reference.push",0,2,arguments.length),Object(i.validateCallback)("Reference.push","onComplete",n,!0);var o=Pi(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new Ao(new Si(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(No),Po=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new z(z.OWNER);else if(r.mockUserToken){var a=Object(i.createMockUserToken)(r.mockUserToken,t.app.options.projectId);s=new z(a)}!function(t,e,n,r){t.repoInfo_=new G(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.validateArgCount)("database.ref",0,1,arguments.length),t instanceof jo){var e=Ni(this._delegate,t.toString());return new jo(this,e)}return e=Di(this._delegate,t),new jo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.validateArgCount)(e,1,1,arguments.length);var n=Ni(this._delegate,t);return new jo(this,n)},t.prototype.goOffline=function(){return Object(i.validateArgCount)("database.goOffline",0,0,arguments.length),So(this._delegate)},t.prototype.goOnline=function(){return Object(i.validateArgCount)("database.goOnline",0,0,arguments.length),ko(this._delegate)},t.ServerValue={TIMESTAMP:Eo,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Mo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ne(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);P(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.Provider("auth-internal",new r.ComponentContainer("database-standalone"));return c.setComponent(new r.Component("auth-internal",function(){return i},"PRIVATE")),{instance:new Po(Co(e,c,void 0,n,a),e),namespace:o}}}),Lo=Dt;Dt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Dt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Fo=Object.freeze({__proto__:null,DataConnection:Lo,RealTimeConnection:at,hijackHash:function(t){var e=Dt.prototype.put;return Dt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Dt.prototype.put=e}},ConnectionTarget:G,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Io=t}(t)}}),Uo=Po.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.Component("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Po(Co(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:jo,Query:No,Database:Po,DataSnapshot:Do,enableLogging:w,INTERNAL:Mo,ServerValue:Uo,TEST_ACCESS:Fo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),Object(i.isNodeSdk)()&&(t.exports=n)}(e.default)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.default}),r.default.registerVersion("firebase","8.6.1","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("HDdC");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a(e=>e.error(t));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},"X8/r":function(t,e,n){"use strict";var r=n("zIRd"),i=n("/6Yf"),o=n("mrSG"),s=n("qOnz"),a=n("q/0M");function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),d=new s.ErrorFactory("appCheck","AppCheck",h),f=new Map,p={activated:!1,tokenListeners:[]},g={enabled:!1};function m(t){return f.get(t)||p}function b(t,e){f.set(t,e)}function v(){return g}function y(){return self.grecaptcha}function _(t){if(!m(t).activated)throw d.create("use-before-activation",{appName:t.name})}function w(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return _(t),[4,m(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise(function(n,r){var i=m(t).reCAPTCHAState;e.ready(function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}function I(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=m(t);b(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var C="https://content-firebaseappcheck.googleapis.com/v1beta",O=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(t),new Promise(function(t){setTimeout(t,r)}))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var r})})},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function S(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,function(){var t,i,s,a,u,c,l,h,f,p;return o.__generator(this,function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),d.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw d.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),d.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw d.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return f=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+f,issuedAtTimeMillis:p}]}})})}function k(t,e){var n=t.options;return{url:C+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function E(t,e){var n=t.options;return{url:C+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}var T="firebase-app-check-store",x="debug-token",A=null;function R(){return A||(A=new Promise(function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(d.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(T,{keyPath:"compositeKey"})}}}catch(r){e(d.create("storage-open",{originalErrorMessage:r.message}))}}))}function D(t){return j(P(t))}function N(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,R()];case 1:return n=o.sent(),r=n.transaction(T,"readwrite"),i=r.objectStore(T),s=i.put({compositeKey:t,value:e}),[2,new Promise(function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(d.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function j(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,R()];case 1:return e=o.sent(),n=e.transaction(T,"readonly"),r=n.objectStore(T),i=r.get(t),[2,new Promise(function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(d.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function P(t){return t.options.appId+"-"+t.name}var M=new a.Logger("@firebase/app-check");function L(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,D(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),M.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}function F(t,e){return s.isIndexedDBAvailable()?function(t,e){return N(P(t),e)}(t,e).catch(function(t){M.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function U(){return v().enabled}function V(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){if((t=v()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var q={error:"UNKNOWN_ERROR"};function B(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,h,f,p,g,v,y,I;return o.__generator(this,function(C){switch(C.label){case 0:return _(t),U()?(r=S,i=E,a=[t],[4,V()]):[3,3];case 1:return[4,r.apply(void 0,[i.apply(void 0,a.concat([C.sent()])),e])];case 2:return[2,{token:C.sent().token}];case 3:return u=m(t),l=void 0,(c=u.token)?[3,5]:[4,L(t)];case 4:(h=C.sent())&&Q(h)&&(c=h,b(t,o.__assign(o.__assign({},u),{token:c})),z(t,{token:c.token})),C.label=5;case 5:if(!n&&c&&Q(c))return[2,{token:c.token}];C.label=6;case 6:return C.trys.push([6,12,,13]),u.customProvider?[4,u.customProvider.getToken()]:[3,8];case 7:return f=C.sent(),p=s.issuedAtTime(f.token),g=null!==p&&p<Date.now()&&p>0?1e3*p:Date.now(),c=o.__assign(o.__assign({},f),{issuedAtTimeMillis:g}),[3,11];case 8:return[4,w(t).catch(function(t){throw d.create("recaptcha-error")})];case 9:return v=C.sent(),[4,S(k(t,v),e)];case 10:c=C.sent(),C.label=11;case 11:return[3,13];case 12:return y=C.sent(),M.error(y),l=y,[3,13];case 13:return c?[3,14]:(I=function(t){return{token:(e=q,s.base64.encodeString(JSON.stringify(e),!1)),error:t};var e}(l),[3,16]);case 14:return I={token:c.token},b(t,o.__assign(o.__assign({},u),{token:c})),[4,F(t,c)];case 15:C.sent(),C.label=16;case 16:return z(t,I),[2,I]}})})}function z(t,e){for(var n=0,r=m(t).tokenListeners;n<r.length;n++){var i=r[n];try{i(e)}catch(o){}}}function Q(t){return t.expireTimeMillis-Date.now()>0}var H="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",function(t){return e=t.getProvider("app").getImmediate(),{activate:function(t,n){return function(t,e,n){var r=m(t);if(r.activated)throw d.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,b(t,i),i.siteKey&&function(t,e){var n=m(t),r=new s.Deferred;b(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u,c,l=y();return l?l.ready(function(){I(t,e,l,i),r.resolve(l)}):(u=function(){var n=y();if(!n)throw new Error("no recaptcha");n.ready(function(){I(t,e,n,i),r.resolve(n)})},(c=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",c.onload=u,document.head.appendChild(c)),r.promise}(t,i.siteKey).catch(function(){})}(e,t,n)},setTokenAutoRefreshEnabled:function(t){return function(t,e){var n=m(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),b(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(e,t)}};var e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,e,n){t.getProvider(H).initialize()})),t.INTERNAL.registerComponent(new i.Component(H,function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{getToken:function(t){return B(e,n,t)},addTokenListener:function(t){return function(t,e,n){var r=m(t),i=o.__assign(o.__assign({},r),{tokenListeners:o.__spreadArray(o.__spreadArray([],r.tokenListeners),[n])});if(U()){var s=v();s.enabled&&s.token&&s.token.promise.then(function(t){return n({token:t})}).catch(function(){})}else{if(!i.tokenRefresher){var a=function(t,e){var n=this;return new O(function(){return o.__awaiter(n,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return m(t).token?[3,2]:[4,B(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,B(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var e=m(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(t,e);i.tokenRefresher=a}if(i.tokenRefresher.isRunning()||!0!==r.isTokenAutoRefreshEnabled||i.tokenRefresher.start(),r.token&&Q(r.token)){var u=r.token;Promise.resolve().then(function(){return n({token:u.token})}).catch(function(){})}}b(t,i)}(e,n,t)},removeTokenListener:function(t){return function(t,e){var n=m(t),r=n.tokenListeners.filter(function(t){return t!==e});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),b(t,o.__assign(o.__assign({},n),{tokenListeners:r}))}(e,t)}};var e,n},"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.1.1")}(l.default),function(){var t=s.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=v();e.enabled=!0;var n=new s.Deferred;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,j(x)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:((r=e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),N(x,r)).catch(function(t){return M.warn("Failed to persist debug token to indexeddb. Error: "+t)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r})})}())}}()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return dn}),n.d(e,"b",function(){return al}),n.d(e,"c",function(){return nl}),n.d(e,"d",function(){return tl}),n.d(e,"e",function(){return el}),n.d(e,"f",function(){return th}),n.d(e,"g",function(){return Ql}),n.d(e,"h",function(){return Yu}),n.d(e,"i",function(){return vl}),n.d(e,"j",function(){return _u}),n.d(e,"k",function(){return ll}),n.d(e,"l",function(){return Ou}),n.d(e,"m",function(){return Er}),n.d(e,"n",function(){return Nc}),n.d(e,"o",function(){return To}),n.d(e,"p",function(){return Dn}),n.d(e,"q",function(){return A}),n.d(e,"r",function(){return hn}),n.d(e,"s",function(){return Qo}),n.d(e,"t",function(){return zu}),n.d(e,"u",function(){return Hu}),n.d(e,"v",function(){return cl}),n.d(e,"w",function(){return ac}),n.d(e,"x",function(){return Wl}),n.d(e,"y",function(){return sc}),n.d(e,"z",function(){return Ul}),n.d(e,"A",function(){return wl}),n.d(e,"B",function(){return Nn}),n.d(e,"C",function(){return sl}),n.d(e,"D",function(){return ol}),n.d(e,"E",function(){return Eu}),n.d(e,"F",function(){return ku}),n.d(e,"G",function(){return Nr}),n.d(e,"H",function(){return xu}),n.d(e,"I",function(){return Ir}),n.d(e,"J",function(){return jn}),n.d(e,"K",function(){return $l}),n.d(e,"L",function(){return nc}),n.d(e,"M",function(){return Tl}),n.d(e,"N",function(){return fn}),n.d(e,"O",function(){return Ru}),n.d(e,"P",function(){return Au}),n.d(e,"Q",function(){return cc}),n.d(e,"R",function(){return M}),n.d(e,"S",function(){return Vl}),n.d(e,"T",function(){return Ll}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return Ml}),n.d(e,"W",function(){return Jl}),n.d(e,"X",function(){return Rl}),n.d(e,"Y",function(){return ul}),n.d(e,"Z",function(){return Ao}),n.d(e,"ab",function(){return ma}),n.d(e,"bb",function(){return _r}),n.d(e,"cb",function(){return nr}),n.d(e,"db",function(){return Qn}),n.d(e,"eb",function(){return Wn}),n.d(e,"fb",function(){return Yn}),n.d(e,"gb",function(){return Kn}),n.d(e,"hb",function(){return Gn}),n.d(e,"ib",function(){return $n}),n.d(e,"jb",function(){return da}),n.d(e,"kb",function(){return Xl}),n.d(e,"lb",function(){return fa}),n.d(e,"mb",function(){return pa}),n.d(e,"nb",function(){return Hn}),n.d(e,"ob",function(){return q}),n.d(e,"pb",function(){return ts}),n.d(e,"qb",function(){return Cs}),n.d(e,"rb",function(){return ws}),n.d(e,"sb",function(){return Is}),n.d(e,"tb",function(){return ha}),n.d(e,"ub",function(){return Et}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return zn}),n.d(e,"xb",function(){return Wo}),n.d(e,"yb",function(){return _t}),n.d(e,"zb",function(){return bu}),n.d(e,"Ab",function(){return xi}),n.d(e,"Bb",function(){return as}),n.d(e,"Cb",function(){return qs}),n.d(e,"Db",function(){return sa}),n.d(e,"Eb",function(){return Vs}),n.d(e,"Fb",function(){return Gc}),n.d(e,"Gb",function(){return Z}),n.d(e,"Hb",function(){return st}),n.d(e,"Ib",function(){return w}),n.d(e,"Jb",function(){return I}),n.d(e,"Kb",function(){return rt}),n.d(e,"Lb",function(){return at}),n.d(e,"Mb",function(){return ds}),n.d(e,"Nb",function(){return bs}),n.d(e,"Ob",function(){return ys}),n.d(e,"Pb",function(){return vs}),n.d(e,"Qb",function(){return ms}),n.d(e,"Rb",function(){return gs}),n.d(e,"Sb",function(){return _s}),n.d(e,"Tb",function(){return sn}),n.d(e,"Ub",function(){return aa}),n.d(e,"Vb",function(){return au}),n.d(e,"Wb",function(){return cu}),n.d(e,"Xb",function(){return uu}),n.d(e,"Yb",function(){return xn}),n.d(e,"Zb",function(){return un}),n.d(e,"ac",function(){return Zc}),n.d(e,"bc",function(){return Os}),n.d(e,"cc",function(){return Kc}),n.d(e,"dc",function(){return Ce}),n.d(e,"ec",function(){return Ie}),n.d(e,"fc",function(){return Es}),n.d(e,"gc",function(){return Ac}),n.d(e,"hc",function(){return Rc}),n.d(e,"ic",function(){return As}),n.d(e,"jc",function(){return xs}),n.d(e,"kc",function(){return fs}),n.d(e,"lc",function(){return Rs}),n.d(e,"mc",function(){return Ds}),n.d(e,"nc",function(){return Oc}),n.d(e,"oc",function(){return Sc}),n.d(e,"pc",function(){return kc}),n.d(e,"qc",function(){return Ec}),n.d(e,"rc",function(){return Hc}),n.d(e,"sc",function(){return hs}),n.d(e,"tc",function(){return Gt}),n.d(e,"uc",function(){return Cr}),n.d(e,"vc",function(){return it}),n.d(e,"wc",function(){return Us}),n.d(e,"xc",function(){return ls}),n.d(e,"yc",function(){return Jc}),n.d(e,"zc",function(){return Zs}),n.d(e,"Ac",function(){return ta}),n.d(e,"Bc",function(){return ea}),n.d(e,"Cc",function(){return na}),n.d(e,"Dc",function(){return ra}),n.d(e,"Ec",function(){return ia}),n.d(e,"Fc",function(){return oa}),n.d(e,"Gc",function(){return Wc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function y(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function _(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function I(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return O(t,k)||O(t,T)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function S(t){return t&&(t.hasOwnProperty(E)||t.hasOwnProperty(x))?t[E]:null}const k=u({"\u0275prov":u}),E=u({"\u0275inj":u}),T=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var A=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let R;function D(t){const e=R;return R=t,e}function N(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void y(l(t),"Injector")}function j(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),M=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,q=L||V||F||U,B={},z=[],Q=[],H=u({"\u0275cmp":u}),W=u({"\u0275dir":u}),G=u({"\u0275pipe":u}),K=u({"\u0275mod":u}),$=u({"\u0275loc":u}),Y=u({"\u0275fac":u}),X=u({__NG_ELEMENT_ID__:u});let J=0;function Z(t){return j(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Q,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||Q,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[W]||null}(t)}function et(t){return function(t){return t[G]||null}(t)}const nt={};function rt(t){const e={type:t.type,bootstrap:t.bootstrap||Q,declarations:t.declarations||Q,imports:t.imports||Q,exports:t.exports||Q,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&j(()=>{nt[t.id]=t.type}),e}function it(t,e){return j(()=>{const n=ct(t,!0);n.declarations=e.declarations||Q,n.imports=e.imports||Q,n.exports=e.exports||Q})}function ot(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=Z;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[H]||null}function ct(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function bt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),It}function It(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===B),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}_t.ngInherit=!0;const St="http://www.w3.org/2000/svg";let kt;function Et(t){kt=t}function Tt(){return void 0!==kt?kt:"undefined"!=typeof document?document:void 0}function xt(t){return!!t.listen}const At={createRenderer:(t,e)=>Tt()};function Rt(t){for(;Array.isArray(t);)t=t[0];return t}function Dt(t,e){return Rt(e[t])}function Nt(t,e){return Rt(e[t.index])}function jt(t,e){return t.data[e]}function Pt(t,e){return t[e]}function Mt(t,e){const n=e[t];return dt(n)?n:n[0]}function Lt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ft(t){return 4==(4&t[2])}function Ut(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function qt(t){t[18]=0}function Bt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const zt={lFrame:ge(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Qt(){return zt.bindingsEnabled}function Ht(){return zt.lFrame.lView}function Wt(){return zt.lFrame.tView}function Gt(t){zt.lFrame.contextLView=t}function Kt(){let t=$t();for(;null!==t&&64===t.type;)t=t.parent;return t}function $t(){return zt.lFrame.currentTNode}function Yt(){const t=zt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Xt(t,e){const n=zt.lFrame;n.currentTNode=t,n.isParent=e}function Jt(){return zt.lFrame.isParent}function Zt(){zt.lFrame.isParent=!1}function te(){return zt.isInCheckNoChangesMode}function ee(t){zt.isInCheckNoChangesMode=t}function ne(){const t=zt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function re(){return zt.lFrame.bindingIndex}function ie(){return zt.lFrame.bindingIndex++}function oe(t){const e=zt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function se(t){zt.lFrame.inI18n=t}function ae(t,e){const n=zt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ue(e)}function ue(t){zt.lFrame.currentDirectiveIndex=t}function ce(){return zt.lFrame.currentQueryIndex}function le(t){zt.lFrame.currentQueryIndex=t}function he(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function de(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=he(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=zt.lFrame=pe();return r.currentTNode=e,r.lView=t,!0}function fe(t){const e=pe(),n=t[1];zt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function pe(){const t=zt.lFrame,e=null===t?null:t.child;return null===e?ge(t):e}function ge(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function me(){const t=zt.lFrame;return zt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const be=me;function ve(){const t=me();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ye(){return zt.lFrame.selectedIndex}function _e(t){zt.lFrame.selectedIndex=t}function we(){const t=zt.lFrame;return jt(t.tView,t.selectedIndex)}function Ie(){zt.lFrame.currentNamespace=St}function Ce(){zt.lFrame.currentNamespace=null}function Oe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Se(t,e,n){Te(t,e,3,n)}function ke(t,e,n,r){(3&t[2])===n&&Te(t,e,n,r)}function Ee(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Te(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(xe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function xe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Ae=-1;class Re{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function De(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];je(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ne(t){return 3===t||4===t||6===t}function je(t){return 64===t.charCodeAt(0)}function Pe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Me(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Me(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Le(t){return t!==Ae}function Fe(t){return 32767&t}function Ue(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ve=!0;function qe(t){const e=Ve;return Ve=t,e}let Be=0;function ze(t,e){const n=He(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Qe(r.data,t),Qe(e,null),Qe(r.blueprint,null));const i=We(t,e),o=t.injectorIndex;if(Le(i)){const t=Fe(i),n=Ue(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Qe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function He(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function We(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ae;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ae}function Ge(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(X)&&(r=n[X]),null==r&&(r=n[X]=Be++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ke(t,e,n){if(n&A.Optional)return t;y(e,"NodeInjector")}function $e(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=D(void 0);try{return i?i.get(e,r,n&A.Optional):N(e,r,n&A.Optional)}finally{D(o)}}return Ke(r,e,n)}function Ye(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(X)?t[X]:void 0;return"number"==typeof e?e>=0?255&e:Je:e}(n);if("function"==typeof o){if(!de(e,t,r))return r&A.Host?Ke(i,n,r):$e(e,n,r,i);try{const t=o();if(null!=t||r&A.Optional)return t;y(n)}finally{be()}}else if("number"==typeof o){let i=null,s=He(t,e),a=Ae,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?We(t,e):e[s+8],a!==Ae&&rn(r,!1)?(i=e[1],s=Fe(a),e=Ue(a,e)):s=-1);-1!==s;){const t=e[1];if(nn(o,s,t.data)){const t=Ze(s,e,n,i,r,u);if(t!==Xe)return t}a=e[s+8],a!==Ae&&rn(r,e[1].data[s+8]===u)&&nn(o,s,e)?(i=t,s=Fe(a),e=Ue(a,e)):s=-1}}}return $e(e,n,r,i)}const Xe={};function Je(){return new on(Kt(),Ht())}function Ze(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=tn(a,s,n,null==r?gt(a)&&Ve:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?en(e,s,u,a):Xe}function tn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&bt(t)&&t.type===n)return u}return null}function en(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Re){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=qe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?D(s.injectImpl):null;de(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&D(u),qe(a),s.resolving=!1,be()}}return i}function nn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function rn(t,e){return!(t&A.Self||t&A.Host&&e)}class on{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ye(this._tNode,this._lView,t,void 0,e)}}function sn(t){return j(()=>{const e=t.prototype.constructor,n=e[Y]||an(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||an(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function an(t){return g(t)?()=>{const e=an(p(t));return e&&e()}:vt(t)}function un(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ne(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const cn="__parameters__";function ln(t,e,n){return j(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(cn)?t[cn]:Object.defineProperty(t,cn,{value:[]})[cn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class hn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const dn=new hn("AnalyzeForEntryComponents"),fn=Function;function pn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),pn(r,e)):e!==t&&e.push(r)}return e}function gn(t,e){t.forEach(t=>Array.isArray(t)?gn(t,e):e(t))}function mn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function vn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function yn(t,e,n){let r=wn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function _n(t,e){const n=wn(t,e);if(n>=0)return t[1|n]}function wn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const In={},Cn=/\n/gm,On="__source",Sn=u({provide:String,useValue:u});let kn;function En(t){const e=kn;return kn=t,e}function Tn(t,e=A.Default){if(void 0===kn)throw new Error("inject() must be called from an injection context");return null===kn?N(t,void 0,e):kn.get(t,e&A.Optional?null:void 0,e)}function xn(t,e=A.Default){return(R||Tn)(p(t),e)}function An(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(xn(t,n))}else e.push(xn(r))}return e}function Rn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Dn=Rn(ln("Inject",t=>({token:t})),-1),Nn=Rn(ln("Optional"),8),jn=Rn(ln("SkipSelf"),4);let Pn;function Mn(t){var e;return(null===(e=function(){if(void 0===Pn&&(Pn=null,q.trustedTypes))try{Pn=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Pn}())||void 0===e?void 0:e.createHTML(t))||t}class Ln{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fn extends Ln{getTypeName(){return"HTML"}}class Un extends Ln{getTypeName(){return"Style"}}class Vn extends Ln{getTypeName(){return"Script"}}class qn extends Ln{getTypeName(){return"URL"}}class Bn extends Ln{getTypeName(){return"ResourceURL"}}function zn(t){return t instanceof Ln?t.changingThisBreaksApplicationSecurity:t}function Qn(t,e){const n=Hn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Hn(t){return t instanceof Ln&&t.getTypeName()||null}function Wn(t){return new Fn(t)}function Gn(t){return new Un(t)}function Kn(t){return new Vn(t)}function $n(t){return new qn(t)}function Yn(t){return new Bn(t)}function Xn(t){const e=new Zn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Mn(""),"text/html")}catch(t){return!1}}()?new Jn(e):e}class Jn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Mn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Zn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Mn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Mn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const tr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,er=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function nr(t){return(t=String(t)).match(tr)||t.match(er)?t:"unsafe:"+t}function rr(t){return(t=String(t)).split(",").map(t=>nr(t.trim())).join(", ")}function ir(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function or(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const sr=ir("area,br,col,hr,img,wbr"),ar=ir("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ur=ir("rp,rt"),cr=or(ur,ar),lr=or(sr,or(ar,ir("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),or(ur,ir("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cr),hr=ir("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dr=ir("srcset"),fr=or(hr,dr,ir("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ir("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),pr=ir("script,style,template");class gr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!lr.hasOwnProperty(e))return this.sanitizedSomething=!0,!pr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!fr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;hr[i]&&(o=nr(o)),dr[i]&&(o=rr(o)),this.buf.push(" ",e,'="',vr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();lr.hasOwnProperty(e)&&!sr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(vr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const mr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,br=/([^\#-~ |!])/g;function vr(t){return t.replace(/&/g,"&amp;").replace(mr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(br,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yr;function _r(t,e){let n=null;try{yr=yr||Xn(t);let r=e?String(e):"";n=yr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==o);return Mn((new gr).sanitizeChildren(wr(n)||n))}finally{if(n){const t=wr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function wr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Ir=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Cr(t){const e=function(){const t=Ht();return t&&t[12]}();return e?e.sanitize(Ir.URL,t)||"":Qn(t,"URL")?zn(t):nr(b(t))}function Or(t){return t.ngDebugContext}function Sr(t){return t.ngOriginalError}function kr(t,...e){t.error(...e)}class Er{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||kr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Or(t)?Or(t):this._findContext(Sr(t)):null}_findOriginalError(t){let e=Sr(t);for(;e&&Sr(e);)e=Sr(e);return e}}const Tr=/^>|^->|<!--|-->|--!>|<!-$/g,xr=/(<|>)/;function Ar(t,e){t.__ngContext__=e}const Rr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function Dr(t){return t instanceof Function?t():t}var Nr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let jr;function Pr(t,e){return jr(t,e)}function Mr(t){const e=t[3];return ft(e)?e[3]:e}function Lr(t){return Ur(t[13])}function Fr(t){return Ur(t[4])}function Ur(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Vr(t,e,n,r,i){if(null!=r){let o,s=!1;ft(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=Rt(r);0===t&&null!==n?null==i?Jr(e,n,a):Xr(e,n,a,i||null,!0):1===t&&null!==n?Xr(e,n,a,i||null,!0):2===t?li(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Rt(n)&&Vr(e,t,r,o,i);for(let s=ht;s<n.length;s++){const i=n[s];di(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function qr(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}function Br(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}function zr(t,e){return t.createComment(function(t){return t.replace(Tr,t=>t.replace(xr,"\u200b$1\u200b"))}(e))}function Qr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Hr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Bt(i,-1)),n.splice(r,1)}function Wr(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Hr(o,r),e>0&&(t[n-1][4]=r[4]);const s=bn(t,ht+e);di(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Gr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&di(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Kr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Kr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Kr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Kr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Re)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Rt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Hr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function $r(t,e,n){return Yr(t,e.parent,n)}function Yr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return Nt(r,n)}function Xr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Jr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function Zr(t,e,n,r,i){null!==r?Xr(t,e,n,r,i):Jr(t,e,n)}function ti(t,e){return xt(t)?t.parentNode(e):e.parentNode}function ei(t,e,n){return ii(t,e,n)}function ni(t,e,n){return 40&t.type?Nt(t,n):null}let ri,ii=ni;function oi(t,e){ii=t,ri=e}function si(t,e,n,r){const i=$r(t,r,e),o=e[11],s=ei(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Zr(o,i,n[a],s,!1);else Zr(o,i,n,s,!1);void 0!==ri&&ri(o,r,e,n,i)}function ai(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return ci(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ai(t,n);{const n=t[e.index];return ft(n)?ci(-1,n):Rt(n)}}if(32&n)return Pr(e,t)()||Rt(t[e.index]);{const n=ui(t,e);return null!==n?Array.isArray(n)?n[0]:ai(Mr(t[16]),n):ai(t,e.next)}}return null}function ui(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ci(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ai(t,r)}return e[7]}function li(t,e,n){const r=ti(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function hi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Ar(Rt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)hi(t,e,n.child,r,i,o,!1),Vr(e,t,i,a,o);else if(32&u){const s=Pr(n,r);let u;for(;u=s();)Vr(e,t,i,u,o);Vr(e,t,i,a,o)}else 16&u?fi(t,e,r,n,i,o):Vr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function di(t,e,n,r,i,o){hi(n,r,t.firstChild,e,i,o,!1)}function fi(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Vr(e,t,i,a[u],o);else hi(t,e,a,s[3],i,o,!0)}function pi(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function gi(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function mi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const bi="ng-template";function vi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==mi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function yi(t){return 4===t.type&&t.value!==bi}function _i(t,e,n){return e===(4!==t.type||n?t.value:bi)}function wi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ne(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!_i(t,u,n)||""===u&&1===e.length){if(Ii(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!vi(t.attrs,c,n)){if(Ii(r))return!1;s=!0}continue}const l=Ci(8&r?"class":u,i,yi(t),n);if(-1===l){if(Ii(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==mi(e,c,0)||2&r&&c!==t){if(Ii(r))return!1;s=!0}}}}else{if(!s&&!Ii(r)&&!Ii(u))return!1;if(s&&Ii(u))continue;s=!1,r=u|1&r}}return Ii(r)||s}function Ii(t){return 0==(1&t)}function Ci(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Oi(t,e,n=!1){for(let r=0;r<e.length;r++)if(wi(t,e[r],n))return!0;return!1}function Si(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ki(t,e){return t?":not("+e.trim()+")":e}function Ei(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Ii(s)||(e+=ki(o,i),i=""),r=s,o=o||!Ii(r);n++}return""!==i&&(e+=ki(o,i)),e}const Ti={};function xi(t){Ai(Wt(),Ht(),ye()+t,te())}function Ai(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Se(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ke(e,r,0,n)}_e(n)}function Ri(t,e){return t<<17|e<<2}function Di(t){return t>>17&32767}function Ni(t){return 2|t}function ji(t){return(131068&t)>>2}function Pi(t,e){return-131069&t|e<<2}function Mi(t){return 1|t}function Li(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];le(i),n.contentQueries(2,e[o],o)}}}function Fi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,qt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ui(t,e,n,r,i){let o=t.data[e];if(null===o)o=Vi(t,e,n,r,i),zt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=Yt();o.injectorIndex=null===t?-1:t.injectorIndex}return Xt(o,!0),o}function Vi(t,e,n,r,i){const o=$t(),s=Jt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function qi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Bi(t,e,n){fe(e);try{const r=t.viewQuery;null!==r&&_o(1,r,n);const i=t.template;null!==i&&Hi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Li(t,e),t.staticViewQueries&&_o(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)go(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ve()}}function zi(t,e,n,r){const i=e[2];if(256==(256&i))return;fe(e);const o=te();try{qt(e),zt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Hi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Se(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ke(e,n,0,null),Ee(e,0)}if(function(t){for(let e=Lr(t);null!==e;e=Fr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Bt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Lr(t);null!==e;e=Fr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Ut(n)&&zi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Li(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Se(e,n)}else{const n=t.contentHooks;null!==n&&ke(e,n,1),Ee(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)_e(~r);else{const i=r,o=n[++t],s=n[++t];ae(o,i),s(2,e[i])}}}finally{_e(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)fo(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&_o(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Se(e,n)}else{const n=t.viewHooks;null!==n&&ke(e,n,2),Ee(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Bt(e[3],-1))}finally{ve()}}function Qi(t,e,n,r){const i=e[10],o=!te(),s=Ft(e);try{o&&!s&&i.begin&&i.begin(),s&&Bi(t,e,r),zi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Hi(t,e,n,r,i){const o=ye(),s=2&r;try{_e(-1),s&&e.length>lt&&Ai(t,e,lt,te()),n(r,i)}finally{_e(o)}}function Wi(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Gi(t,e,n){Qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||ze(n,e),Ar(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=bt(r);o&&ao(e,n,r);const u=en(e,t,a,n);Ar(u,e),null!==s&&co(0,a-i,u,r,0,s),o&&(Mt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=zt.lFrame.currentDirectiveIndex;try{_e(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ue(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||no(r,i)}}finally{_e(-1),ue(s)}}(t,e,n))}function Ki(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function $i(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Yi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Yi(t,e,n,r,i,o,s,a,u,c){const l=lt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ti);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Xi(t,e,n,r){const i=Io(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Co(t).push(r,i.length-1))}function Ji(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Zi(t,e,n,r,i,o,s,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(So(t,n,c,r,i),gt(e)&&function(t,e){const n=Mt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(u,r,i):je(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function to(t,e,n,r){let i=!1;if(Qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Oi(n,s.selectors,!1)&&(i||(i=[]),Ge(ze(n,e),t,s.type),bt(s)?(ro(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,oo(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=qi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Pe(n.mergedAttrs,c.hostAttrs),so(t,n,e,u,c),io(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||yi(e)?null:lo(n,i);o.push(c),s=Ji(n,u,s),a=Ji(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Pe(n.mergedAttrs,n.attrs),i}function eo(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function no(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ro(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function io(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;bt(e)&&(n[""]=t)}}function oo(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function so(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new Re(o,bt(i),null);t.blueprint[r]=s,n[r]=s,eo(t,e,0,r,qi(t,n,i.hostVars,Ti),i)}function ao(t,e,n){const r=Nt(e,t),i=$i(n),o=t[10],s=mo(t,Fi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function uo(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function co(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function lo(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function ho(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function fo(t,e){const n=Mt(e,t);if(Ut(n)){const t=n[1];80&n[2]?zi(t,n,t.template,n[8]):n[5]>0&&po(n)}}function po(t){for(let n=Lr(t);null!==n;n=Fr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];zi(t,e,t.template,e[8])}else e[5]>0&&po(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Mt(e[n],t);Ut(r)&&r[5]>0&&po(r)}}function go(t,e){const n=Mt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Bi(r,n,n[8])}function mo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function bo(t){for(;t;){t[2]|=64;const e=Mr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function vo(t,e,n){const r=e[10];r.begin&&r.begin();try{zi(t,e,t.template,n)}catch(i){throw Oo(e,i),i}finally{r.end&&r.end()}}function yo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Lt(n),i=r[1];Qi(i,r,i.template,n)}}(t[8])}function _o(t,e,n){le(0),e(t,n)}const wo=(()=>Promise.resolve(null))();function Io(t){return t[7]||(t[7]=[])}function Co(t){return t.cleanup||(t.cleanup=[])}function Oo(t,e){const n=t[9],r=n?n.get(Er,null):null;r&&r.handleError(e)}function So(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ko(t,e,n){const r=Dt(e,t);Br(t[11],r,n)}function Eo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const To=new hn("INJECTOR",-1);class xo{get(t,e=In){if(e===In){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ao=new hn("Set Injector scope."),Ro={},Do={},No=[];let jo;function Po(){return void 0===jo&&(jo=new xo),jo}function Mo(t,e=null,n=null,r){return new Lo(t,n,e||Po(),r)}class Lo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&gn(e,n=>this.processProvider(n,t,e)),gn([t],t=>this.processInjectorType(t,[],i)),this.records.set(To,Vo(void 0,this));const o=this.records.get(Ao);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=In,n=A.Default){this.assertNotDestroyed();const r=En(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof hn)&&C(t);e=n&&this.injectableDefInScope(n)?Vo(Fo(t),Ro):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?Po():this.parent).get(t,e=n&A.Optional&&e===In?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[On]&&i.unshift(e[On]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Cn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{En(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=S(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=S(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{gn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];gn(r,t=>this.processProvider(t,n,r||No))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,Vo(a,Ro));const u=r.providers;if(null!=u&&!s){const e=t;gn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Bo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return qo(t)?Vo(void 0,t.useValue):Vo(Uo(t),Ro)}(t);if(Bo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Vo(void 0,Ro,!0),e.factory=()=>An(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ro&&(e.value=Do,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Fo(t){const e=C(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof hn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=vn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[k]||t[T]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Uo(t,e,n){let r;if(Bo(t)){const e=p(t);return vt(e)||Fo(e)}if(qo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...An(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>xn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||Fo(e);r=()=>new e(...An(t.deps))}var i;return r}function Vo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function qo(t){return null!==t&&"object"==typeof t&&Sn in t}function Bo(t){return"function"==typeof t}const zo=function(t,e,n){return function(t,e=null,n=null,r){const i=Mo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Qo=(()=>{class t{static create(t,e){return Array.isArray(t)?zo(t,e,""):zo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=In,t.NULL=new xo,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>xn(To)}),t.__NG_ELEMENT_ID__=-1,t})();function Ho(t,e){Oe(Lt(t)[1],Kt())}function Wo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(bt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Go(t.inputs),e.declaredInputs=Go(t.declaredInputs),e.outputs=Go(t.outputs);const n=i.hostBindings;n&&Yo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Ko(t,o),s&&$o(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),bt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Wo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pe(i.hostAttrs,n=Pe(n,i.hostAttrs))}}(r)}function Go(t){return t===B?{}:t===Q?[]:t}function Ko(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function $o(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Yo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Xo=null;function Jo(){if(!Xo){const t=q.Symbol;if(t&&t.iterator)Xo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Xo=n)}}}return Xo}class Zo{constructor(t){this.wrapped=t}static wrap(t){return new Zo(t)}static unwrap(t){return Zo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Zo}}function ts(t){return!!es(t)&&(Array.isArray(t)||!(t instanceof Map)&&Jo()in t)}function es(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ns(t,e,n){return t[e]=n}function rs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function is(t,e,n,r){const i=rs(t,e,n);return rs(t,e+1,r)||i}function os(t,e,n,r,i){const o=is(t,e,n,r);return rs(t,e+2,i)||o}function ss(t,e,n,r,i,o){const s=is(t,e,n,r);return is(t,e+2,i,o)||s}function as(t,e,n,r){const i=Ht();return rs(i,ie(),e)&&(Wt(),function(t,e,n,r,i,o){const s=Nt(t,e);uo(e[11],s,o,t.value,n,r,i)}(we(),i,t,e,n,r)),as}function us(t,e,n,r){return rs(t,ie(),n)?e+b(n)+r:Ti}function cs(t,e,n,r,i,o,s,a,u,c){const l=ss(t,re(),n,i,s,u);return oe(4),l?e+b(n)+r+b(i)+o+b(s)+a+b(u)+c:Ti}function ls(t,e,n,r,i,o,s,a){const u=Ht(),c=Wt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ui(e,t,4,s||null,Vt(c,a));to(e,n,l,Vt(c,u)),Oe(e,l);const h=l.tViews=Yi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Xt(h,!1);const d=u[11].createComment("");si(c,u,d,h),Ar(d,u),mo(u,u[l]=ho(d,u,d,h)),mt(h)&&Gi(c,u,h),null!=s&&Ki(u,h,a)}function hs(t){return Pt(zt.lFrame.contextLView,lt+t)}function ds(t,e=A.Default){const n=Ht();return null===n?xn(t,e):Ye(Kt(),n,p(t),e)}function fs(t,e,n){const r=Ht();return rs(r,ie(),e)&&Zi(Wt(),we(),r,t,e,r[11],n,!1),fs}function ps(t,e,n,r,i){const o=i?"class":"style";So(t,n,e.inputs[o],o,r)}function gs(t,e,n,r){const i=Ht(),o=Wt(),s=lt+t,a=i[11],u=i[s]=Qr(a,e,zt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Ui(e,t,2,i,Vt(a,o));return to(e,n,u,Vt(a,s)),null!==u.attrs&&Eo(u,u.attrs,!1),null!==u.mergedAttrs&&Eo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Xt(c,!0);const l=c.mergedAttrs;null!==l&&De(a,u,l);const h=c.classes;null!==h&&gi(a,u,h);const d=c.styles;null!==d&&pi(a,u,d),64!=(64&c.flags)&&si(o,i,u,c),0===zt.lFrame.elementDepthCount&&Ar(u,i),zt.lFrame.elementDepthCount++,mt(c)&&(Gi(o,i,c),Wi(o,c,i)),null!==r&&Ki(i,c)}function ms(){let t=Kt();Jt()?Zt():(t=t.parent,Xt(t,!1));const e=t;zt.lFrame.elementDepthCount--;const n=Wt();n.firstCreatePass&&(Oe(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ps(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ps(n,e,Ht(),e.stylesWithoutHost,!1)}function bs(t,e,n,r){gs(t,e,n,r),ms()}function vs(t,e,n){const r=Ht(),i=Wt(),o=t+lt,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Vt(o,r),a=Ui(e,t,8,"ng-container",s);return null!==s&&Eo(a,s,!0),to(e,n,a,Vt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Xt(s,!0);const a=r[o]=r[11].createComment("");si(i,r,a,s),Ar(a,r),mt(s)&&(Gi(i,r,s),Wi(i,s,r)),null!=n&&Ki(r,s)}function ys(){let t=Kt();const e=Wt();Jt()?Zt():(t=t.parent,Xt(t,!1)),e.firstCreatePass&&(Oe(e,t),pt(t)&&e.queries.elementEnd(t))}function _s(){return Ht()}function ws(t){return!!t&&"function"==typeof t.then}function Is(t){return!!t&&"function"==typeof t.subscribe}const Cs=Is;function Os(t,e,n=!1,r){const i=Ht(),o=Wt(),s=Kt();return function(t,e,n,r,i,o,s=!1,a){const u=mt(r),c=t.firstCreatePass&&Co(t),l=Io(e);let h=!0;if(3&r.type){const d=Nt(r,e),f=a?a(d):B,p=f.target||d,g=l.length,m=a?t=>a(Rt(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ks(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=ks(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=ks(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Os}function Ss(t,e,n,r){try{return!1!==n(r)}catch(i){return Oo(t,i),!1}}function ks(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Mt(t.index,e):e;0==(32&e[2])&&bo(s);let a=Ss(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Ss(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Es(t=1){return function(t){return(zt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,zt.lFrame.contextLView))[8]}(t)}function Ts(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Oi(t,o,!0):Si(r,o))return i}else n=i}return n}function xs(t){const e=Ht()[16][6];if(!e.projection){const n=e.projection=vn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Ts(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function As(t,e=0,n){const r=Ht(),i=Wt(),o=Ui(i,lt+t,16,null,n||null);null===o.projection&&(o.projection=e),Zt(),64!=(64&o.flags)&&function(t,e,n){fi(e[11],0,e,n,$r(t,n,e),ei(n.parent||e[6],n,e))}(i,r,o)}function Rs(t,e,n){return Ds(t,"",e,"",n),Rs}function Ds(t,e,n,r,i){const o=Ht(),s=us(o,e,n,r);return s!==Ti&&Zi(Wt(),we(),o,t,s,o[11],i,!1),Ds}function Ns(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Di(o):ji(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];js(t[a],e)&&(u=!0,t[a+1]=r?Mi(n):Ni(n)),a=r?Di(n):ji(n)}u&&(t[n+1]=r?Ni(o):Mi(o))}function js(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&wn(t,e)>=0}const Ps={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ms(t){return t.substring(Ps.key,Ps.keyEnd)}function Ls(t,e){const n=Ps.textEnd;return n===e?-1:(e=Ps.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ps.key=e,n),Fs(t,e,n))}function Fs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Us(t,e,n){return zs(t,e,n,!1),Us}function Vs(t,e){return zs(t,e,null,!0),Vs}function qs(t){Qs(yn,Bs,t,!0)}function Bs(t,e){for(let n=function(t){return function(t){Ps.key=0,Ps.keyEnd=0,Ps.value=0,Ps.valueEnd=0,Ps.textEnd=t.length}(t),Ls(t,Fs(t,0,Ps.textEnd))}(e);n>=0;n=Ls(e,n))yn(t,Ms(e),!0)}function zs(t,e,n,r){const i=Ht(),o=Wt(),s=oe(2);o.firstUpdatePass&&Ws(o,t,s,r),e!==Ti&&rs(i,s,e)&&$s(o,o.data[ye()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(zn(t)))),t}(e,n),r,s)}function Qs(t,e,n,r){const i=Wt(),o=oe(2);i.firstUpdatePass&&Ws(i,null,o,r);const s=Ht();if(n!==Ti&&rs(s,o,n)){const a=i.data[ye()];if(Js(a,r)&&!Hs(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),ps(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Ti&&(i=z);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&$s(t,e,n,r,g,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return z;const r=[],i=zn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Hs(t,e){return e>=t.expandoStartIndex}function Ws(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ye()],s=Hs(t,n);Js(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=zt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ks(n=Gs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Gs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ji(r))return t[Di(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Gs(null,t,e,n[1],r),n=Ks(n,e.attrs,r),function(t,e,n,r){t[Di(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ks(r,t[o].hostAttrs,n);return Ks(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Di(s),u=ji(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||wn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Di(t[a+1]);t[r+1]=Ri(e,a),0!==e&&(t[e+1]=Pi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Ri(a,0),0!==a&&(t[a+1]=Pi(t[a+1],r)),a=r;else t[r+1]=Ri(u,0),0===a?a=r:t[u+1]=Pi(t[u+1],r),u=r;l&&(t[r+1]=Ni(t[r+1])),Ns(t,c,r,!0),Ns(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&wn(o,e)>=0&&(n[r+1]=Mi(n[r+1]))}(e,c,t,r,o),s=Ri(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Gs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ks(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ks(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yn(t,s,!!n||e[++o]))}return void 0===t?null:t}function $s(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Xs(1==(1&c)?Ys(u,e,n,i,ji(c),s):void 0)||(Xs(o)||2==(2&c)&&(o=Ys(u,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Nr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Nr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Dt(ye(),n),i,o))}function Ys(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Ti&&(l=c?z:void 0);let h=c?_n(l,r):u===r?l:void 0;if(o&&!Xs(h)&&(h=_n(e,r)),Xs(h)&&(a=h,s))return a;const d=t[i+1];i=s?Di(d):ji(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=_n(t,r))}return a}function Xs(t){return void 0!==t}function Js(t,e){return 0!=(t.flags&(e?16:32))}function Zs(t,e=""){const n=Ht(),r=Wt(),i=t+lt,o=r.firstCreatePass?Ui(r,i,1,e,null):r.data[i],s=n[i]=qr(n[11],e);si(r,n,s,o),Xt(o,!1)}function ta(t){return ea("",t,""),ta}function ea(t,e,n){const r=Ht(),i=us(r,t,e,n);return i!==Ti&&ko(r,ye(),i),ea}function na(t,e,n,r,i){const o=Ht(),s=function(t,e,n,r,i,o){const s=is(t,re(),n,i);return oe(2),s?e+b(n)+r+b(i)+o:Ti}(o,t,e,n,r,i);return s!==Ti&&ko(o,ye(),s),na}function ra(t,e,n,r,i,o,s){const a=Ht(),u=function(t,e,n,r,i,o,s,a){const u=os(t,re(),n,i,s);return oe(3),u?e+b(n)+r+b(i)+o+b(s)+a:Ti}(a,t,e,n,r,i,o,s);return u!==Ti&&ko(a,ye(),u),ra}function ia(t,e,n,r,i,o,s,a,u){const c=Ht(),l=cs(c,t,e,n,r,i,o,s,a,u);return l!==Ti&&ko(c,ye(),l),ia}function oa(t,e,n,r,i,o,s,a,u,c,l){const h=Ht(),d=function(t,e,n,r,i,o,s,a,u,c,l,h){const d=re();let f=ss(t,d,n,i,s,u);return f=rs(t,d+4,l)||f,oe(5),f?e+b(n)+r+b(i)+o+b(s)+a+b(u)+c+b(l)+h:Ti}(h,t,e,n,r,i,o,s,a,u,c,l);return d!==Ti&&ko(h,ye(),d),oa}function sa(t,e,n,r,i,o,s,a,u){Qs(yn,Bs,cs(Ht(),t,e,n,r,i,o,s,a,u),!0)}function aa(t,e,n){const r=Ht();return rs(r,ie(),e)&&Zi(Wt(),we(),r,t,e,r[11],n,!0),aa}const ua=void 0;var ca=["en",[["a","p"],["AM","PM"],ua],[["AM","PM"],ua,ua],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ua,"{1} 'at' {0}",ua],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let la={};function ha(t,e,n){"string"!=typeof e&&(n=e,e=t[ma.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),la[e]=t,n&&(la[e][ma.ExtraData]=n)}function da(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ga(e);if(n)return n;const r=e.split("-")[0];if(n=ga(r),n)return n;if("en"===r)return ca;throw new Error(`Missing locale data for the locale "${t}".`)}function fa(t){return da(t)[ma.CurrencyCode]||null}function pa(t){return da(t)[ma.PluralCase]}function ga(t){return t in la||(la[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),la[t]}var ma=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ba=["zero","one","two","few","many"],va="en-US",ya={marker:"element"},_a={marker:"ICU"};var wa=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let Ia=va;function Ca(t){var e;null==(e=t)&&_("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(Ia=t.toLowerCase().replace(/_/g,"-"))}function Oa(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?ni(t,0,n):Rt(n[i])}function Sa(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)Xr(t,s,n[o[e]],a,!1)}}function ka(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];Ea(r)||Ta(r,e)&&null===xa(r)&&Aa(r,e.index)}}function Ea(t){return!(64&t.type)}function Ta(t,e){return Ea(e)||t.index>e.index}function xa(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function Aa(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(oi(Oa,Sa),t.insertBeforeIndex=e)}function Ra(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Da(t,e,n){const r=Vi(t,n,64,null,null);return ka(e,r),r}function Na(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let ja=0,Pa=0;function Ma(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=qr(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=ti(i,r)),c===s?(l=r,h=o):(l=null,h=Rt(n[c])),null!==h){const e=(131070&u)>>>1;Xr(i,h,n[e],l,!1);const r=Ra(t,e);if(null!==r&&"object"==typeof r){const e=Na(r,n);null!==e&&Ma(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const d=e[++a],f=e[++a];uo(i,Dt(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case _a:const t=e[++a],r=e[++a];null===n[r]&&Ar(n[r]=zr(i,t),n);break;case ya:const o=e[++a],s=e[++a];null===n[s]&&Ar(n[s]=Qr(i,o,null),n)}}}function La(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=b(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?uo(e[11],e[a],null,c,o,i,u):Zi(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Br(e[11],l,i);break;case 2:Ua(t,Ra(t,a),e,i);break;case 3:Fa(t,Ra(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=Ra(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Fa(t,n,r,e)}}o+=a}}function Fa(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=ja;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),La(t,r,e.update[i],n,o)}}function Ua(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=pa(e)(parseInt(t,10)),r=ba[n];return void 0!==r?r:"other"}(e,Ia);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Na(e,n)!==i&&(Va(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Ma(t,e.create[i],n,r)}}function Va(t,e,n){let r=Na(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=Dt(r,n);null!==t&&li(n[11],t)}else Va(t,Ra(t,~r),n)}}}const qa=/\ufffd(\d+):?\d*\ufffd/gi,Ba=/\ufffd(\d+)\ufffd/,za=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Qa=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Ha=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Wa=/\uE500/g;function Ga(t,e,n,r,i,o,s){const a=qi(t,r,1,null);let u=a<<wa.SHIFT,c=Yt();e===c&&(c=null),null===c&&(u|=wa.APPEND_EAGERLY),s&&(u|=wa.COMMENT,void 0===jr&&(jr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=Na(t,e);n=null!==i?t.remove[i]:Q}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=Vi(t,a,s?32:1,null===o?"":o,null);ka(n,l);const h=l.index;return Xt(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(oi(Oa,Sa),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&_("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Ka(t,e,n,r,i,o,s){const a=s.match(qa),u=Ga(t,e,n,o,r,a?null:s,!1);a&&$a(i,s,u.index,null,0,null)}function $a(t,e,n,r,i,o){const s=t.length,a=s+1;t.push(null,null);const u=s+2,c=e.split(qa);let l=0;for(let h=0;h<c.length;h++){const e=c[h];if(1&h){const n=i+parseInt(e,10);t.push(-1-n),l|=Ya(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,o),t[s]=l,t[a]=t.length-u,l}function Ya(t){return 1<<Math.min(t,31)}function Xa(t){let e,n,r="",i=0,o=!1;for(;null!==(e=Qa.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function Ja(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:qi(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(Ya(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=eu(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function Za(t){const e=[],n=[];let r=1,i=0;const o=tu(t=t.replace(za,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=tu(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function tu(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);za.test(n)?r.push(Za(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function eu(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Xn(Tt()).getInertBodyElement(s),d=wr(h)||h;return d?nu(t,e,n,r,u,c,l,d,i,a,0):0}function nu(t,e,n,r,i,o,s,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=qi(t,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(lr.hasOwnProperty(p)){ou(i,ya,p,u,a),t.data[a]=p;const g=f.attributes;for(let t=0;t<g.length;t++){const e=g.item(t),n=e.name.toLowerCase();e.value.match(qa)?fr.hasOwnProperty(n)&&$a(s,e.value,a,e.name,0,hr[n]?nr:dr[n]?rr:null):su(i,a,e)}h=nu(t,e,n,r,i,o,s,d,a,c,l+1)|h,ru(o,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match(qa);ou(i,null,m?"":g,u,a),ru(o,a,l),m&&(h=$a(s,g,a,null,0,null)|h);break;case Node.COMMENT_NODE:const b=Ba.exec(d.textContent||"");if(b){const e=c[parseInt(b[1],10)];ou(i,_a,"",u,a),Ja(t,n,r,u,e,a),iu(o,a,l)}}d=d.nextSibling}return h}function ru(t,e,n){0===n&&t.push(e)}function iu(t,e,n){0===n&&(t.push(~e),t.push(e))}function ou(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function su(t,e,n){t.push(e<<1|1,n.name,n.value)}function au(t,e,n){(function(t,e,n=-1){const r=Wt(),i=Ht(),o=lt+t,s=Vt(r.consts,e),a=Yt();r.firstCreatePass&&function(t,e,n,r,i,o){const s=Yt(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return Xa(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Xa(t.substring(n,r))}}(i,o),h.replace(Wa," ")).split(Ha);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const o=tu(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&Ka(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Ja(t,n,u,e,r,Ga(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),lt+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),Xt(Yt(),!1);else{const e=Da(t,c[0],n);c.unshift([]),Xt(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=Yr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&wa.COMMENT)===wa.COMMENT,c=(s&wa.APPEND_EAGERLY)===wa.APPEND_EAGERLY,l=s>>>wa.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):qr(i,a)),c&&null!==n&&Xr(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),se(!0)})(t,e,n),se(!1)}function uu(t){return rs(Ht(),ie(),t)&&(ja|=1<<Math.min(Pa,31)),Pa++,uu}function cu(t){!function(t,e,n){if(Pa>0){const r=t.data[n];La(t,e,Array.isArray(r)?r:r.update,re()-Pa-1,ja)}ja=0,Pa=0}(Wt(),Ht(),t+lt)}function lu(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)lu(t[o],e,n,r,i);else{const o=Wt(),s=Ht();let a=Bo(t)?t:p(t.provide),u=Uo(t);const c=Kt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Bo(t)||!t.multi){const r=new Re(u,i,ds),f=fu(a,e,i?l:l+d,h);-1===f?(Ge(ze(c,s),o,a),hu(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=fu(a,e,l+d,h),p=fu(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Ge(ze(c,s),o,a);const l=function(t,e,n,r,i){const o=new Re(t,n,ds);return o.multi=[],o.index=e,o.componentProviders=0,du(o,i,r&&!n),o}(i?gu:pu,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),hu(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else hu(o,t,f>-1?f:p,du(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function hu(t,e,n,r){const i=Bo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function du(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function fu(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function pu(t,e,n,r){return mu(this.multi,[])}function gu(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=en(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),mu(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],mu(i,o);return o}function mu(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function bu(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Wt();if(r.firstCreatePass){const i=bt(t);lu(n,r.data,r.blueprint,i,!0),lu(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class vu{}class yu{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let _u=(()=>{class t{}return t.NULL=new yu,t})();function wu(...t){}function Iu(t,e){return new Ou(Nt(t,e))}const Cu=function(){return Iu(Kt(),Ht())};let Ou=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Cu,t})();function Su(t){return t instanceof Ou?t.nativeElement:t}class ku{}let Eu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Tu(),t})();const Tu=function(){const t=Ht(),e=Mt(Kt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let xu=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Au{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ru=new Au("11.2.13");class Du{constructor(){}supports(t){return ts(t)}create(t){return new ju(t)}}const Nu=(t,e)=>e;class ju{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Nu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Fu(n,r,i)?e:n,s=Fu(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ts(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Jo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Pu(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Lu),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Pu{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Mu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Lu{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Mu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fu(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Uu{constructor(){}supports(t){return t instanceof Map||es(t)}create(){return new Vu}}class Vu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||es(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new qu(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class qu{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bu(){return new zu([new Du])}let zu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Bu()),deps:[[t,new jn,new Nn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Bu}),t})();function Qu(){return new Hu([new Uu])}let Hu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Qu()),deps:[[t,new jn,new Nn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Qu}),t})();function Wu(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Rt(o)),ft(o))for(let t=ht;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Wu(e[1],e,n,r)}const s=n.type;if(8&s)Wu(t,e,n.child,r);else if(32&s){const t=Pr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=ui(e,n);if(Array.isArray(t))r.push(...t);else{const n=Mr(e[16]);Wu(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Gu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Wu(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Wr(t,n),bn(e,n))}this._attachedToViewContainer=!1}Gr(this._lView[1],this._lView)}onDestroy(t){Xi(this._lView[1],this._lView,null,t)}markForCheck(){bo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ee(!0);try{vo(t,e,n)}finally{ee(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,di(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ku extends Gu{constructor(t){super(t),this._view=t}detectChanges(){yo(this._view)}checkNoChanges(){!function(t){ee(!0);try{yo(t)}finally{ee(!1)}}(this._view)}get context(){return null}}const $u=Xu;let Yu=(()=>{class t{}return t.__NG_ELEMENT_ID__=$u,t.__ChangeDetectorRef__=!0,t})();function Xu(t=!1){return function(t,e,n){if(!n&&gt(t)){const n=Mt(t.index,e);return new Gu(n,n)}return 47&t.type?new Gu(e[16],e):null}(Kt(),Ht(),t)}const Ju=[new Uu],Zu=new zu([new Du]),tc=new Hu(Ju),ec=function(){return oc(Kt(),Ht())};let nc=(()=>{class t{}return t.__NG_ELEMENT_ID__=ec,t})();const rc=nc,ic=class extends rc{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Fi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Bi(e,n,t),new Gu(n)}};function oc(t,e){return 4&t.type?new ic(e,t,Iu(t,e)):null}class sc{}class ac{}const uc=function(){return pc(Kt(),Ht())};let cc=(()=>{class t{}return t.__NG_ELEMENT_ID__=uc,t})();const lc=cc,hc=class extends lc{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Iu(this._hostTNode,this._hostLView)}get injector(){return new on(this._hostTNode,this._hostLView)}get parentInjector(){const t=We(this._hostTNode,this._hostLView);if(Le(t)){const e=Ue(t,this._hostLView),n=Fe(t);return new on(e[1].data[n+8],e)}return new on(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=dc(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(sc,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new hc(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ht+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ht?(e[4]=n[i],mn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=ci(i,o),a=n[11],u=ti(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,di(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),mn(fc(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=dc(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Wr(this._lContainer,e);n&&(bn(fc(this._lContainer),e),Gr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Wr(this._lContainer,e);return n&&null!=bn(fc(this._lContainer),e)?new Gu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function dc(t){return t[8]}function fc(t){return t[8]||(t[8]=[])}function pc(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=Rt(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);Xr(n,ti(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=ho(r,e,i,t),mo(e,n)}return new hc(n,t,e)}const gc={};class mc extends _u{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new yc(e,this.ngModule)}}function bc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const vc=new hn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Rr});class yc extends vu{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ei).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return bc(this.componentDef.inputs)}get outputs(){return bc(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,gc,i);return o!==gc||r===gc?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ku,At),s=i.get(xu,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Qr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?St:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Rr,clean:wo,playerHandler:null,flags:0},d=Yi(0,null,null,1,0,null,null,null,null,null),f=Fi(null,d,h,l,null,null,o,a,s,i);let p,g;fe(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ui(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Eo(a,u,!0),null!==t&&(De(i,t,u),null!==a.classes&&gi(i,t,a.classes),null!==a.styles&&pi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Fi(n,$i(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ge(ze(a,n),s,e.type),ro(s,a),oo(a,n.length,1)),mo(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)De(a,c,["ng-version",Ru.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Ii(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&De(a,c,t),e&&e.length>0&&gi(a,c,e.join(" "))}if(g=jt(d,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),so(t,r,e,qi(t,e,1,null),n));const i=en(e,t,r.directiveStart,r);Ar(i,e);const o=Nt(r,e);return o&&Ar(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_e(a.index),eo(n[1],a,0,a.directiveStart,a.directiveEnd,e),no(e,s)),s}(t,this.componentDef,f,h,[Ho]),Bi(d,f,null)}finally{ve()}return new _c(this.componentType,p,Iu(g,f),f,g)}}class _c extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ku(r),this.componentType=t}get injector(){return new on(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const wc=new Map;class Ic extends sc{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new mc(this);const n=ct(t),r=t[$]||null;r&&Ca(r),this._bootstrapComponents=Dr(n.bootstrap),this._r3Injector=Mo(t,e,[{provide:sc,useValue:this},{provide:_u,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Qo.THROW_IF_NOT_FOUND,n=A.Default){return t===Qo||t===sc||t===To?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Cc extends ac{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,wc.get(i),n),wc.set(i,n));const o=Dr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ic(this.moduleType,t)}}function Oc(t,e,n){const r=ne()+t,i=Ht();return i[r]===Ti?ns(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Sc(t,e,n,r){return xc(Ht(),ne(),t,e,n,r)}function kc(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return is(t,a,i,o)?ns(t,a+2,s?r.call(s,i,o):r(i,o)):Tc(t,a+2)}(Ht(),ne(),t,e,n,r,i)}function Ec(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return os(t,u,i,o,s)?ns(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Tc(t,u+3)}(Ht(),ne(),t,e,n,r,i,o)}function Tc(t,e){const n=t[e];return n===Ti?void 0:n}function xc(t,e,n,r,i,o){const s=e+n;return rs(t,s,i)?ns(t,s+1,o?r.call(o,i):r(i)):Tc(t,s+1)}function Ac(t,e){const n=Wt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=vt(r.type)),s=D(ds);try{const t=qe(!1),e=o();return qe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ht(),i,e),e}finally{D(s)}}function Rc(t,e,n){const r=t+lt,i=Ht(),o=Pt(i,r);return function(t,e){return Zo.isWrapped(e)&&(e=Zo.unwrap(e),t[re()]=Ti),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?xc(i,ne(),e,o.transform,n,o):o.transform(n))}function Dc(t){return e=>{setTimeout(t,void 0,e)}}const Nc=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Dc(u),a&&(a=Dc(a)),c&&(c=Dc(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function jc(){return this._results[Jo()]()}class Pc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Jo(),n=Pc.prototype;n[e]||(n[e]=jc)}get changes(){return this._changes||(this._changes=new Nc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=pn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Mc{constructor(t){this.queryList=t,this.matches=null}clone(){return new Mc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Lc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Xc(t,e).matches&&this.queries[e].setDirty()}}class Fc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Uc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Uc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Vc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Vc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,qc(e,i)),this.matchTNodeWithReadOption(t,e,tn(e,t,i,!1,!1))}else n===nc?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,tn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ou||r===cc||r===nc&&4&e.type)this.addMatch(e.index,-2);else{const n=tn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function qc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Bc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Iu(t,e):4&t.type?oc(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ou?Iu(e,t):n===nc?oc(e,t):n===cc?pc(e,t):void 0}(t,e,r):en(t,t[1],n,e)}function zc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Bc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Qc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=zc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ht;t<s.length;t++){const e=s[t];e[17]===e[3]&&Qc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Qc(n[1],n,i,r)}}}}}return r}function Hc(t){const e=Ht(),n=Wt(),r=ce();le(r+1);const i=Xc(n,r);if(t.dirty&&Ft(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Qc(n,e,r,[]):zc(n,e,i,r);t.reset(o,Su),t.notifyOnChanges()}return!0}return!1}function Wc(t,e,n){const r=Wt();r.firstCreatePass&&(Yc(r,new Fc(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),$c(r,Ht(),e)}function Gc(t,e,n,r){const i=Wt();if(i.firstCreatePass){const o=Kt();Yc(i,new Fc(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}$c(i,Ht(),n)}function Kc(){return t=Ht(),e=ce(),t[19].queries[e].queryList;var t,e}function $c(t,e,n){const r=new Pc(4==(4&n));Xi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Lc),e[19].queries.push(new Mc(r))}function Yc(t,e,n){null===t.queries&&(t.queries=new Uc),t.queries.track(new Vc(e,n))}function Xc(t,e){return t.queries.getByIndex(e)}function Jc(t,e){return oc(t,e)}function Zc(t=A.Default){const e=Xu(!0);if(null!=e||t&A.Optional)return e;y("ChangeDetectorRef")}const tl=new hn("Application Initializer");let el=(()=>{class t{constructor(t){this.appInits=t,this.resolve=wu,this.reject=wu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();ws(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(xn(tl,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const nl=new hn("AppId"),rl={provide:nl,useFactory:function(){return`${il()}${il()}${il()}`},deps:[]};function il(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ol=new hn("Platform Initializer"),sl=new hn("Platform ID"),al=new hn("appBootstrapListener");let ul=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const cl=new hn("LocaleId"),ll=new hn("DefaultCurrencyCode");class hl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const dl=function(t){return new Cc(t)},fl=dl,pl=function(t){return Promise.resolve(dl(t))},gl=function(t){const e=dl(t),n=Dr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new yc(n)),t},[]);return new hl(e,n)},ml=gl,bl=function(t){return Promise.resolve(gl(t))};let vl=(()=>{class t{constructor(){this.compileModuleSync=fl,this.compileModuleAsync=pl,this.compileModuleAndAllComponentsSync=ml,this.compileModuleAndAllComponentsAsync=bl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const yl=(()=>Promise.resolve(0))();function _l(t){"undefined"==typeof Zone?yl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class wl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nc(!1),this.onMicrotaskEmpty=new Nc(!1),this.onStable=new Nc(!1),this.onError=new Nc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ol(t),Cl(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ol(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Sl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),kl(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Sl(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),kl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ol(t),Cl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Il,wu,wu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Il={};function Cl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ol(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Sl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function kl(t){t._nesting--,Cl(t)}class El{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nc,this.onMicrotaskEmpty=new Nc,this.onStable=new Nc,this.onError=new Nc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Tl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wl.assertNotInAngularZone(),_l(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_l(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(xn(wl))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),xl=(()=>{class t{constructor(){this._applications=new Map,Nl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Nl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class Al{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Rl(t){Nl=t}let Dl,Nl=new Al,jl=!0,Pl=!1;function Ml(){return Pl=!0,jl}function Ll(){if(Pl)throw new Error("Cannot enable prod mode after platform setup.");jl=!1}const Fl=new hn("AllowMultipleToken");class Ul{constructor(t,e){this.name=t,this.token=e}}function Vl(t,e,n=[]){const r=`Platform: ${e}`,i=new hn(r);return(e=[])=>{let o=ql();if(!o||o.injector.get(Fl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ao,useValue:"platform"});!function(t){if(Dl&&!Dl.destroyed&&!Dl.injector.get(Fl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Dl=t.get(Bl);const e=t.get(ol,null);e&&e.forEach(t=>t())}(Qo.create({providers:t,name:r}))}return function(t){const e=ql();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ql(){return Dl&&!Dl.destroyed?Dl:null}let Bl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new El:("zone.js"===t?void 0:t)||new wl({enableLongStackTrace:Ml(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:wl,useValue:n}];return n.run(()=>{const e=Qo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Er,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Hl(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ws(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(el);return t.runInitializers(),t.donePromise.then(()=>(Ca(i.injector.get(cl,va)||va),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=zl({},e);return function(t,e,n){const r=new Cc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ql);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(xn(Qo))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function zl(t,e){return Array.isArray(e)?e.reduce(zl,t):Object.assign(Object.assign({},t),e)}let Ql=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{wl.assertNotInAngularZone(),_l(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{wl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof vu?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(sc),i=n.create(Qo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Tl,null),a=s&&i.injector.get(xl);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Hl(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Hl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(al,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(xn(wl),xn(Qo),xn(Er),xn(_u),xn(el))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Hl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Wl{}class Gl{}const Kl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let $l=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Kl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Yl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Yl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(xn(vl),xn(Gl,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Yl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Xl=function(t){return null},Jl=Vl(null,"core",[{provide:sl,useValue:"unknown"},{provide:Bl,deps:[Qo]},{provide:xl,deps:[]},{provide:ul,deps:[]}]),Zl=[{provide:Ql,useClass:Ql,deps:[wl,Qo,Er,_u,el]},{provide:vc,deps:[wl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:el,useClass:el,deps:[[new Nn,tl]]},{provide:vl,useClass:vl,deps:[]},rl,{provide:zu,useFactory:function(){return Zu},deps:[]},{provide:Hu,useFactory:function(){return tc},deps:[]},{provide:cl,useFactory:function(t){return Ca(t=t||"undefined"!=typeof $localize&&$localize.locale||va),t},deps:[[new Dn(cl),new Nn,new jn]]},{provide:ll,useValue:"USD"}];let th=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(xn(Ql))},t.\u0275mod=rt({type:t}),t.\u0275inj=I({providers:Zl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__createBinding",function(){return d}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return g}),n.d(e,"__spread",function(){return m}),n.d(e,"__spreadArrays",function(){return b}),n.d(e,"__spreadArray",function(){return v}),n.d(e,"__await",function(){return y}),n.d(e,"__asyncGenerator",function(){return _}),n.d(e,"__asyncDelegator",function(){return w}),n.d(e,"__asyncValues",function(){return I}),n.d(e,"__makeTemplateObject",function(){return C}),n.d(e,"__importStar",function(){return S}),n.d(e,"__importDefault",function(){return k}),n.d(e,"__classPrivateFieldGet",function(){return E}),n.d(e,"__classPrivateFieldSet",function(){return T});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var d=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function f(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||d(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function b(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function v(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function _(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function I(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var O=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&d(e,t,n);return O(e,t),e}function k(t){return t&&t.__esModule?t:{default:t}}function E(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function T(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function f(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new f(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,"LogLevel",function(){return s}),n.d(e,"Logger",function(){return h}),n.d(e,"setLogLevel",function(){return d}),n.d(e,"setUserLogHandler",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.r(e),n.d(e,"CONSTANTS",function(){return i}),n.d(e,"Deferred",function(){return f}),n.d(e,"ErrorFactory",function(){return R}),n.d(e,"FirebaseError",function(){return A}),n.d(e,"MAX_VALUE_MILLIS",function(){return st}),n.d(e,"RANDOM_FACTOR",function(){return at}),n.d(e,"Sha1",function(){return K}),n.d(e,"areCookiesEnabled",function(){return T}),n.d(e,"assert",function(){return o}),n.d(e,"assertionError",function(){return s}),n.d(e,"async",function(){return X}),n.d(e,"base64",function(){return u}),n.d(e,"base64Decode",function(){return l}),n.d(e,"base64Encode",function(){return c}),n.d(e,"calculateBackoffMillis",function(){return ut}),n.d(e,"contains",function(){return q}),n.d(e,"createMockUserToken",function(){return p}),n.d(e,"createSubscribe",function(){return $}),n.d(e,"decode",function(){return M}),n.d(e,"deepCopy",function(){return h}),n.d(e,"deepExtend",function(){return d}),n.d(e,"errorPrefix",function(){return tt}),n.d(e,"extractQuerystring",function(){return G}),n.d(e,"getGlobal",function(){return x}),n.d(e,"getModularInstance",function(){return lt}),n.d(e,"getUA",function(){return g}),n.d(e,"isAdmin",function(){return V}),n.d(e,"isBrowser",function(){return v}),n.d(e,"isBrowserExtension",function(){return y}),n.d(e,"isElectron",function(){return w}),n.d(e,"isEmpty",function(){return z}),n.d(e,"isIE",function(){return I}),n.d(e,"isIndexedDBAvailable",function(){return k}),n.d(e,"isMobileCordova",function(){return m}),n.d(e,"isNode",function(){return b}),n.d(e,"isNodeSdk",function(){return O}),n.d(e,"isReactNative",function(){return _}),n.d(e,"isSafari",function(){return S}),n.d(e,"isUWP",function(){return C}),n.d(e,"isValidFormat",function(){return U}),n.d(e,"isValidTimestamp",function(){return L}),n.d(e,"issuedAtTime",function(){return F}),n.d(e,"jsonEval",function(){return j}),n.d(e,"map",function(){return Q}),n.d(e,"ordinal",function(){return ct}),n.d(e,"querystring",function(){return H}),n.d(e,"querystringDecode",function(){return W}),n.d(e,"safeGet",function(){return B}),n.d(e,"stringLength",function(){return ot}),n.d(e,"stringToByteArray",function(){return it}),n.d(e,"stringify",function(){return P}),n.d(e,"validateArgCount",function(){return Z}),n.d(e,"validateCallback",function(){return nt}),n.d(e,"validateContextObject",function(){return rt}),n.d(e,"validateIndexedDBOpenable",function(){return E}),n.d(e,"validateNamespace",function(){return et});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return d(void 0,t)}function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=d(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function b(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function I(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return g().indexOf("MSAppHost/")>=0}function O(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function S(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return"indexedDB"in self&&null!=indexedDB}function E(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function T(){return!(!navigator||!navigator.cookieEnabled)}function x(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var A=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,R.prototype.create),o}return Object(r.__extends)(e,t),e}(Error),R=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?D(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new A(i,a,r);return u},t}();function D(t,e){return t.replace(N,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var N=/\{\$([^}]+)}/g;function j(t){return JSON.parse(t)}function P(t){return JSON.stringify(t)}var M=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=j(l(o[0])||""),n=j(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},L=function(t){var e=M(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},F=function(t){var e=M(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},U=function(t){var e=M(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},V=function(t){var e=M(t).claims;return"object"==typeof e&&!0===e.admin};function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function z(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Q(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function H(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function W(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("="),r=n[1];e[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),e}function G(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var K=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function $(t,e){var n=new Y(t,e);return n.subscribe.bind(n)}var Y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function X(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function J(){}var Z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e){return t+" failed: "+e+" argument "}function et(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(tt(t,"namespace")+"must be a valid firebase namespace.")}function nt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tt(t,e)+"must be a valid function.")}function rt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tt(t,e)+"must be a valid context object.")}var it=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ot=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},st=144e5,at=.5;function ut(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(at*r*(Math.random()-.5)*2);return Math.min(st,r+i)}function ct(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(t):""+t}function lt(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return k}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return b}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return I});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),b=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),y=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const I=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,y]]};let k=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:y,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Yb(u.C))},t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({providers:[S]}),t})()}).call(this,n("3UD+")(t))},t6oF:function(t,e,n){"use strict";var r=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Qa(e,n)})},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e(function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Qa(o(s.length-1),e),r=n.next()}while(!r.done)})},e});var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==d(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++v)}var b="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:_).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var C=Date.now;function O(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function k(t,e,n){this.code=x+t,this.message=e||A[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new k(e.substring(x.length),t.message,t.serverResponse):null}O(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var T,x="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function N(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function j(t){if(Error.captureStackTrace)Error.captureStackTrace(this,j);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");j.call(this,n+t[r])}function M(t,e){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}T=D("__EID__")?"__EID__":void 0,O(j,Error),j.prototype.name="CustomError",O(P,j),P.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new L(function(){return new B},function(t){t.reset()});function q(){var t=ve,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var z=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=z(t,e)}function $(t,e){var n;return(n=0<=(e=z(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function X(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function dt(t){return ut(Z,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===Ct&&e||"",this.b=It}function _t(t){return t instanceof yt&&t.constructor===yt&&t.b===It?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.sa=!0,yt.prototype.ra=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,It={},Ct={};function Ot(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function St(t,e){this.a=e===At?t:""}function kt(t){return t instanceof St&&t.constructor===St?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=_t(t);if(!xt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Ot();return new St(t=e?e.createScriptURL(t):t,At)}(t=n.replace(Tt,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?_t(t):encodeURIComponent(String(t))}))}St.prototype.sa=!0,St.prototype.ra=function(){return this.a.toString()},St.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Tt=/%{(\w+)}/g,xt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,At={};function Rt(t,e){this.a=e===Ft?t:""}function Dt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,jt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Pt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Pt.test(t))t=new Rt(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(jt);t=e&&Nt.test(e[1])?new Rt(t,Ft):null}return t}function Lt(t){return t instanceof Rt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Pt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Ft))}var Ft={},Ut=new Rt("about:invalid#zClosurez",Ft);function Vt(t,e,n){this.a=n===qt?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Bt(t,e,n,r){return t=t instanceof Rt?t:Lt(t),e=e||a,n=n instanceof yt?_t(n):n||"",e.open(Dt(t),n,r,void 0)}function zt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Qt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Ht[" "]=h;var Wt,Gt,Kt=dt("Opera"),$t=dt("Trident")||dt("MSIE"),Yt=dt("Edge"),Xt=Yt||$t,Jt=dt("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),Zt=ut(Z.toLowerCase(),"webkit")&&!dt("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Gt=Z,Jt?/rv:([^\);]+)(\)|;)/.exec(Gt):Yt?/Edge\/([\d\.]+)/.exec(Gt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Zt?/WebKit\/(\S+)/.exec(Gt):Kt?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ne&&(ee=ne?ne[1]:""),$t){var re=te();if(null!=re&&re>parseFloat(ee)){Wt=String(re);break t}}Wt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=tt(String(Wt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var se=a.document&&$t&&(te()||parseInt(Wt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!$t||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){ft(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var le,he,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}Q(s?J(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout(function(){throw t},0)}function me(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(ye)}}else he=function(){var t=ye;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!dt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),be||(he(),be=!0),ve.add(t,e)}var be=!1,ve=new U;function ye(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}F(V,t)}be=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){je(n,Ie,t)},function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}je(n,Ce,t)})}catch(r){je(this,Ce,r)}}var we=0,Ie=2,Ce=3;function Oe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Oe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new L(function(){return new Oe},function(t){t.reset()});function ke(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function Ee(t){if(t instanceof _e)return t;var e=new _e(h);return je(e,Ie,t),e}function Te(t){return new _e(function(e,n){n(t)})}function xe(t,e,n){Pe(t,e,n,null)||me(I(e,t))}function Ae(t){return new _e(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)xe(t[o],I(i,o,!0),I(i,o,!1));else e(r)})}function Re(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?Re(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Fe(n,i,Ce,e)))}t.c=null}else je(t,Ce,e)}function De(t,e){t.b||t.a!=Ie&&t.a!=Ce||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,e,n,r){var i=ke(null,null,null);return i.a=new _e(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,De(t,i),i.a}function je(t,e,n){t.a==we&&(t===n&&(e=Ce,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Pe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Ce||n instanceof qe||function(t,e){t.g=!0,me(function(){t.g&&Ve.call(null,e)})}(t,n)))}function Pe(t,e,n,r){if(t instanceof _e)return De(t,ke(e||h,n||null,r)),!0;if(N(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Me(t){t.h||(t.h=!0,me(t.gc,t))}function Le(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ce&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(i){Ve.call(null,i)}F(Se,e)}function Ue(t,e,n){e==Ie?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Ne(this,p(t)?t:null,p(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).oa=function(t,e){return(t=ke(t,t,e)).c=!0,De(this,t),this},t.o=function(t,e){return Ne(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new qe(t);me(function(){Re(this,e)},this)}},t.$c=function(t){this.a=we,je(this,Ie,t)},t.ad=function(t){this.a=we,je(this,Ce,t)},t.gc=function(){for(var t;t=Le(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ve=ge;function qe(t){j.call(this,t)}function Be(){0!=ze&&(Qe[m(this)]=this),this.xa=this.xa,this.pa=this.pa}O(qe,j),qe.prototype.name="cancel";var ze=0,Qe={};function He(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=ze)){var e=m(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Qe[e]}}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Ge=!$t||9<=Number(se),Ke=$t&&!oe("9"),$e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Jt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},O(Xe,Ye);var Je=We({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Xe.prototype.g=function(){return this.a};var Ze="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++tn,this.va=this.Pa=!1}function nn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}rn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new en(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),un={};function cn(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=_n(n),t&&t[Ze]?In(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=vn(t);if(a||(t[an]=a=new rn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=bn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=_n(n),t&&t[Ze]?Cn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=_n(n),t&&t[Ze]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=sn(o=t.a[e],n,r,i))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=vn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Ze])on(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vn(e))?(on(n,t),0==n.b&&(n.src=null,e[an]=null)):nn(t)}}}function pn(t){return t in un?un[t]:un[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=vn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Xe(e,this))}function vn(t){return(t=t[an])instanceof rn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return p(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function wn(){Be.call(this),this.v=new rn(this),this.ac=this,this.gb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Cn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function On(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&on(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Sn(t,e,n){if(p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function kn(t){var e=null;return new _e(function(n,r){-1==(e=Sn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function En(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Tn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Rn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Rn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Rn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}O(wn,Be),wn.prototype[Ze]=!0,wn.prototype.addEventListener=function(t,e,n,r){cn(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;bt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=On(s,r,!0,t)&&i}if(i=On(s=t.b=n,r,!0,t)&&i,i=On(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=On(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nn(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=xn.prototype).W=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Rn(this.b,t)?this.b[t]:e},t.set=function(t,e){Rn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Dn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Nn?(this.i=void 0!==e?e:t.i,jn(this,t.c),this.l=t.l,this.a=t.a,Pn(this,t.g),this.f=t.f,Mn(this,er(t.b)),this.h=t.h):t&&(n=String(t).match(Dn))?(this.i=!!e,jn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),Pn(this,n[4]),this.f=qn(n[5]||"",!0),Mn(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function jn(t,e,n){t.c=n?qn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Pn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Mn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Jn(this,e),tr(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=Bn(e,Gn)),t.b=new $n(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Nn?new Nn(t):new Nn(t,void 0)}function Vn(t,e,n,r){var i=new Nn(null,void 0);return t&&jn(i,t),e&&(i.a=e),n&&Pn(i,n),r&&(i.f=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Bn(e,Qn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Bn(e,Qn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?Wn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Bn(n,Kn)),t.join("")},Nn.prototype.resolve=function(t){var e=new Nn(this),n=!!t.c;n?jn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Pn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Mn(e,er(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Qn=/[#\/\?@]/g,Hn=/[#\?:]/g,Wn=/[#\?]/g,Gn=/[#\?@]/g,Kn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new xn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Xn(t){var e=Tn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=En(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?tr(n,i,o):n.add(i,o)}return n}function Jn(t,e){Yn(t),e=nr(t,e),Rn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Rn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Zn(t,e){return Yn(t),e=nr(t,e),Rn(t.a.b,e)}function tr(t,e,n){Jn(t,e),0<n.length&&(t.c=null,t.a.set(nr(t,e),J(n)),t.b+=n.length)}function er(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new xn(t.a),e.b=t.b),e}function nr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rr(t){var e=[];return or(new ir,t,e),e.join("")}function ir(){}function or(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),or(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ur(r,n),n.push(":"),or(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ur(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Yn(this),this.c=null,t=nr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach(function(n,r){Q(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Yn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Yn(this);var e=[];if("string"==typeof t)Zn(this,t)&&(e=X(e,this.a.get(nr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,Zn(this,t=nr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ur(t,e){e.push('"',t.replace(ar,function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e}),'"')}function cr(){var t=xr();return $t&&!!se&&11==se||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=Dt(Mt(t)||Ut)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||xr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(e){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=xr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),kr(xr())==Or&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Mt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Lt(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=Dt(e),s&&(Xt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Qt(t)+'">',t=new Vt(t=(r=Ot())?r.createHTML(t):t,null,qt),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function vr(){var t=null;return new _e(function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))}).o(function(e){throw dn(window,"load",t),e})}function yr(t){return t=t||xr(),!("file:"!==jr()&&"ionic:"!==jr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Ir(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Cr(){var t=Ir();return"ReactNative"===t||"Node"===t}var Or="Firefox",Sr="Chrome";function kr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Or:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Sr:"Safari"}var Er={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Tr(t,e){e=e||[];var n,r=[],i={};for(n in Er)i[Er[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=kr(i=xr()):"Worker"===r&&(r=kr(i=xr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function xr(){return a.navigator&&a.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Rr(){try{var t=a.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!cr()||!!a.indexedDB}catch(n){return wr()&&!!a.indexedDB}return!1}function Dr(){return(Nr()||"chrome-extension:"===jr()||yr())&&!Cr()&&Rr()&&!wr()}function Nr(){return"http:"===jr()||"https:"===jr()}function jr(){return a.location&&a.location.protocol||null}function Pr(t){return!fr(t=t||xr())&&kr(t)!=Or}function Mr(t){return void 0===t?null:rr(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=kr(t=t||xr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=xr(),e=Ir(),this.b=fr(t)||"ReactNative"===e}function zr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Qr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Hr(){return!(!Ar("fireauth.oauthhelper",a)&&!Ar("fireauth.iframe",a))}Br.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Nr()&&"chrome-extension:"!==jr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Gr={};function Kr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==$r.abcd}catch(Gt){Wr=!1}function Yr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function Jr(t){var e={};return Xr(e,t),e}function Zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,Zr(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ii]),Yr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ei(t){try{var e=new si(t)}catch(n){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function si(t){ti.call(this,t),Yr(this,"phoneNumber",t[oi])}function ai(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ei(t[di]),!i||i!=ci&&i!=li&&!n||i==li&&!r||i==ui&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[mi]=n||null,e[vi]=n||null,e[gi]=r):(e[mi]=r||null,e[vi]=r||null,e[gi]=n||null),e[bi]=t||null,Yr(this,_i,i),Yr(this,yi,Zr(e))}O(si,ti),si.prototype.w=function(){var t=si.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ui="REVERT_SECOND_FACTOR_ADDITION",ci="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",hi="email",di="mfaInfo",fi="newEmail",pi="requestType",gi="email",mi="fromEmail",bi="multiFactorInfo",vi="previousEmail",yi="data",_i="operation";function wi(t){var e=Fn(t=Un(t),Ii)||null,n=Fn(t,Ci)||null,r=Fn(t,ki)||null;if(r=r&&Ti[r]||null,!e||!n||!r)throw new k("argument-error",Ii+", "+Ci+"and "+ki+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Oi)||null,languageCode:Fn(t,Si)||null,tenantId:Fn(t,Ei)||null})}var Ii="apiKey",Ci="oobCode",Oi="continueUrl",Si="languageCode",ki="mode",Ei="tenantId",Ti={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ui,signIn:ci,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new wi(t)}catch(e){return null}}function Ai(t){var e=t[Pi];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ri];if(n&&"object"==typeof n){e=n[Fi];var r=n[Mi];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Ri+" property must be a non null object when specified.");if(this.f=null,(e=t[ji])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",ji+" property must be a non null object when specified.");if(void 0!==(e=t[Ni])&&"boolean"!=typeof e)throw new k("argument-error",Ni+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Di])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",Di+" property must be a non empty string when specified.");this.i=t||null}var Ri="android",Di="dynamicLinkDomain",Ni="handleCodeInApp",ji="iOS",Pi="url",Mi="installApp",Li="minimumVersion",Fi="packageName",Ui="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var qi=null;function Bi(t){var e=Qi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Bi(t)}catch(e){return null}}function Qi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!qi){qi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===qi[o]&&(qi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Wi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Wi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Wi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Hi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ki(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function $i(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new Ji(t)}catch(r){}return null}var Yi="idToken",Xi="providerId";function Ji(t){var e=t[Xi];if(!e&&t[Yi]){var n=zi(t[Yi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Yr(this,"profile",Zr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}O(Zi,Ji),O(to,Zi),O(eo,Zi),O(no,Zi),O(ro,Zi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then(function(t){if(t[Ys]){var n=zi(t[Ys]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==x+"user-not-found"?new k("user-mismatch"):t})}function lo(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function bo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Ki(t)||{}).Ja||null,this.ob=null}function vo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function yo(t){bo.call(this,t,Wi),this.a=[]}function _o(){yo.call(this,"facebook.com")}function wo(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Io(){yo.call(this,"github.com")}function Co(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Oo(){yo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Oo).credential({idToken:n,accessToken:e})}function ko(){bo.call(this,"twitter.com",Hi)}function Eo(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function To(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new To(t.email,t.password,t.signInMethod):null}function Ao(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t,e){if(!(e=Do(e)))throw new k("argument-error","Invalid email link!");return new To(t,e.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function Do(t){return(t=xi(t=io(t)))&&t.operation===ci?t:null}function No(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new k("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return Q(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new No(e)}return null}function Po(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Mo(t){try{this.a=t||r.default.auth()}catch(e){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new No({eb:t,cb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new No({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return wo(n);case"github.com":return Co(n);case"twitter.com":return Eo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new yo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Uo(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return Ee(this.a?this.a:this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},lo.prototype.ka=function(t){return ba(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,va(t,n)},lo.prototype.c=function(t,e){return co(ya(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return ba(t,go(this))},po.prototype.b=function(t,e){var n=go(this);return n.idToken=e,va(t,n)},po.prototype.c=function(t,e){return co(ya(t,go(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Ib=gt(t),this},O(vo,bo),O(yo,bo),yo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},yo.prototype.Qb=function(){return J(this.a)},yo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},O(_o,yo),Yr(_o,"PROVIDER_ID","facebook.com"),Yr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),O(Io,yo),Yr(Io,"PROVIDER_ID","github.com"),Yr(Io,"GITHUB_SIGN_IN_METHOD","github.com"),O(Oo,yo),Yr(Oo,"PROVIDER_ID","google.com"),Yr(Oo,"GOOGLE_SIGN_IN_METHOD","google.com"),O(ko,bo),Yr(ko,"PROVIDER_ID","twitter.com"),Yr(ko,"TWITTER_SIGN_IN_METHOD","twitter.com"),To.prototype.ka=function(t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?tu(t,Ea,{email:this.a,oobCode:this.f}):tu(t,$a,{email:this.a,password:this.f})},To.prototype.b=function(t,e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?tu(t,Ta,{idToken:e,email:this.a,oobCode:this.f}):tu(t,qa,{idToken:e,email:this.a,password:this.f})},To.prototype.c=function(t,e){return co(this.ka(t),e)},To.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Ao,{PROVIDER_ID:"password"}),Xr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),No.prototype.ka=function(t){return t.fb(Po(this))},No.prototype.b=function(t,e){var n=Po(this);return n.idToken=e,tu(t,Xa,n)},No.prototype.c=function(t,e){var n=Po(this);return n.operation="REAUTH",co(t=tu(t,Ja,n),e)},No.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.fb=function(t,e){var n=this.a.a;return Ee(e.verify()).then(function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then(function(t){return function(t,e){return tu(t,za,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==ao?i.Ha().then(function(e){return function(t,e){return tu(t,Qa,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return tu(t,Ua,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Qo=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.c)?n=zt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=zt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function Wo(t,e,n){k.call(this,t,n),(t=e||{}).Jb&&Yr(this,"email",t.Jb),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.Zb&&Yr(this,"tenantId",t.Zb)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(x)&&(e=e.substring(x.length));var n={credential:Fo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function Ko(){}function $o(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Sb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function Zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}O(Ho,k),O(Wo,k),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&bt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,O($o,Ko),$o.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},zo=new $o,O(Xo,Ko),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(t=Jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){r||C(),delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(M("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(p(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var us={},cs=null;function ls(t){var e;if(cs||(cs=new es(""),us[""]=cs,cs.c=os),!(e=us[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,us[t]=e}return e}function hs(t,e){t&&t.log(ss,e,void 0)}function ds(t){this.f=t}function fs(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}O(ds,Ko),ds.prototype.a=function(){return new fs(this.f)},ds.prototype.b=function(t){return function(){return t}}({}),O(fs,wn);var ps=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,bs(t)}function bs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function vs(t){wn.call(this),this.headers=new xn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ys,this.u=this.S=!1}(t=fs.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,bs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=ps},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,bs(this)),this.a&&(this.readyState=3,bs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):bs(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Ua=function(t){var e=this.i;e&&e.log(is,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),O(vs,wn);var ys="";vs.prototype.b=ls("goog.net.XhrIo");var _s=/^https?$/i,ws=["POST","PUT"];function Is(t){return"content-type"==t.toLowerCase()}function Cs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Os(t),ks(t)}function Os(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ss(t){if(t.c&&void 0!==s)if(t.C[1]&&4==Ts(t)&&2==xs(t))hs(t.b,As(t,"Local request error detected and ignored"));else if(t.i&&4==Ts(t))Sn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ts(t)){hs(t.b,As(t,"Request complete")),t.c=!1;try{var e,n=xs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Dn)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!_s.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ts(t)?t.a.statusText:""}catch(l){hs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+xs(t)+"]",Os(t)}}finally{ks(t)}}}function ks(t,e){if(t.a){Es(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Es(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Ts(t){return t.a?t.a.readyState:0}function xs(t){try{return 2<Ts(t)?t.a.status:-1}catch(e){return-1}}function As(t,e){return e+" ["+t.R+" "+t.l+" "+xs(t)+"]"}function Rs(t){var e=Bs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ds(t,e,n){t.a=!0,t.c=n,t.f=!e,Ms(t)}function Ns(t){if(t.a){if(!t.v)throw new Ls(t);t.v=!1}}function js(t,e,n,r){t.g.push([e,n,r]),t.a&&Ms(t)}function Ps(t){return G(t.g,function(t){return p(t[1])})}function Ms(t){if(t.h&&t.a&&Ps(t)){var e=t.h,n=Vs[e];n&&(a.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(N(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ps(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Rs?(js(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Us(e),Vs[e.a]=e,t.h=e.a)}function Ls(){j.call(this)}function Fs(){j.call(this)}function Us(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=vs.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hs(this.b,As(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(hs(this.b,As(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ks(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ks(this,!0)),vs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ss(this):this.Jc())},t.Jc=function(){Ss(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ys:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return hs(this.b,"Can not get response: "+e.message),null}},Rs.prototype.cancel=function(t){if(this.a)this.c instanceof Rs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Fs(this),Ns(this),Ds(this,!1,t))}},Rs.prototype.m=function(t,e){this.i=!1,Ds(this,t,e)},Rs.prototype.then=function(t,e,n){var r,i,o=new _e(function(t,e){r=t,i=e});return js(this,r,function(t){t instanceof Fs?o.cancel():i(t)}),o.then(t,e,n)},Rs.prototype.$goog_Thenable=!0,O(Ls,j),Ls.prototype.message="Deferred has already fired",Ls.prototype.name="AlreadyCalledError",O(Fs,j),Fs.prototype.message="Deferred was canceled",Fs.prototype.name="CanceledError",Us.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function qs(t){var e={},n=e.document||document,r=kt(t).toString(),i=pe(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Rs(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout(function(){zs(i,!0);var t=new Ws(Hs,"Timeout reached for loading script "+r);Ns(s),Ds(s,!1,t)},h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zs(i,e.xd||!1,u),Ns(s),Ds(s,!0,null))},i.onerror=function(){zs(i,!0,u);var t=new Ws(Qs,"Error while loading script "+r);Ns(s),Ds(s,!1,t)},bt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===c&&(c=l(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&zs(t,!0,this.Ma)}}function zs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Qs=0,Hs=1;function Ws(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),j.call(this,n),this.code=t}function Gs(t){this.f=t}function Ks(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Xs,this.g=gt(t.secureTokenHeaders||Js),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Zs,this.a=gt(t.firebaseHeaders||ta),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=a.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!wr())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=wr()?new ds(self):Cr()?new Gs(n):new Xo,this.b=null}O(Ws,j),O(Gs,Ko),Gs.prototype.a=function(){return new this.f},Gs.prototype.b=function(){return{}};var $s,Ys="idToken",Xs=new Br(3e4,6e4),Js={"Content-Type":"application/x-www-form-urlencoded"},Zs=new Br(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e&&(t.l=ra("https://securetoken.googleapis.com/v1/token",e),t.h=ra("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ra("https://identitytoolkit.googleapis.com/v2/",e))}function ra(t,e){return t=Un(t),e=Un(e.url),t.f=t.a+t.f,jn(t,e.c),t.a=e.a,Pn(t,e.g),t.toString()}function ia(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function oa(t,e,n,r,i,o,s){(function(){var t=xr();return!((t=kr(t)!=Sr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||$t&&se&&!(9<se))})()||wr()?t=w(t.u,t):($s||($s=new _e(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[aa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){js(t,null,e,void 0)}(qs(Et(sa,{onload:aa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=w(t.s,t)),t(e,n,r,i,o,s)}Ks.prototype.T=function(){return this.b},Ks.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new vs(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}In(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return hs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Cn(s,"ready",function(){u&&clearTimeout(u),He(this)}),Cn(s,"timeout",function(){u&&clearTimeout(u),He(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():zo.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:zo),t.a.onreadystatechange=w(t.Vb,t);try{hs(t.b,As(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return hs(t.b,As(t,"Error opening Xhr: "+s.message)),void Cs(t,s)}e=r||"";var o=new xn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)Q(t,e,void 0);else for(var n=Tn(t),r=En(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Is,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!K(ws,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Es(t),0<t.g&&(t.u=function(t){return $t&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),hs(t.b,As(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=Sn(t.Ma,t.g,t)),hs(t.b,As(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){hs(t.b,As(t,"Send error: "+s.message)),Cs(t,s)}}(s,t,n,r,i)};var sa=new yt(Ct,"https://apis.google.com/js/client.js?onload=%{onload}"),aa="__fcb"+Math.floor(1e6*Math.random()).toString();function ua(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new k("invalid-email")}function ca(t){"email"in t&&ua(t)}function la(t){if(!t[Ys]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,gt(t));throw new k("internal-error")}}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}Ks.prototype.s=function(t,e,n,r,i){var o=this;$s.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ks.prototype.zb=function(){return tu(this,Ba,{})},Ks.prototype.Bb=function(t,e){return tu(this,Va,{idToken:t,email:e})},Ks.prototype.Cb=function(t,e){return tu(this,qa,{idToken:t,password:e})};var da={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Zn(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ma(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=eu(t.errorMessage)),e)throw e;la(t)}function ba(t,e){return e.returnIdpCredential=!0,tu(t,Ha,e)}function va(t,e){return e.returnIdpCredential=!0,tu(t,Ga,e)}function ya(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,tu(t,Wa,e)}function _a(t){if(!t.oobCode)throw new k("invalid-action-code")}(t=Ks.prototype).Db=function(t,e){var n={idToken:t},r=[];return ft(da,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),tu(this,Va,n)},t.vb=function(t,e){return bt(t={requestType:"PASSWORD_RESET",email:t},e),tu(this,Pa,t)},t.wb=function(t,e){return bt(t={requestType:"EMAIL_SIGNIN",email:t},e),tu(this,Da,t)},t.ub=function(t,e){return bt(t={requestType:"VERIFY_EMAIL",idToken:t},e),tu(this,Na,t)},t.Eb=function(t,e,n){return bt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),tu(this,ja,t)},t.fb=function(t){return tu(this,Ya,t)},t.nb=function(t,e){return tu(this,Fa,{oobCode:t,newPassword:e})},t.Ra=function(t){return tu(this,Ia,{oobCode:t})},t.jb=function(t){return tu(this,wa,{oobCode:t})};var wa={endpoint:"setAccountInfo",A:_a,Z:"email",B:!0},Ia={endpoint:"resetPassword",A:_a,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(ua(t),!t.password)throw new k("weak-password")},G:la,V:!0,B:!0},Oa={endpoint:"createAuthUri",B:!0},Sa={endpoint:"deleteAccount",N:["idToken"]},ka={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},Ea={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ua,G:la,V:!0,B:!0},Ta={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ua,G:la,V:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:fa,G:la,B:!0,Na:!0},Aa={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:fa,G:la,B:!0,Na:!0},Ra={endpoint:"getAccountInfo"},Da={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");ua(t)},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},ja={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Pa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");ua(t)},Z:"email",B:!0},Ma={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},La={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Fa={endpoint:"resetPassword",A:_a,Z:"email",B:!0},Ua={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Va={endpoint:"setAccountInfo",N:["idToken"],A:ca,V:!0},qa={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ca(t),!t.password)throw new k("weak-password")},G:la,V:!0},Ba={endpoint:"signupNewUser",G:la,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Qa={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Ha={endpoint:"verifyAssertion",A:pa,Ya:ga,G:ma,V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:pa,Ya:ga,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw eu(t.errorMessage);la(t)},V:!0,B:!0},Ga={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new k("internal-error")},Ya:ga,G:ma,V:!0},Ka={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:la,V:!0,B:!0},$a={endpoint:"verifyPassword",A:function(t){if(ua(t),!t.password)throw new k("wrong-password")},G:la,V:!0,B:!0},Ya={endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Xa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");ha(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);la(t)}},Ja={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Za={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ys]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function tu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Te(new k("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Ee(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Un(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new _e(function(e,n){oa(t,a.toString(),function(t){t?t.error?n(nu(t,o||{})):e(t):n(new k("network-request-failed"))},r,u?void 0:rr(Lr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]})}function eu(t){return nu({error:{errors:[{message:t}],code:400,message:t}})}function nu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",bt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=Mr(t)),new k("internal-error",e)}function ru(t){this.b=t,this.a=null,this.rb=function(t){return(au||(au=new _e(function(t,e){function n(){qr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:ou.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Ee(qs(r=Et(iu,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw au=null,t}))).then(function(){return new _e(function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},su.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var iu=new yt(Ct,"https://apis.google.com/js/api.js?onload=%{onload}"),ou=new Br(3e4,6e4),su=new Br(5e3,15e3),au=null;function uu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Vn((t=Un(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function cu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function lu(t){try{return r.default.app(t).auth().Ga()}catch(e){return[]}}function hu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function du(t){var e=lr();return function(t){return tu(t,Ma,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Un(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:mr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ho(lr())})}function fu(t){return t.m||(t.m=vr().then(function(){if(!t.u){var e=t.c,n=t.i,r=lu(t.b),i=new uu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=J(r||[]),t.u=i.toString()}t.v=new ru(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ee(n)}return n.status="ERROR",Ee(n)})}(t)})),t.m}function pu(t){return t.l||(t.C=t.c?Tr(t.c,lu(t.b)):null,t.l=new Ks(t.g,D(t.i),t.C),t.f&&na(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new cu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function mu(t){if(this.a=t||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=w(this.c,this)}uu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Jn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Jn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Jn(this.a.b,"fw"),this.a.toString()},cu.prototype.yb=function(t){return this.h=t,this},cu.prototype.toString=function(){if(this.v){var t=Un(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.default.app(this.c).auth().la()}catch(u){n=null}for(var i in e.ob=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Ib))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),pt(e)||Ln(t,"customParameters",Mr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Ln(t,"scopes",n.join(",")),this.l?Ln(t,"redirectUrl",this.l):Jn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Jn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Jn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Ln(t,a,this.b[a]);return this.h?Ln(t,"tid",this.h):Jn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Jn(t.b,"eid"),(a=lu(this.c)).length&&Ln(t,"fw",a.join(",")),t.toString()},(t=hu.prototype).Ob=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then(function(){return function(t,e){return t.rb.then(function(){return new _e(function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&pr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new _e(function(e){return function n(){kn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return kn(n).then(function(){e(r)})})},t.Xb=function(){var t=xr();return!Pr(t)&&!Vr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Te(new k("popup-blocked"));if(s&&!Pr())return this.ma().o(function(e){pr(t),i(e)}),r(),Ee();this.a||(this.a=du(pu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw pr(t),i(e),e});return r(),e}).then(function(){Uo(n),s||hr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=du(pu(this)));var i=this;return this.a.then(function(){Uo(e),hr(gu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return fu(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new k("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Y(this.h,function(e){return e==t})},(t=mu.prototype).get=function(t){return Ee(this.a.getItem(t)).then(function(t){return t&&Fr(t)})},t.set=function(t,e){return Ee(this.a.setItem(t,Mr(e)))},t.U=function(t){return Ee(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var vu,yu=[];function _u(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wu(t){this.a=t}function Iu(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Te(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Ou(t,c),e}).o(function(e){throw Ou(t,c),e})}function Ou(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Y(t.a,function(t){return t==e})}}function Su(){if(!xu())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(Q(yu,function(n){n.b==t&&(e=n)}),!e){var e=new bu(t);yu.push(e)}return e}(),_u(this.v,"keyChanged",function(e,n){return ju(t).then(function(e){return 0<e.length&&Q(t.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),_u(this.v,"ping",function(){return Ee(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?Ee().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Ee(null)}().then(function(e){(t.h=e)&&(t.g=new Iu(new wu(e)),Cu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&K(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function ku(t){return new _e(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return ku(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Eu(t){return t.i||(t.i=ku(t)),t.i}function Tu(t,e){var n=0;return new _e(function r(i,o){Eu(t).then(e).then(i).o(function(e){if(!(3<++n))return Eu(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function xu(){try{return!!a.indexedDB}catch(Gt){return!1}}function Au(t){return t.objectStore("firebaseLocalStorage")}function Ru(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Du(t){return new _e(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Nu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Ee()}function ju(t){return Eu(t).then(function(t){var e=Au(Ru(t,!1));return e.getAll?Du(e.getAll()):new _e(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r})}function Pu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Mu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ee().then(function(){if(xu()){var t=Ur(),r="__sak"+t;return vu||(vu=new Su),(n=vu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){Q(e.a,function(e){e(t)})}),t})}function Lu(){this.a={},this.type="inMemory"}function Fu(){if(!function(){var t="Node"==Ir();if(!(t=Uu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Ir())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Uu()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function Uu(){try{var t=a.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Vu(){this.type="nullStorage"}function qu(){if(!function(){var t="Node"==Ir();if(!(t=Bu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Ir())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Bu()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bu(){try{var t=a.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zu(){var t={};t.Browser=Wu,t.Node=Gu,t.ReactNative=Ku,t.Worker=$u,this.a=t[Ir()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];Q(r,function(e){i.push(Ee().then(function(){return e(t.origin,t.data.data)}))}),Ae(i).then(function(r){var i=[];Q(r,function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),Q(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},wu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Iu.prototype.close=function(){for(;0<this.a.length;)Ou(this,this.a[0]);this.b=!0},(t=Su.prototype).set=function(t,e){var n=this,r=!1;return Tu(this,function(e){return Du((e=Au(Ru(e,!0))).get(t))}).then(function(i){return Tu(n,function(o){if(o=Au(Ru(o,!0)),i)return i.value=e,Du(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Du(o.add(s))})}).then(function(){return n.c[t]=e,Nu(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return Tu(this,function(e){return Du(Au(Ru(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return Tu(this,function(r){return n=!0,e.b++,Du(Au(Ru(r,!0)).delete(t))}).then(function(){return delete e.c[t],Nu(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Pu(t),function e(){t.f=setTimeout(function(){t.l=ju(t).then(function(e){0<e.length&&Q(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,function(e){return e==t}),0==this.a.length&&Pu(this)},(t=Mu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,function(e){return e==t})},(t=Lu.prototype).get=function(t){return Ee(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ee()},t.U=function(t){return delete this.a[t],Ee()},t.ca=function(){},t.ia=function(){},(t=Fu.prototype).get=function(t){var e=this;return Ee().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ee().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&cn(a.window,"storage",t)},t.ia=function(t){a.window&&dn(a.window,"storage",t)},(t=Vu.prototype).get=function(){return Ee(null)},t.set=function(){return Ee()},t.U=function(){return Ee()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ee().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ee().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Qu,Hu,Wu={F:Fu,bb:qu},Gu={F:Fu,bb:qu},Ku={F:mu,bb:Vu},$u={F:Fu,bb:Vu},Yu={rd:"local",NONE:"none",td:"session"};function Xu(){var t=!(Vr(xr())||!_r()),e=Pr(),n=Rr();this.m=t,this.h=e,this.l=n,this.a={},Qu||(Qu=new zu),t=Qu;try{this.g=!cr()&&Hr()||!a.indexedDB?new t.a.F:new Mu(wr()?new Lu:new t.a.F)}catch(r){this.g=new Lu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Lu}this.v=new Lu,this.f=w(this.Yb,this),this.b={}}function Ju(){return Hu||(Hu=new Xu),Hu}function Zu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function tc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ec(t,e,n){return n=tc(e,n),"local"==e.F&&(t.b[n]=null),Zu(t,e.F).U(n)}function nc(t){t.c&&(clearInterval(t.c),t.c=null)}function rc(t){this.a=t,this.b=Ju()}(t=Xu.prototype).get=function(t,e){return Zu(this,t.F).get(tc(t,e))},t.set=function(t,e,n){var r=tc(t,n),i=this,o=Zu(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=tc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(Zu(this,"local").ca(this.f),this.h||(cr()||!Hr())&&a.indexedDB||!this.l||function(t){nc(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tc(t,e),this.a[t]&&(Y(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Zu(this,"local").ia(this.f),nc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Zu(this,"local").ia(this.f):nc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},$t&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else Q(t,w(this.mb,this))},t.mb=function(t){this.a[t]&&Q(this.a[t],function(t){t()})};var ic,oc={name:"authEvent",F:"local"};function sc(){this.a=Ju()}function ac(t,e){this.b=uc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ic&&(ic=a.Int32Array?new Int32Array(gc):gc),this.reset()}O(ac,function(){this.b=-1});for(var uc=64,cc=uc-1,lc=[],hc=0;hc<cc;hc++)lc[hc]=0;var dc=X(128,lc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|ic[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function pc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}ac.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):J(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mc(){ac.call(this,8,bc)}O(mc,ac);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function vc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new sc,this.g=new rc(this.h),this.f=null,this.b=[],this.a=this.c=null}function yc(t){return new k("invalid-cordova-configuration",t)}function _c(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function wc(t){return t.f||(t.f=t.ma().then(function(){return new _e(function(e){t.Ea(function n(r){return e(r),t.Sa(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Ic(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?E(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}_c(t,i)})}var n=new Vo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=kn(500).then(function(){return Ic(t).then(function(){r||_c(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Qo||(Qo=new Bo),function(t){var e=Qo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Ic(t){var e=null;return function(t){return t.b.get(oc,t.a).then(function(t){return qo(t)})}(t.g).then(function(n){return e=n,ec((n=t.g).b,oc,n.a)}).then(function(){return e})}function Cc(t){this.a=t,this.b=Ju()}(t=vc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?vr().then(function(){return new _e(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Te(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Ar("universalLinks.subscribe",a))throw yc("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",a))throw yc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",a))throw yc("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",a))throw yc("cordova-plugin-inappbrowser is not installed")},function(){throw new k("cordova-not-ready")})},t.Ob=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Ee()},t.Mb=function(){return Te(new k("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Te(new k("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Ee().then(function(){return Uo(e),wc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Vo(e,r,null,o,new k("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",a);if("string"!=typeof u)throw new k("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",a),l={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!xr().toLowerCase().match(/android/))return Te(new k("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new mc;pc(e,t),t=[];var n=8*e.g;pc(e,dc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=gu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(oc,s.w(),e)}).then(function(){var e=Ar("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",a)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",a)))throw new k("invalid-cordova-configuration");e=xr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new _e(function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){zr()&&c()},o.addEventListener("resume",c=function(){s||(s=kn(2e3).then(function(){e(new k("redirect-cancelled-by-user"))}))},!1),xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return Ic(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null})},t.Ea=function(t){this.b.push(t),wc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new k("no-auth-event")),t(e))})},t.Sa=function(t){Y(this.b,function(e){return e==t})};var Oc={name:"pendingRedirect",F:"session"};function Sc(t){return ec(t.b,Oc,t.a)}function kc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new qc,this.C=new Wc,this.g=new Cc(Uc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ec(this.D,this.v,this.m,T,this.J)}function Ec(t,e,n,i,o){var s=r.default.SDK_VERSION||null;return yr()?new vc(t,e,n,s,i,o):new hu(t,e,n,s,i,o)}function Tc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function xc(t){t.a.Xb()&&Tc(t).o(function(e){var n=new Vo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Pc(e)&&t.s(n)}),t.a.Tb()||Bc(t.b)}function Ac(t,e){K(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Oc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Sc(t.g).then(function(){Tc(t).o(function(e){var n=new Vo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Pc(e)&&t.s(n)})}):xc(t)}).o(function(){xc(t)})}function Rc(t,e){Y(t.h,function(t){return t==e})}kc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Ec(this.D,this.v,this.m,null,this.J),this.i={}},kc.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Bc(this.b),e};var Dc=new Br(2e3,1e4),Nc=new Br(3e4,6e4);function jc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Pc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mc(t,e,n,r,i){var o;return function(t){return t.b.set(Oc,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,r,i).o(function(e){if(Pc(e))throw new k("operation-not-supported-in-this-environment");return o=e,Sc(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new _e(function(){}):Sc(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Lc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Dc.get())}kc.prototype.qa=function(){return this.b.qa()};var Fc={};function Uc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Vc(t,e,n,r){var i=Uc(e,n,r);return Fc[i]||(Fc[i]=new kc(t,e,n,r)),Fc[i]}function qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,Hc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Hc(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return Ee(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Hc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Te(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function Wc(){}function Gc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Kc(t,e){this.a=e,Yr(this,"verificationId",t)}function $c(t,e,n,r){return new Mo(t).fb(e,n).then(function(t){return new Kc(t,r)})}function Yc(t){var e=Qi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Qr(1e3*e.exp),authTime:Qr(1e3*e.auth_time),issuedAtTime:Qr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Xc(t,e,n){var r=e&&e[Zc];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;Q(e[Jc]||[],function(t){(t=ei(t))&&i.b.push(t)}),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Hc(this,!0,null,t.a),Ee()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){Hc(t,a,e,null)}).o(function(e){Hc(t,a,null,e)})}(this,t,e):Te(new k("invalid-auth-event")):(Hc(this,!1,null,null),Ee())}else Te(new k("invalid-auth-event"))},qc.prototype.qa=function(){var t=this;return new _e(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=kn(Nc.get()).then(function(){t.b||(t.g=!0,Hc(t,!0,null,e))})}(t))})},Wc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ee()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):Te(new k("invalid-auth-event"))}else Te(new k("invalid-auth-event"))},Kc.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Jc="mfaInfo",Zc="mfaPendingCredential";function tl(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new Xc(t,e,n),Yr(this,"resolver",this.b)}function el(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new tl(e,t.serverResponse,n,t.message)}catch(r){}return null}function nl(){}function rl(t){Yr(this,"factorId",t.fa),this.a=t}function il(t){if(rl.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ol(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function sl(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&Q(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new si(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),al(this,n)}function al(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function ul(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function cl(t,e){t.stop(),t.b=kn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return zr()||!t?Ee():new _e(function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){cl(t,!0)}).o(function(e){t.i(e)&&cl(t,!1)})}function ll(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function hl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function dl(t,e){t.b=zi(e[Ys]||""),t.a=e.refreshToken,hl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function fl(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Qr(e||null),creationTime:Qr(t||null)})}function pl(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.default.SDK_VERSION?Tr(r.default.SDK_VERSION):null;this.a=new Ks(this.l,D(T),i),t.emulatorConfig&&na(this.a,t.emulatorConfig),this.b=new ll(this.a),Cl(this,e[Ys]),dl(this.b,e),Yr(this,"refreshToken",this.b.a),kl(this,n||{}),wn.call(this),this.R=!1,this.s&&Dr()&&(this.i=Vc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new ul(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=w(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){na(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){vl(o,t.f)},this.ba=null,this.O=new sl(this,n),Yr(this,"multiFactor",this.O)}function ml(t,e){t.ja&&dn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&cn(e,"languageCodeChanged",t.Oa)}function bl(t,e){t.X&&dn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&cn(e,"emulatorConfigChanged",t.Aa)}function vl(t,e){t.$=e,ia(t.a,r.default.SDK_VERSION?Tr(r.default.SDK_VERSION,t.$):null)}function yl(t,e){t.ba&&dn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&cn(e,"frameworkChanged",t.Ba)}function _l(t){try{return r.default.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function wl(t){t.D||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.aa),cn(t,"tokenChanged",t.aa))}function Il(t){dn(t,"tokenChanged",t.aa),t.u.stop()}function Cl(t,e){t.za=e,Yr(t,"_lat",e)}function Ol(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ae(e).then(function(){return t})}function Sl(t){t.i&&!t.R&&(t.R=!0,Ac(t.i,t))}function kl(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new fl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function El(){}function Tl(t){return Ee().then(function(){if(t.D)throw new k("app-deleted")})}function xl(t){return W(t.providerData,function(t){return t.providerId})}function Al(t,e){e&&(Rl(t,e.providerId),t.providerData.push(e))}function Rl(t,e){Y(t.providerData,function(t){return t.providerId==e})}function Dl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Nl(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Yr(t,"metadata",e.metadata?function(t){return new fl(t.a,t.b)}(e.metadata):new fl),Q(e.providerData,function(e){Al(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Yr(t,"refreshToken",t.b.a),al(t.O,e.O.b))}function jl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return tu(t.a,Ra,{idToken:e}).then(w(t.Kc,t))}(t,e).then(function(){return n||Dl(t,"isAnonymous",!1),e})})}function Pl(t,e){e[Ys]&&t.za!=e[Ys]&&(dl(t.b,e),t.dispatchEvent(new ol("tokenChanged")),Cl(t,e[Ys]),Dl(t,"refreshToken",t.b.a))}function Ml(t,e){return jl(t).then(function(){if(K(xl(t),e))return Ol(t).then(function(){throw new k("provider-already-linked")})})}function Ll(t,e,n){return Jr({user:t,credential:Fo(e),additionalUserInfo:e=$i(e),operationType:n})}function Fl(t,e){return Pl(t,e),t.reload().then(function(){return t})}function Ul(t,e,n,i,o){if(!Dr())return Te(new k("operation-not-supported-in-this-environment"));if(t.h&&!o)return Te(t.h);var s=Ki(n.providerId),a=Ur(t.uid+":::"),u=null;(!Pr()||_r())&&t.s&&n.isOAuthProvider&&(u=gu(t.s,t.l,t.m,e,n,null,a,r.default.SDK_VERSION||null,null,null,t.tenantId));var c=gr(u,s&&s.ua,s&&s.ta);return i=i().then(function(){if(ql(t),!o)return t.I().then(function(){})}).then(function(){return jc(t.i,c,e,n,a,!!u,t.tenantId)}).then(function(){return new _e(function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Lc(t.i,t,e,c,a)})}).then(function(t){return c&&pr(c),t?Jr(t):null}).o(function(t){throw c&&pr(c),t}),Bl(t,i,o)}function Vl(t,e,n,r,i){if(!Dr())return Te(new k("operation-not-supported-in-this-environment"));if(t.h&&!i)return Te(t.h);var o=null,s=Ur(t.uid+":::");return r=r().then(function(){if(ql(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,Ol(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Hl,t.w(),e.a)),e}).then(function(){return Mc(t.i,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Wl(t.ha);throw o}).then(function(){if(o)throw o}),Bl(t,r,i)}function ql(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Bl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Te(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ol("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(r),r.oa(function(){$(t.J,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),_l(t),w(t.jc,t))),n||e})}function zl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ys]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gl(e,n,t);return t.providerData&&Q(t.providerData,function(t){t&&Al(i,Jr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Ql(t){this.a=t,this.b=Ju()}Xc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=gt(e.f);return delete n[Jc],delete n[Zc],bt(n,t),e.g(n)})},O(tl,k),nl.prototype.sb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),bt(n,{phoneVerificationInfo:Po(t.a)}),tu(e,xa,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return bt(n={mfaPendingCredential:n},{phoneVerificationInfo:Po(t.a)}),tu(e,Aa,n)})}(this,t,e)},O(rl,nl),O(il,rl),O(ol,Ye),(t=sl.prototype).yc=function(t){al(this,function(t){var e=[];return Q(t.mfaInfo||[],function(t){(t=ei(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new oo(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then(function(n){return t.sb(r,n,e)}).then(function(t){return Pl(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return tu(r,Za,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=H(e.b,function(t){return t.uid!=n});return al(e,r),Pl(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,function(t){return t.w()})}}},ul.prototype.start=function(){this.a=this.c,cl(this,!0)},ul.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ll.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ll.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Te(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new _e(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?oa(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(nu(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))},"POST",Xn(e).toString(),t.g,t.m.get()):r(new k("internal-error"))})}(t.f,e).then(function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,hl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ee(null):Ee({accessToken:this.b.toString(),refreshToken:this.a})},fl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},O(gl,wn),gl.prototype.wa=function(t){this.ya=t,ea(this.a,t)},gl.prototype.la=function(){return this.ya},gl.prototype.Ga=function(){return J(this.$)},gl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Yr(gl.prototype,"providerId","firebase"),(t=gl.prototype).reload=function(){var t=this;return Bl(this,Tl(this).then(function(){return jl(t).then(function(){return Ol(t)}).then(El)}))},t.oc=function(t){return this.I(t).then(function(t){return new Yc(t)})},t.I=function(t){var e=this;return Bl(this,Tl(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.za&&(Cl(e,t.accessToken),e.dispatchEvent(new ol("tokenChanged"))),Dl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");kl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Al(this,e[n]);Dl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ol("userReloaded",{hd:t}))},t.Lc=function(t){return Kr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Bl(this,t.c(this.a,this.uid).then(function(t){return Pl(e,t),n=Ll(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Kr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Bl(this,Ml(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ll(e,t,"link"),Fl(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Bl(this,Ml(this,"phone").then(function(){return $c(_l(n),t,e,w(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Bl(this,Ee().then(function(){return $c(_l(n),t,e,w(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Pl(e,t),e.reload()}))},t.ed=function(t){var e=this;return Bl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Pl(e,t),e.reload()}))},t.Cb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Pl(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Tl(this);var e=this;return Bl(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Pl(e,t),Dl(e,"displayName",t.displayName||null),Dl(e,"photoURL",t.photoUrl||null),Q(e.providerData,function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))}),Ol(e)}).then(El))},t.cd=function(t){var e=this;return Bl(this,jl(this).then(function(n){return K(xl(e),t)?function(t,e,n){return tu(t,ka,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return Q(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),Q(xl(e),function(t){n[t]||Rl(e,t)}),n[Mo.PROVIDER_ID]||Yr(e,"phoneNumber",null),Ol(e)}):Ol(e).then(function(){throw new k("no-such-provider")})}))},t.delete=function(){var t=this;return Bl(this,this.I().then(function(e){return tu(t.a,Sa,{idToken:e})}).then(function(){t.dispatchEvent(new ol("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");ml(t,null),bl(t,null),yl(t,null),t.J=[],t.D=!0,Il(t),Yr(t,"refreshToken",null),t.i&&Rc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):null},t.Ec=function(t){var e=this;return Ul(this,"linkViaPopup",t,function(){return Ml(e,t.providerId).then(function(){return Ol(e)})},!1)},t.Nc=function(t){return Ul(this,"reauthViaPopup",t,function(){return Ee()},!0)},t.Fc=function(t){var e=this;return Vl(this,"linkViaRedirect",t,function(){return Ml(e,t.providerId)},!1)},t.Oc=function(t){return Vl(this,"reauthViaRedirect",t,function(){return Ee()},!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,this.I().then(function(n){return va(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ll(i,t,"link"),Fl(i,t)}).then(function(){return o}))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,Ee().then(function(){return co(ya(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ll(i,t,"reauthenticate"),Pl(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return Bl(this,this.I().then(function(e){return n=e,void 0===t||pt(t)?{}:Vi(new Ai(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,r=null;return Bl(this,this.I().then(function(t){return r=t,void 0===e||pt(e)?{}:Vi(new Ai(e))}).then(function(e){return n.a.Eb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Bl(this,t=co(Ee(t),n.uid).then(function(t){return e=Ll(n,t,"reauthenticate"),Pl(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&bt(t,this.metadata.w()),Q(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),bt(t,this.O.w()),t};var Hl={name:"redirectUser",F:"session"};function Wl(t){return ec(t.b,Hl,t.a)}function Gl(t){this.a=t,this.b=Ju(),this.c=null,this.f=function(t){var e=Yl("local"),n=Yl("session"),r=Yl("none");return function(t,e,n){var r=tc(e,n),i=Zu(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get($l,t.a).then(function(t){return t?Yl(t):e})})})}).then(function(e){return t.c=e,Kl(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Yl("local"),this.a,w(this.g,this))}function Kl(t,e){var n,r=[];for(n in Yu)Yu[n]!==e&&r.push(ec(t.b,Yl(Yu[n]),t.a));return r.push(ec(t.b,$l,t.a)),function(t){return new _e(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)xe(t[a],I(o,a),s);else e(i)})}(r)}Gl.prototype.g=function(){var t=this,e=Yl("local");th(this,function(){return Ee().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Kl(t,"local").then(function(){t.c=e})})})};var $l={name:"persistence",F:"session"};function Yl(t){return{name:"authUser",F:t}}function Xl(t,e){return th(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Jl(t){return th(t,function(){return ec(t.b,t.c,t.a)})}function Zl(t,e,n){return th(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zl(t||{})})})}function th(t,e){return t.f=t.f.then(e,e),t.f}function eh(t){if(this.l=!1,Yr(this,"settings",new Gc),Yr(this,"app",t),!ch(this).options||!ch(this).options.apiKey)throw new k("invalid-api-key");t=r.default.SDK_VERSION?Tr(r.default.SDK_VERSION):null,this.a=new Ks(ch(this).options&&ch(this).options.apiKey,D(T),t),this.R=[],this.s=[],this.O=[],this.hb=r.default.INTERNAL.createSubscribe(w(this.zc,this)),this.X=void 0,this.bc=r.default.INTERNAL.createSubscribe(w(this.Ac,this)),ah(this,null),this.i=new Gl(ch(this).options.apiKey+":"+ch(this).name),this.D=new Ql(ch(this).options.apiKey+":"+ch(this).name),this.$=fh(this,function(t){var e=ch(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Hl,t.a).then(function(t){return t&&e&&(t.authDomain=e),zl(t||{})})}(t.D,ch(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Wl(t.D)});return fh(t,e)}(t).then(function(){return Zl(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Xl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Jl(t.i)})):null}).then(function(e){ah(t,e||null)});return fh(t,n)}(this)),this.h=fh(this,function(t){return t.$.then(function(){return sh(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Yl("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.ya=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=ch(t).options.authDomain,n=ch(t).options.apiKey;e&&Dr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=Vc(e,n,ch(t).name,t.P),Ac(t.b,t),lh(t)&&Sl(lh(t)),t.m){Sl(t.m);var r=t.m;r.wa(t.la()),ml(r,t),vl(r=t.m,t.J),yl(r,t),na((r=t.m).a,t.P),bl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Un(this.P.url);t=Jr({protocol:t.c,host:t.a,port:t.g,options:Jr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function nh(t){Ye.call(this,"languageCodeChanged"),this.h=t}function rh(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function ih(t){Ye.call(this,"frameworkChanged"),this.f=t}function oh(t){return t.Oa||Te(new k("auth-domain-config-required"))}function sh(t){if(!Dr())return Te(new k("operation-not-supported-in-this-environment"));var e=oh(t).then(function(){return t.b.qa()}).then(function(t){return t?Jr(t):null});return fh(t,e)}function ah(t,e){lh(t)&&(function(t,e){Y(t.S,function(t){return t==e})}(lh(t),t.Ba),dn(lh(t),"tokenChanged",t.ya),dn(lh(t),"userDeleted",t.za),dn(lh(t),"userInvalidated",t.Aa),Il(lh(t))),e&&(e.S.push(t.Ba),cn(e,"tokenChanged",t.ya),cn(e,"userDeleted",t.za),cn(e,"userInvalidated",t.Aa),0<t.u&&wl(e)),Yr(t,"currentUser",e),e&&(e.wa(t.la()),ml(e,t),vl(e,t.J),yl(e,t),na(e.a,t.P),bl(e,t))}function uh(t,e){var n=null,r=null;return fh(t,e.then(function(e){return n=Fo(e),r=$i(e),function(t,e){var n={};return n.apiKey=ch(t).options.apiKey,n.authDomain=ch(t).options.authDomain,n.appName=ch(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,r){var i=new gl(t,e);return n&&(i.ha=n),r&&vl(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return lh(t)&&e.uid==lh(t).uid?(Nl(lh(t),e),t.da(e)):(ah(t,e),Sl(e),t.da(e))}).then(function(){dh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),t,w(t.kc,t))),n||e}).then(function(){return Jr({user:lh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function ch(t){return t.app}function lh(t){return t.currentUser}function hh(t){return lh(t)&&lh(t)._lat||null}function dh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](hh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](hh(t))}}function fh(t,e){return t.R.push(e),e.oa(function(){$(t.R,e)}),e}function ph(){}function gh(){this.a={},this.b=1e12}Gl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in Yu)if(Yu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!Rr()&&"none"!==t)throw n}}(t),th(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Kl(n,t)}).then(function(){if(n.c=Yl(t),e)return n.b.set(n.c,e,n.a)}):Ee()})},O(eh,wn),O(nh,Ye),O(rh,Ye),O(ih,Ye),(t=eh.prototype).xb=function(t){return fh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ea(this.a,this.aa),this.dispatchEvent(new nh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&vr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,na(this.a,this.P),this.dispatchEvent(new rh(this.P))}},t.Gc=function(t){this.J.push(t),ia(this.a,r.default.SDK_VERSION?Tr(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new ih(this.J))},t.Ga=function(){return J(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ch(this).options.apiKey,authDomain:ch(this).options.authDomain,appName:ch(this).name,currentUser:lh(this)&&lh(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return uh(i,ba(i.a,o))})},t.Xc=function(t){if(!Dr())return Te(new k("operation-not-supported-in-this-environment"));var e=this,n=Ki(t.providerId),i=Ur(),o=null;(!Pr()||_r())&&ch(this).options.authDomain&&t.isOAuthProvider&&(o=gu(ch(this).options.authDomain,ch(this).options.apiKey,ch(this).name,"signInViaPopup",t,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.P));var s=gr(o,n&&n.ua,n&&n.ta);return fh(this,n=oh(this).then(function(n){return jc(n,s,"signInViaPopup",t,i,!!o,e.T())}).then(function(){return new _e(function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Lc(e.b,e,"signInViaPopup",s,i)})}).then(function(t){return s&&pr(s),t?Jr(t):null}).o(function(t){throw s&&pr(s),t}))},t.Yc=function(t){if(!Dr())return Te(new k("operation-not-supported-in-this-environment"));var e=this;return fh(this,oh(this).then(function(){return function(t){return th(t,function(){return t.b.set($l,t.c.F,t.a)})}(e.i)}).then(function(){return Mc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return sh(this).then(function(e){return t.b&&zc(t.b.b),e}).o(function(e){throw t.b&&zc(t.b.b),e})},t.dd=function(t){if(!t)return Te(new k("null-user"));if(this.S!=t.tenantId)return Te(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=ch(this).options.apiKey,n.authDomain=ch(this).options.authDomain,n.appName=ch(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ys]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&vl(e,r),Nl(e,t),e}(t,n,e.D,e.Ga());return fh(this,this.h.then(function(){if(ch(e).options.apiKey!=t.l)return r.reload()}).then(function(){return lh(e)&&t.uid==lh(e).uid?(Nl(lh(e),t),e.da(t)):(ah(e,r),Sl(r),e.da(r))}).then(function(){dh(e)}))},t.Ab=function(){var t=this;return fh(this,this.h.then(function(){return t.b&&zc(t.b.b),lh(t)?(ah(t,null),Jl(t.i).then(function(){dh(t)})):Ee()}))},t.Zc=function(){var t=this;return Zl(this.i,ch(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=lh(t)&&e){n=lh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Nl(lh(t),e),lh(t).I();(lh(t)||e)&&(ah(t,e),e&&(Sl(e),e.ha=t.D),t.b&&Ac(t.b,t),dh(t))}})},t.da=function(t){return Xl(this.i,t)},t.mc=function(){dh(this),this.da(lh(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return uh(e,Ee(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(lh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),fh(t,t.h.then(function(){!t.l&&K(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(hh(t)))}))}(this,function(){t.next(lh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return fh(this,this.h.then(function(){return lh(e)?lh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return uh(e,tu(e.a,Ka,{token:t}))}).then(function(t){var n=t.user;return Dl(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tu(n.a,$a,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tu(n.a,Ca,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return uh(e,t.ka(e.a))})},t.Sc=function(t){return Kr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=lh(t);if(e&&e.isAnonymous){var n=Jr({providerId:null,isNewUser:!1});return Jr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.zb()).then(function(e){var n=e.user;return Dl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return lh(this)&&lh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&lh(this)&&wl(lh(this))},t.Pc=function(t){var e=this;Q(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&lh(this)&&Il(lh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),fh(this,this.h.then(function(){e.l||K(e.s,t)&&t(hh(e))}))},t.removeAuthTokenListener=function(t){Y(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Yl("local"),t.a,this.ja),this.b&&(Rc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return fh(this,function(t,e){return tu(t,Oa,{identifier:e,continueUri:Nr()?lr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Do(t)},t.wb=function(t,e){var n=this;return fh(this,Ee().then(function(){var t=new Ai(e);if(!t.c)throw new k("argument-error",Ni+" must be true when sending sign in link to email");return Vi(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return fh(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return fh(this,this.a.Ra(t).then(function(t){return new ai(t)}))},t.jb=function(t){return fh(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return fh(this,Ee().then(function(){return void 0===e||pt(e)?{}:Vi(new Ai(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return fh(this,$c(this,t,e,w(this.$a,this)))},t.Vc=function(t,e){var n=this;return fh(this,Ee().then(function(){var r=e||lr(),i=Ro(t,r);if(!(r=Do(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.$a(i)}))},ph.prototype.render=function(){},ph.prototype.reset=function(){},ph.prototype.getResponse=function(){},ph.prototype.execute=function(){};var mh=null;function bh(t,e){return(e=vh(e))&&t.a[e]||null}function vh(t){return(t=void 0===t?1e12:t)?t.toString():null}function yh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():cn(this.f,"click",this.i)}function _h(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function wh(){}function Ih(){}gh.prototype.render=function(t,e){return this.a[this.b.toString()]=new yh(t,e),this.b++},gh.prototype.reset=function(t){var e=bh(this,t);t=vh(t),e&&t&&(e.delete(),delete this.a[t])},gh.prototype.getResponse=function(t){return(t=bh(this,t))?t.getResponse():null},gh.prototype.execute=function(t){(t=bh(this,t))&&t.execute()},yh.prototype.getResponse=function(){return _h(this),this.b},yh.prototype.execute=function(){_h(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},yh.prototype.delete=function(){_h(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Yr(wh,"FACTOR_ID","phone"),Ih.prototype.g=function(){return mh||(mh=new gh),Ee(mh)},Ih.prototype.c=function(){};var Ch=null;function Oh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Sh=new yt(Ct,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),kh=new Br(3e4,6e4);Oh.prototype.g=function(t){var e=this;return new _e(function(n,r){var i=setTimeout(function(){r(new k("network-request-failed"))},kh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete a[e.a]},Ee(qs(Et(Sh,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Oh.prototype.c=function(){this.b--};var Eh=null;function Th(t,e,n,r,i,o,s){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Ch||(Ch=new Ih),s=Ch):(Eh||(Eh=new Oh),s=Eh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Rh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Dh],!a.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ks(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[xh];this.a[xh]=function(t){if(Nh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,a);"function"==typeof e&&e(t)}};var l=this.a[Ah];this.a[Ah]=function(){if(Nh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ar(l,a);"function"==typeof t&&t()}}}var xh="callback",Ah="expired-callback",Rh="sitekey",Dh="size";function Nh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function jh(t,e){return t.h.push(e),e.oa(function(){$(t.h,e)}),e}function Ph(t){if(t.D)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function Mh(t,e,n){var i=!1;try{this.b=n||r.default.app()}catch(a){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.default.SDK_VERSION?Tr(r.default.SDK_VERSION,s):null,Th.call(this,n,t,e,function(){try{var t=o.b.auth().la()}catch(e){t=null}return t},s,D(T),i)}function Lh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Fh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Fh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(t=Th.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jh(this,Ee().then(function(){if(Nr()&&!wr())return vr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,tu(t.s,La,{})}).then(function(e){t.a[Rh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Ph(this);var t=this;return jh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Qt(s.name),'"'),s.type){o.push(' type="',Qt(s.type),'"');var a={};bt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Ph(this);var t=this;return jh(this,this.render().then(function(e){return new _e(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Ph(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ph(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},O(Mh,Th);var Fh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Uh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Vh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function qh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Bh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function zh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Qh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Hh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Wh(t){return g(t)&&"string"==typeof t.uid}function Gh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Kh(t,e){for(var n in e){var r=e[n].name;t[r]=Xh(r,t[n],e[n].j)}}function $h(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I(function(t){return this[t]},n),set:I(function(t,e,n,r){Lh(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Yh(t,e,n,r){t[e]=Xh(e,n,r)}function Xh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Lh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Kh(eh.prototype,{jb:{name:"applyActionCode",j:[Uh("code")]},Ra:{name:"checkActionCode",j:[Uh("code")]},nb:{name:"confirmPasswordReset",j:[Uh("code"),Uh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Uh("email"),Uh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Uh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Uh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Uh("email"),Gh(qh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Uh("email"),qh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Uh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Qh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Qh()]},Tc:{name:"signInWithCustomToken",j:[Uh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Uh("email"),Uh("password")]},Vc:{name:"signInWithEmailLink",j:[Uh("email"),Uh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Gh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gl)}},zh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Uh("url"),qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Uh("code")]}}),$h(eh.prototype,{lc:{name:"languageCode",kb:Gh(Uh(),zh(),"languageCode")},ti:{name:"tenantId",kb:Gh(Uh(),zh(),"tenantId")}}),(eh.Persistence=Yu).LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",Kh(gl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Vh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Vh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Qh()]},qb:{name:"linkWithCredential",j:[Qh()]},Dc:{name:"linkWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Qh()]},tb:{name:"reauthenticateWithCredential",j:[Qh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Gh(qh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},cd:{name:"unlink",j:[Uh("provider")]},Bb:{name:"updateEmail",j:[Uh("email")]},Cb:{name:"updatePassword",j:[Uh("password")]},ed:{name:"updatePhoneNumber",j:[Qh("phone")]},Db:{name:"updateProfile",j:[qh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Uh("email"),Gh(qh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]}}),Kh(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kh(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kh(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$h(Gc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Vh("appVerificationDisabledForTesting")}}),Kh(Kc.prototype,{confirm:{name:"confirm",j:[Uh("verificationCode")]}}),Yh(uo,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,xo,jo,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gh(Uh(),qh(),"json")]),Yh(Ao,"credential",function(t,e){return new To(t,e)},[Uh("email"),Uh("password")]),Kh(To.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Kh(_o.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(_o,"credential",wo,[Gh(Uh(),qh(),"token")]),Yh(Ao,"credentialWithLink",Ro,[Uh("email"),Uh("emailLink")]),Kh(Io.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Io,"credential",Co,[Gh(Uh(),qh(),"token")]),Kh(Oo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Oo,"credential",So,[Gh(Uh(),Gh(qh(),zh()),"idToken"),Gh(Uh(),zh(),"accessToken",!0)]),Kh(ko.prototype,{Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(ko,"credential",Eo,[Gh(Uh(),qh(),"token"),Uh("secret",!0)]),Kh(yo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},credential:{name:"credential",j:[Gh(Uh(),Gh(qh(),zh()),"optionsOrIdToken"),Gh(Uh(),zh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Kh(po.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Kh(lo.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(Mo,"credential",Lo,[Uh("verificationId"),Uh("verificationCode")]),Kh(Mo.prototype,{fb:{name:"verifyPhoneNumber",j:[Gh(Uh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Hh(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Hh(t.session,ao)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?Hh(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Kh(No.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Kh(k.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Kh(Wo.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Kh(Ho.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Kh(tl.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Kh(Xc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Kh(sl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Uh("displayName",!0)]},bd:{name:"unenroll",j:[Gh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Wh},Uh(),"multiFactorInfoIdentifier")]}}),Kh(Mh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yh(wi,"parseLink",xi,[Uh("link")]),Yh(wh,"assertion",function(t){return new il(t)},[Qh("phone")]),function(){if(void 0===r.default||!r.default.INTERNAL||!r.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ci,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ui,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:uo,Error:k};Yh(t,"EmailAuthProvider",Ao,[]),Yh(t,"FacebookAuthProvider",_o,[]),Yh(t,"GithubAuthProvider",Io,[]),Yh(t,"GoogleAuthProvider",Oo,[]),Yh(t,"TwitterAuthProvider",ko,[]),Yh(t,"OAuthProvider",yo,[Uh("providerId")]),Yh(t,"SAMLAuthProvider",vo,[Uh("providerId")]),Yh(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof eh)}}]),Yh(t,"RecaptchaVerifier",Mh,[Gh(Uh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.default.app.App)}}]),Yh(t,"ActionCodeURL",wi,[]),Yh(t,"PhoneMultiFactorGenerator",wh,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new eh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.5"),r.default.INTERNAL.extendNamespace({User:gl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new b(t,e))}}class b{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";n.r(e),n.d(e,"firebase",function(){return _});var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.deepCopy)(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.contains)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.contains)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.deepExtend)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.__assign)(Object(o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.deepExtend)(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),b=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),y.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",function(t){return new b(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(_),e.default=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Yb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=Object(r.Ib)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Yb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:b,token:t,providedIn:"root"}),t})();function b(t){const e=Object(r.Yb)(s).location;return new y(Object(r.Yb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let y=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(m),r.Yb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Ib)({factory:I,token:t,providedIn:"root"}),t})();function I(){return new w(Object(r.Yb)(m),Object(r.Yb)(a))}function C(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),S=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),k=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),E=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),T=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function x(t,e,n){const i=Object(r.jb)(t),o=F([i[r.ab.DayPeriodsFormat],i[r.ab.DayPeriodsStandalone]],e);return F(o,n)}function A(t,e,n){const i=Object(r.jb)(t),o=F([i[r.ab.DaysFormat],i[r.ab.DaysStandalone]],e);return F(o,n)}function R(t,e,n){const i=Object(r.jb)(t),o=F([i[r.ab.MonthsFormat],i[r.ab.MonthsStandalone]],e);return F(o,n)}function D(t,e){return F(Object(r.jb)(t)[r.ab.DateFormat],e)}function N(t,e){return F(Object(r.jb)(t)[r.ab.TimeFormat],e)}function j(t,e){return F(Object(r.jb)(t)[r.ab.DateTimeFormat],e)}function P(t,e){const n=Object(r.jb)(t),i=n[r.ab.NumberSymbols][e];if(void 0===i){if(e===T.CurrencyDecimal)return n[r.ab.NumberSymbols][T.Decimal];if(e===T.CurrencyGroup)return n[r.ab.NumberSymbols][T.Group]}return i}const M=r.mb;function L(t){if(!t[r.ab.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.ab.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function F(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function U(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const V=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,q={},B=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var z=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),Q=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),H=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function W(t,e,n,r){let i=function(t){if(ot(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return G(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(V))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!ot(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=K(n,e)||e;let o,s=[];for(;e;){if(o=B.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=it(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(it(e,r)-r))}(i,r));let u="";return s.forEach(t=>{const e=function(t){if(rt[t])return rt[t];let e;switch(t){case"G":case"GG":case"GGG":e=J(H.Eras,k.Abbreviated);break;case"GGGG":e=J(H.Eras,k.Wide);break;case"GGGGG":e=J(H.Eras,k.Narrow);break;case"y":e=X(Q.FullYear,1,0,!1,!0);break;case"yy":e=X(Q.FullYear,2,0,!0,!0);break;case"yyy":e=X(Q.FullYear,3,0,!1,!0);break;case"yyyy":e=X(Q.FullYear,4,0,!1,!0);break;case"Y":e=nt(1);break;case"YY":e=nt(2,!0);break;case"YYY":e=nt(3);break;case"YYYY":e=nt(4);break;case"M":case"L":e=X(Q.Month,1,1);break;case"MM":case"LL":e=X(Q.Month,2,1);break;case"MMM":e=J(H.Months,k.Abbreviated);break;case"MMMM":e=J(H.Months,k.Wide);break;case"MMMMM":e=J(H.Months,k.Narrow);break;case"LLL":e=J(H.Months,k.Abbreviated,S.Standalone);break;case"LLLL":e=J(H.Months,k.Wide,S.Standalone);break;case"LLLLL":e=J(H.Months,k.Narrow,S.Standalone);break;case"w":e=et(1);break;case"ww":e=et(2);break;case"W":e=et(1,!0);break;case"d":e=X(Q.Date,1);break;case"dd":e=X(Q.Date,2);break;case"E":case"EE":case"EEE":e=J(H.Days,k.Abbreviated);break;case"EEEE":e=J(H.Days,k.Wide);break;case"EEEEE":e=J(H.Days,k.Narrow);break;case"EEEEEE":e=J(H.Days,k.Short);break;case"a":case"aa":case"aaa":e=J(H.DayPeriods,k.Abbreviated);break;case"aaaa":e=J(H.DayPeriods,k.Wide);break;case"aaaaa":e=J(H.DayPeriods,k.Narrow);break;case"b":case"bb":case"bbb":e=J(H.DayPeriods,k.Abbreviated,S.Standalone,!0);break;case"bbbb":e=J(H.DayPeriods,k.Wide,S.Standalone,!0);break;case"bbbbb":e=J(H.DayPeriods,k.Narrow,S.Standalone,!0);break;case"B":case"BB":case"BBB":e=J(H.DayPeriods,k.Abbreviated,S.Format,!0);break;case"BBBB":e=J(H.DayPeriods,k.Wide,S.Format,!0);break;case"BBBBB":e=J(H.DayPeriods,k.Narrow,S.Format,!0);break;case"h":e=X(Q.Hours,1,-12);break;case"hh":e=X(Q.Hours,2,-12);break;case"H":e=X(Q.Hours,1);break;case"HH":e=X(Q.Hours,2);break;case"m":e=X(Q.Minutes,1);break;case"mm":e=X(Q.Minutes,2);break;case"s":e=X(Q.Seconds,1);break;case"ss":e=X(Q.Seconds,2);break;case"S":e=X(Q.FractionalSeconds,1);break;case"SS":e=X(Q.FractionalSeconds,2);break;case"SSS":e=X(Q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Z(z.Short);break;case"ZZZZZ":e=Z(z.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Z(z.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Z(z.Long);break;default:return null}return rt[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function G(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function K(t,e){const n=function(t){return Object(r.jb)(t)[r.ab.LocaleId]}(t);if(q[n]=q[n]||{},q[n][e])return q[n][e];let i="";switch(e){case"shortDate":i=D(t,E.Short);break;case"mediumDate":i=D(t,E.Medium);break;case"longDate":i=D(t,E.Long);break;case"fullDate":i=D(t,E.Full);break;case"shortTime":i=N(t,E.Short);break;case"mediumTime":i=N(t,E.Medium);break;case"longTime":i=N(t,E.Long);break;case"fullTime":i=N(t,E.Full);break;case"short":const e=K(t,"shortTime"),n=K(t,"shortDate");i=$(j(t,E.Short),[e,n]);break;case"medium":const r=K(t,"mediumTime"),o=K(t,"mediumDate");i=$(j(t,E.Medium),[r,o]);break;case"long":const s=K(t,"longTime"),a=K(t,"longDate");i=$(j(t,E.Long),[s,a]);break;case"full":const u=K(t,"fullTime"),c=K(t,"fullDate");i=$(j(t,E.Full),[u,c])}return i&&(q[n][e]=i),i}function $(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function Y(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function X(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case Q.FullYear:return e.getFullYear();case Q.Month:return e.getMonth();case Q.Date:return e.getDate();case Q.Hours:return e.getHours();case Q.Minutes:return e.getMinutes();case Q.Seconds:return e.getSeconds();case Q.FractionalSeconds:return e.getMilliseconds();case Q.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===Q.Hours)0===a&&-12===n&&(a=12);else if(t===Q.FractionalSeconds)return u=e,Y(a,3).substr(0,u);var u;const c=P(s,T.MinusSign);return Y(a,e,c,r,i)}}function J(t,e,n=S.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case H.Months:return R(e,o,i)[t.getMonth()];case H.Days:return A(e,o,i)[t.getDay()];case H.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.jb)(t);return L(e),(e[r.ab.ExtraData][2]||[]).map(t=>"string"==typeof t?U(t):[U(t[0]),U(t[1])])}(e),n=function(t,e,n){const i=Object(r.jb)(t);L(i);const o=F([i[r.ab.ExtraData][0],i[r.ab.ExtraData][1]],e)||[];return F(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==s)return n[s]}return x(e,o,i)[a<12?0:1];case H.Eras:return function(t,e){return F(Object(r.jb)(t)[r.ab.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,t,e,n,i)}}function Z(t){return function(e,n,r){const i=-1*r,o=P(n,T.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case z.Short:return(i>=0?"+":"")+Y(s,2,o)+Y(Math.abs(i%60),2,o);case z.ShortGMT:return"GMT"+(i>=0?"+":"")+Y(s,1,o);case z.Long:return"GMT"+(i>=0?"+":"")+Y(s,2,o)+":"+Y(Math.abs(i%60),2,o);case z.Extended:return 0===r?"Z":(i>=0?"+":"")+Y(s,2,o)+":"+Y(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function tt(t){return G(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function et(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=tt(n),e=function(t){const e=G(t,0,1).getDay();return G(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return Y(i,t,P(r,T.MinusSign))}}function nt(t,e=!1){return function(n,r){return Y(tt(n).getFullYear(),t,P(r,T.MinusSign),e)}}const rt={};function it(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function ot(t){return t instanceof Date&&!isNaN(t.valueOf())}class st{}let at=(()=>{class t extends st{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(M(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class ut{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ct=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ut(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new lt(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new lt(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.Q),r.Mb(r.L),r.Mb(r.t))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class lt{constructor(t,e){this.record=t,this.view=e}}let ht=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new dt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ft("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ft("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.Q),r.Mb(r.L))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class dt{constructor(){this.$implicit=null,this.ngIf=null}}function ft(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let pt=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.Q))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[r.yb]}),t})(),gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[{provide:st,useClass:at}]}),t})();function mt(t){return"server"===t}let bt=(()=>{class t{}return t.\u0275prov=Object(r.Ib)({token:t,providedIn:"root",factory:()=>new vt(Object(r.Yb)(s),window)}),t})();class vt{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=yt(this.window.history)||yt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function yt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class _t extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new _t,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=It||(It=document.querySelector("base"),It)?It.getAttribute("href"):null;return null==e?null:(n=e,wt||(wt=document.createElement("a")),wt.setAttribute("href",n),"/"===wt.pathname.charAt(0)?wt.pathname:"/"+wt.pathname);var n}resetBaseElement(){It=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let wt,It=null;const Ct=new r.r("TRANSITION_ID"),Ot=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Ct,s,r.s],multi:!0}];class St{static init(){Object(r.X)(new St)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const kt=new r.r("EventManagerPlugins");let Et=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(kt),r.Yb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class Tt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let xt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),At=(()=>{class t extends xt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Rt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Dt=/%COMP%/g;function Nt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Nt(t,i,n):(i=i.replace(Dt,t),n.push(i))}return n}function jt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Pt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Mt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Lt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new Ft(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Nt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Et),r.Yb(At),r.Yb(r.c))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class Mt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Rt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Rt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Rt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,jt(n)):this.eventManager.addEventListener(t,e,jt(n))}}class Lt extends Mt{constructor(t,e,n,r){super(t),this.component=n;const i=Nt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Dt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Dt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Ft extends Mt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Nt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ut=(()=>{class t extends Tt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Vt=["alt","control","meta","shift"],qt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},zt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Qt=(()=>{class t extends Tt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Vt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Bt.hasOwnProperty(e)&&(e=Bt[e]))}return qt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Vt.forEach(r=>{r!=n&&(0,zt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Ht=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){_t.makeCurrent(),St.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],Wt=Object(r.S)(r.W,"browser",Ht),Gt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:kt,useClass:Ut,multi:!0,deps:[s,r.A,r.C]},{provide:kt,useClass:Qt,multi:!0,deps:[s]},[],{provide:Pt,useClass:Pt,deps:[Et,At,r.c]},{provide:r.F,useExisting:Pt},{provide:xt,useExisting:At},{provide:At,useClass:At,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:Et,useClass:Et,deps:[kt,r.A]},[]];let Kt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Ct,useExisting:r.c},Ot]}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(t,12))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:Gt,imports:[gt,r.f]}),t})();"undefined"!=typeof window&&window;var $t=n("XNiG"),Yt=n("LRne"),Xt=n("HDdC"),Jt=n("Cfvw"),Zt=n("VRyK"),te=n("pxpQ"),ee=n("lJxs"),ne=n("zx2A");function re(t,e){return"function"==typeof e?n=>n.pipe(re((n,r)=>Object(Jt.a)(t(n,r)).pipe(Object(ee.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ie(t))}class ie{constructor(t){this.project=t}call(t,e){return e.subscribe(new oe(t,this.project))}}class oe extends ne.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new ne.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(ne.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var se=n("qgXg"),ae=n("quSY"),ue=n("9ppp"),ce=n("Ylt2");class le extends $t.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new he(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new ue.a;if(this.isStopped||this.hasError?o=ae.a.EMPTY:(this.observers.push(t),o=new ce.a(this,t)),r&&t.add(t=new te.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||se.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class he{constructor(t,e){this.time=t,this.value=e}}function de(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new le(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const fe=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var pe=n("7o/Q");function ge(t,e){return function(n){return n.lift(new me(t,e))}}class me{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new be(t,this.predicate,this.thisArg))}}class be extends pe.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const ve=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var ye=n("EY2u");function _e(t){return e=>0===t?Object(ye.b)():e.lift(new we(t))}class we{constructor(t){if(this.total=t,this.total<0)throw new ve}call(t,e){return e.subscribe(new Ie(t,this.total))}}class Ie extends pe.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ce(t=null){return e=>e.lift(new Oe(t))}class Oe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Se(t,this.defaultValue))}}class Se extends pe.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function ke(t=xe){return e=>e.lift(new Ee(t))}class Ee{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Te(t,this.errorFactory))}}class Te extends pe.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(um){t=um}this.destination.error(t)}}}function xe(){return new fe}var Ae=n("SpAZ");function Re(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ge((e,n)=>t(e,n,r)):Ae.a,_e(1),n?Ce(e):ke(()=>new fe))}function De(t,e){return e?re(()=>t,e):re(()=>t)}var Ne=n("tf+s"),je=n("spgP");const Pe=new r.r("angularfire2.auth.use-emulator"),Me=new r.r("angularfire2.auth.settings"),Le=new r.r("angularfire2.auth.tenant-id"),Fe=new r.r("angularfire2.auth.langugage-code"),Ue=new r.r("angularfire2.auth.use-device-language"),Ve=new r.r("angularfire.auth.persistence");let qe=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new je.d(i),d=Object(je.h)(h),f=new $t.a,p=Object(Yt.a)(void 0).pipe(Object(te.b)(h.outsideAngular),re(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(ee.a)(()=>Object(je.g)(t,i,e)),Object(ee.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(je.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),de({bufferSize:1,refCount:!1}));if(mt(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Yt.a)(null);else{p.pipe(Re()).subscribe();const t=p.pipe(re(t=>t.getRedirectResult().then(t=>t,()=>null)),d,de({bufferSize:1,refCount:!1})),e=t=>new Xt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(re(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(re(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(De(n),Object(Ne.a)(h.outsideAngular),Object(te.b)(h.insideAngular)),this.user=t.pipe(De(r),Object(Ne.a)(h.outsideAngular),Object(te.b)(h.insideAngular)),this.idToken=this.user.pipe(re(t=>t?Object(Jt.a)(t.getIdToken()):Object(Yt.a)(null))),this.idTokenResult=this.user.pipe(re(t=>t?Object(Jt.a)(t.getIdTokenResult()):Object(Yt.a)(null))),this.credential=Object(Zt.a)(t,f,this.authState.pipe(ge(t=>!t))).pipe(Object(ee.a)(t=>(null==t?void 0:t.user)?t:null),Object(Ne.a)(h.outsideAngular),Object(te.b)(h.insideAngular))}return Object(je.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(je.c),r.Yb(je.b,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Pe,8),r.Yb(Me,8),r.Yb(Le,8),r.Yb(Fe,8),r.Yb(Ue,8),r.Yb(Ve,8))},t.\u0275prov=r.Ib({factory:function(){return new t(r.Yb(je.c),r.Yb(je.b,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Pe,8),r.Yb(Me,8),r.Yb(Le,8),r.Yb(Fe,8),r.Yb(Ue,8),r.Yb(Ve,8))},token:t,providedIn:"any"}),t})();Object(je.e)(qe,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Be=n("mrSG");class ze{constructor(t,e,n,r,i,o,s){this.id=t,this.email=e,this.password=n,this.firstName=r,this.lastName=i,this.birthday=o,this.image=s}getFullName(){return this.firstName+""+this.lastName}}var Qe=n("zIRd"),He=(n("t6oF"),n("6Uf2"),n("qOnz")),We=n("q/0M"),Ge=function(t,e){return(Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ke(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var $e,Ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xe=Xe||{},Je=Ye||self;function Ze(){}function tn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function en(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var nn="closure_uid_"+(1e9*Math.random()>>>0),rn=0;function on(t,e,n){return t.call.apply(t.bind,arguments)}function sn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function an(t,e,n){return(an=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?on:sn).apply(null,arguments)}function un(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function cn(){return Date.now()}function ln(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function hn(){this.j=this.j,this.i=this.i}hn.prototype.j=!1,hn.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,nn)&&t[nn]||(t[nn]=++rn)}(this)},hn.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var dn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},fn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function pn(t){return Array.prototype.concat.apply([],arguments)}function gn(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function mn(t){return/^[\s\xa0]*$/.test(t)}var bn,vn=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function yn(t,e){return-1!=t.indexOf(e)}function _n(t,e){return t<e?-1:t>e?1:0}t:{var wn=Je.navigator;if(wn){var In=wn.userAgent;if(In){bn=In;break t}}bn=""}function Cn(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function On(t){var e={};for(var n in t)e[n]=t[n];return e}var Sn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kn(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Sn.length;o++)n=Sn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function En(t){return En[" "](t),t}En[" "]=Ze;var Tn,xn,An=yn(bn,"Opera"),Rn=yn(bn,"Trident")||yn(bn,"MSIE"),Dn=yn(bn,"Edge"),Nn=Dn||Rn,jn=yn(bn,"Gecko")&&!(yn(bn.toLowerCase(),"webkit")&&!yn(bn,"Edge"))&&!(yn(bn,"Trident")||yn(bn,"MSIE"))&&!yn(bn,"Edge"),Pn=yn(bn.toLowerCase(),"webkit")&&!yn(bn,"Edge");function Mn(){var t=Je.document;return t?t.documentMode:void 0}t:{var Ln="",Fn=(xn=bn,jn?/rv:([^\);]+)(\)|;)/.exec(xn):Dn?/Edge\/([\d\.]+)/.exec(xn):Rn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(xn):Pn?/WebKit\/(\S+)/.exec(xn):An?/(?:Version)[ \/]?(\S+)/.exec(xn):void 0);if(Fn&&(Ln=Fn?Fn[1]:""),Rn){var Un=Mn();if(null!=Un&&Un>parseFloat(Ln)){Tn=String(Un);break t}}Tn=Ln}var Vn={};function qn(t){return function(t,e){var n=Vn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=vn(String(Tn)).split("."),r=vn(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=_n(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||_n(0==s[2].length,0==a[2].length)||_n(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Bn=Je.document&&Rn&&(Mn()||parseInt(Tn,10))||void 0,zn=!Rn||9<=Number(Bn),Qn=Rn&&!qn("9"),Hn=function(){if(!Je.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Je.addEventListener("test",Ze,e),Je.removeEventListener("test",Ze,e)}catch(n){}return t}();function Wn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Gn(t,e){if(Wn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(jn){t:{try{En(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Kn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Wn.prototype.b=function(){this.defaultPrevented=!0},ln(Gn,Wn);var Kn={2:"touch",3:"pen",4:"mouse"};Gn.prototype.b=function(){Gn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var $n="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Xn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Yn,this.Y=this.Z=!1}function Jn(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Zn(t){this.src=t,this.a={},this.b=0}function tr(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=dn(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Jn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function er(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Zn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=er(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Xn(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var nr="closure_lm_"+(1e6*Math.random()|0),rr={};function ir(t,e,n,r,i){if(r&&r.once)return sr(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ir(t,e[o],n,r,i);return null}return n=pr(n),t&&t[$n]?t.va(e,n,en(r)?!!r.capture:!!r,i):or(t,e,n,!1,r,i)}function or(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=en(i)?!!i.capture:!!i;if(s&&!zn)return null;var a=dr(t);if(a||(t[nr]=a=new Zn(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=hr,e=zn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Hn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(cr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function sr(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)sr(t,e[o],n,r,i);return null}return n=pr(n),t&&t[$n]?t.wa(e,n,en(r)?!!r.capture:!!r,i):or(t,e,n,!0,r,i)}function ar(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ar(t,e[o],n,r,i);else r=en(r)?!!r.capture:!!r,n=pr(n),t&&t[$n]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=er(o=t.a[e],n,r,i))&&(Jn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=dr(t))&&(e=t.a[e.toString()],t=-1,e&&(t=er(e,n,r,i)),(n=-1<t?e[t]:null)&&ur(n))}function ur(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[$n])tr(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(cr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=dr(e))?(tr(n,t),0==n.b&&(n.src=null,e[nr]=null)):Jn(t)}}}function cr(t){return t in rr?rr[t]:rr[t]="on"+t}function lr(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ur(t),n.call(r,e)}function hr(t,e){if(t.Y)return!0;if(!zn){if(!e)t:{e=["window","event"];for(var n=Je,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return lr(t,e=new Gn(e,this))}return lr(t,new Gn(e,this))}function dr(t){return(t=t[nr])instanceof Zn?t:null}var fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function pr(t){return"function"==typeof t?t:(t[fr]||(t[fr]=function(e){return t.handleEvent(e)}),t[fr])}function gr(){hn.call(this),this.c=new Zn(this),this.J=this,this.C=null}function mr(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Wn(e,t);else if(e instanceof Wn)e.target=e.target||t;else{var i=e;kn(e=new Wn(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=br(s,r,!0,e)&&i}if(i=br(s=e.a=t,r,!0,e)&&i,i=br(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=br(s=e.a=n[o],r,!1,e)&&i}function br(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&tr(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ln(gr,hn),gr.prototype[$n]=!0,($e=gr.prototype).addEventListener=function(t,e,n,r){ir(this,t,e,n,r)},$e.removeEventListener=function(t,e,n,r){ar(this,t,e,n,r)},$e.G=function(){if(gr.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Jn(n[r]);delete e.a[t],e.b--}}this.C=null},$e.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},$e.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var vr=Je.JSON.stringify;function yr(){this.b=this.a=null}var _r,wr=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Cr},function(t){t.reset()});function Ir(){var t=Er,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Cr(){this.next=this.b=this.a=null}function Or(t){Je.setTimeout(function(){throw t},0)}function Sr(t,e){_r||function(){var t=Je.Promise.resolve(void 0);_r=function(){t.then(Tr)}}(),kr||(_r(),kr=!0),Er.add(t,e)}yr.prototype.add=function(t,e){var n=wr.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Cr.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Cr.prototype.reset=function(){this.next=this.b=this.a=null};var kr=!1,Er=new yr;function Tr(){for(var t;t=Ir();){try{t.a.call(t.b)}catch(n){Or(n)}var e=wr;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}kr=!1}function xr(t,e){gr.call(this),this.b=t||1,this.a=e||Je,this.f=an(this.Za,this),this.g=cn()}function Ar(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Rr(t,e,n){if("function"==typeof t)n&&(t=an(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=an(t.handleEvent,t)}return 2147483647<Number(e)?-1:Je.setTimeout(t,e||0)}function Dr(t){t.a=Rr(function(){t.a=null,t.c&&(t.c=!1,Dr(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ln(xr,gr),($e=xr.prototype).aa=!1,$e.M=null,$e.Za=function(){if(this.aa){var t=cn()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),mr(this,"tick"),this.aa&&(Ar(this),this.start()))}},$e.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=cn())},$e.G=function(){xr.X.G.call(this),Ar(this),delete this.a};var Nr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ge(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Dr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Je.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(hn);function jr(t){hn.call(this),this.b=t,this.a={}}ln(jr,hn);var Pr=[];function Mr(t,e,n,r){Array.isArray(n)||(n&&(Pr[0]=n.toString()),n=Pr);for(var i=0;i<n.length;i++){var o=ir(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Lr(t){Cn(t.a,function(t,e){this.a.hasOwnProperty(e)&&ur(t)},t),t.a={}}function Fr(){this.a=!0}function Ur(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return vr(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}jr.prototype.G=function(){jr.X.G.call(this),Lr(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fr.prototype.info=function(){};var Vr={},qr=null;function Br(){return qr=qr||new gr}function zr(t){Wn.call(this,Vr.Fa,t)}function Qr(t){var e=Br();mr(e,new zr(e,t))}function Hr(t,e){Wn.call(this,Vr.STAT_EVENT,t),this.stat=e}function Wr(t){var e=Br();mr(e,new Hr(e,t))}function Gr(t){Wn.call(this,Vr.Ga,t)}function Kr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Je.setTimeout(function(){t()},e)}Vr.Fa="serverreachability",ln(zr,Wn),Vr.STAT_EVENT="statevent",ln(Hr,Wn),Vr.Ga="timingevent",ln(Gr,Wn);var $r={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Yr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Xr(){}function Jr(){}Xr.prototype.a=null;var Zr,ti={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ei(){Wn.call(this,"d")}function ni(){Wn.call(this,"c")}function ri(){}function ii(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new jr(this),this.P=oi,this.R=new xr(t=Nn?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ln(ei,Wn),ln(ni,Wn),ln(ri,Xr),Zr=new ri;var oi=45e3,si={},ai={};function ui(t,e,n){t.H=1,t.i=Ai(Oi(e)),t.j=n,t.I=!0,ci(t,null)}function ci(t,e){t.u=cn(),di(t),t.l=Oi(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),zi(n.b,"t",r),t.D=0,t.a=Fo(t.g,t.g.C?e:null),0<t.O&&(t.F=new Nr(an(t.Ca,t,t.a),t.O)),Mr(t.J,t.a,"readystatechange",t.Xa),e=t.B?On(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Qr(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function li(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=hi(t,n);if(i==ai){4==e&&(t.h=4,Wr(14),r=!1),Ur(t.c,t.f,null,"[Incomplete Response]");break}if(i==si){t.h=4,Wr(15),Ur(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ur(t.c,t.f,i,null),bi(t,i)}4==e&&0==n.length&&(t.h=1,Wr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ao(e),e.F=!0,Wr(11))):(Ur(t.c,t.f,n,"[Invalid Chunked Response]"),mi(t),gi(t))}function hi(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ai:(n=Number(e.substring(n,r)),isNaN(n)?si:(r+=1)+n>e.length?ai:(e=e.substr(r,n),t.D=r+n,e))}function di(t){t.T=cn()+t.P,fi(t,t.P)}function fi(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Kr(an(t.Va,t),e)}function pi(t){t.o&&(Je.clearTimeout(t.o),t.o=null)}function gi(t){0==t.g.v||t.A||No(t.g,t)}function mi(t){pi(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ar(t.R),Lr(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function bi(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Yi(n.b,t)))if(n.I=t.N,!t.C&&Yi(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Sg){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Do(n),wo(n)}xo(n),Wr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Kr(an(n.Sa,n),6e3));if(1>=$i(n.b)&&n.ea){try{n.ea()}catch(Sg){}n.ea=void 0}}else Po(n,11)}else if((t.C||n.a==t)&&Do(n),!mn(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(yn(l,"spdy")||yn(l,"quic")||yn(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Xi(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,xi(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=cn()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Lo(u,u.C?u.ga:null,u.fa),f.C){Ji(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(pi(p),di(p)),u.a=f}else To(u);0<n.g.length&&Oo(n)}else"stop"!=i[0]&&"close"!=i[0]||Po(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Po(n,7):_o(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Qr(4)}catch(Sg){}}function vi(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(tn(t)||"string"==typeof t)fn(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(tn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(tn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function yi(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof yi)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function _i(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];wi(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)wi(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function wi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}($e=ii.prototype).setTimeout=function(t){this.P=t},$e.Xa=function(t){t=t.target;var e=this.F;e&&3==mo(t)?e.f():this.Ca(t)},$e.Ca=function(t){try{if(t==this.a)t:{var e=mo(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Nn&&!this.a.$())){this.A||4!=e||7==n||Qr(8==n||0>=r?3:2),pi(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mn(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Wr(12),mi(this),gi(this);break t}Ur(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,bi(this,u)}this.I?(li(this,e,o),Nn&&this.b&&3==e&&(Mr(this.J,this.R,"tick",this.Wa),this.R.start())):(Ur(this.c,this.f,o,null),bi(this,o)),4==e&&mi(this),this.b&&!this.A&&(4==e?No(this.g,this):(this.b=!1,di(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Wr(12)):(this.h=0,Wr(13)),mi(this),gi(this)}}}catch(c){}},$e.Wa=function(){if(this.a){var t=mo(this.a),e=this.a.$();this.D<e.length&&(pi(this),li(this,t,e),this.b&&4!=t&&di(this))}},$e.cancel=function(){this.A=!0,mi(this)},$e.Va=function(){this.o=null;var t=cn();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Qr(3),Wr(17)),mi(this),this.h=2,gi(this)):fi(this,this.T-t)},($e=yi.prototype).K=function(){_i(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},$e.L=function(){return _i(this),this.a.concat()},$e.get=function(t,e){return wi(this.b,t)?this.b[t]:e},$e.set=function(t,e){wi(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},$e.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ii=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ci(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ci){this.a=void 0!==e?e:t.a,Si(this,t.f),this.j=t.j,ki(this,t.c),Ei(this,t.h),this.g=t.g,e=t.b;var n=new Ui;n.c=e.c,e.a&&(n.a=new yi(e.a),n.b=e.b),Ti(this,n),this.i=t.i}else t&&(n=String(t).match(Ii))?(this.a=!!e,Si(this,n[1]||"",!0),this.j=Ri(n[2]||""),ki(this,n[3]||"",!0),Ei(this,n[4]),this.g=Ri(n[5]||"",!0),Ti(this,n[6]||"",!0),this.i=Ri(n[7]||"")):(this.a=!!e,this.b=new Ui(null,this.a))}function Oi(t){return new Ci(t)}function Si(t,e,n){t.f=n?Ri(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ki(t,e,n){t.c=n?Ri(e,!0):e}function Ei(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ti(t,e,n){e instanceof Ui?(t.b=e,function(t,e){e&&!t.f&&(Vi(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(qi(this,e),zi(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Di(e,Li)),t.b=new Ui(e,t.a))}function xi(t,e,n){t.b.set(e,n)}function Ai(t){return xi(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^cn()).toString(36)),t}function Ri(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Di(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ni),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ni(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ci.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Di(e,ji,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Di(e,ji,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Di(n,"/"==n.charAt(0)?Mi:Pi,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Di(n,Fi)),t.join("")};var ji=/[#\/\?@]/g,Pi=/[#\?:]/g,Mi=/[#\?]/g,Li=/[#\?@]/g,Fi=/#/g;function Ui(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Vi(t){t.a||(t.a=new yi,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function qi(t,e){Vi(t),e=Qi(t,e),wi(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,wi((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&_i(t)))}function Bi(t,e){return Vi(t),e=Qi(t,e),wi(t.a.b,e)}function zi(t,e,n){qi(t,e),0<n.length&&(t.c=null,t.a.set(Qi(t,e),gn(n)),t.b+=n.length)}function Qi(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}($e=Ui.prototype).add=function(t,e){Vi(this),this.c=null,t=Qi(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},$e.forEach=function(t,e){Vi(this),this.a.forEach(function(n,r){fn(n,function(n){t.call(e,n,r,this)},this)},this)},$e.L=function(){Vi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},$e.K=function(t){Vi(this);var e=[];if("string"==typeof t)Bi(this,t)&&(e=pn(e,this.a.get(Qi(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=pn(e,t[n])}return e},$e.set=function(t,e){return Vi(this),this.c=null,Bi(this,t=Qi(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},$e.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},$e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Hi=function(){return function(t,e){this.b=t,this.a=e}}();function Wi(t){this.g=t||Gi,t=Je.PerformanceNavigationTiming?0<(t=Je.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Je.ia&&Je.ia.ya&&Je.ia.ya()&&Je.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Gi=10;function Ki(t){return!!t.b||!!t.a&&t.a.size>=t.f}function $i(t){return t.b?1:t.a?t.a.size:0}function Yi(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Xi(t,e){t.a?t.a.add(e):t.b=e}function Ji(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Zi(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ke(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return gn(t.c)}function to(){}function eo(){this.a=new to}function no(t,e,n){var r=n||"";try{vi(t,function(t,n){var i=t;en(t)&&(i=vr(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(um){throw e.push(r+"type="+encodeURIComponent("_badmap")),um}}function ro(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Wi.prototype.cancel=function(){var t,e;if(this.c=Zi(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ke(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},to.prototype.stringify=function(t){return Je.JSON.stringify(t,void 0)},to.prototype.parse=function(t){return Je.JSON.parse(t,void 0)};var io=Je.JSON.parse;function oo(t){gr.call(this),this.headers=new yi,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=so,this.D=this.F=!1}ln(oo,gr);var so="",ao=/^https?$/i,uo=["POST","PUT"];function co(t){return"content-type"==t.toLowerCase()}function lo(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ho(t),po(t)}function ho(t){t.u||(t.u=!0,mr(t,"complete"),mr(t,"error"))}function fo(t){if(t.b&&void 0!==Xe&&(!t.s[1]||4!=mo(t)||2!=t.W()))if(t.l&&4==mo(t))Rr(t.za,0,t);else if(mr(t,"readystatechange"),4==mo(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ii)[1]||null;if(!o&&Je.self&&Je.self.location){var s=Je.self.location.protocol;o=s.substr(0,s.length-1)}i=!ao.test(o?o.toLowerCase():"")}e=i}if(e)mr(t,"complete"),mr(t,"success");else{t.h=6;try{var a=2<mo(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",ho(t)}}finally{po(t)}}}function po(t,e){if(t.a){go(t);var n=t.a,r=t.s[0]?Ze:null;t.a=null,t.s=null,e||mr(t,"ready");try{n.onreadystatechange=r}catch(um){}}}function go(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Je.clearTimeout(t.m),t.m=null)}function mo(t){return t.a?t.a.readyState:0}function bo(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Cn(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):xi(t,e,n))}function vo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function yo(t){this.pa=0,this.g=[],this.c=new Fr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=vo("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=vo("baseRetryDelayMs",5e3,t),this.Ra=vo("retryDelaySeedMs",1e4,t),this.Ma=vo("forwardChannelMaxRetries",2,t),this.ma=vo("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Wi(t&&t.concurrentRequestLimit),this.ka=new eo,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function _o(t){if(Io(t),3==t.v){var e=t.R++,n=Oi(t.B);xi(n,"SID",t.J),xi(n,"RID",e),xi(n,"TYPE","terminate"),ko(t,n),(e=new ii(t,t.c,e,void 0)).H=2,e.i=Ai(Oi(n)),n=!1,Je.navigator&&Je.navigator.sendBeacon&&(n=Je.navigator.sendBeacon(e.i.toString(),"")),!n&&Je.Image&&((new Image).src=e.i,n=!0),n||(e.a=Fo(e.g,null),e.a.ba(e.i)),e.u=cn(),di(e)}Mo(t)}function wo(t){t.a&&(Ao(t),t.a.cancel(),t.a=null)}function Io(t){wo(t),t.j&&(Je.clearTimeout(t.j),t.j=null),Do(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Je.clearTimeout(t.h),t.h=null)}function Co(t,e){t.g.push(new Hi(t.Oa++,e)),3==t.v&&Oo(t)}function Oo(t){Ki(t.b)||t.h||(t.h=!0,Sr(t.Ba,t),t.u=0)}function So(t,e){var n;n=e?e.f:t.R++;var r=Oi(t.B);xi(r,"SID",t.J),xi(r,"RID",n),xi(r,"AID",t.P),ko(t,r),t.i&&t.l&&bo(r,t.i,t.l),n=new ii(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Eo(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Xi(t.b,n),ui(n,r,e)}function ko(t,e){t.f&&vi({},function(t,n){xi(e,n,t)})}function Eo(t,e,n){n=Math.min(t.g.length,n);var r=t.f?an(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{no(l,s,"req"+c+"_")}catch(ps){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function To(t){t.a||t.j||(t.T=1,Sr(t.Aa,t),t.o=0)}function xo(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Kr(an(t.Aa,t),jo(t,t.o)),t.o++,0))}function Ao(t){null!=t.s&&(Je.clearTimeout(t.s),t.s=null)}function Ro(t){t.a=new ii(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Oi(t.la);xi(e,"RID","rpc"),xi(e,"SID",t.J),xi(e,"CI",t.H?"0":"1"),xi(e,"AID",t.P),ko(t,e),xi(e,"TYPE","xmlhttp"),t.i&&t.l&&bo(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ai(Oi(e)),n.j=null,n.I=!0,ci(n,t)}function Do(t){null!=t.m&&(Je.clearTimeout(t.m),t.m=null)}function No(t,e){var n=null;if(t.a==e){Do(t),Ao(t),t.a=null;var r=2}else{if(!Yi(t.b,e))return;n=e.s,Ji(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=cn()-e.u;var i=t.u;mr(r=Br(),new Gr(r,n,e,i)),Oo(t)}else To(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!($i(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Kr(an(t.Ba,t,e),jo(t,t.u)),t.u++,0)))}(t,e)||2==r&&xo(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Po(t,5);break;case 4:Po(t,10);break;case 3:Po(t,6);break;default:Po(t,2)}}function jo(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Po(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=an(t.Ya,t);n||(n=new Ci("//www.google.com/images/cleardot.gif"),Je.location&&"http"==Je.location.protocol||Si(n,"https"),Ai(n)),function(t,e){var n=new Fr;if(Je.Image){var r=new Image;r.onload=un(ro,n,r,"TestLoadImage: loaded",!0,e),r.onerror=un(ro,n,r,"TestLoadImage: error",!1,e),r.onabort=un(ro,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=un(ro,n,r,"TestLoadImage: timeout",!1,e),Je.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Wr(2);t.v=0,t.f&&t.f.ra(e),Mo(t),Io(t)}function Mo(t){t.v=0,t.I=-1,t.f&&(0==Zi(t.b).length&&0==t.g.length||(t.b.c.length=0,gn(t.g),t.g.length=0),t.f.qa())}function Lo(t,e,n){var r=function(t){return t instanceof Ci?Oi(t):new Ci(t,void 0)}(n);if(""!=r.c)e&&ki(r,e+"."+r.c),Ei(r,r.h);else{var i=Je.location;r=function(t,e,n,r){var i=new Ci(null,void 0);return t&&Si(i,t),e&&ki(i,e),n&&Ei(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Cn(t.V,function(t,e){xi(r,e,t)}),n=t.na,(e=t.A)&&n&&xi(r,e,n),xi(r,"VER",t.ha),ko(t,r),r}function Fo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new oo(t.Na)).F=t.C,e}function Uo(){}function Vo(){if(Rn&&!(10<=Number(Bn)))throw Error("Environmental error: no available transport.")}function qo(t,e){gr.call(this),this.a=new yo(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!mn(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mn(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Qo(this)}function Bo(t){ei.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function zo(){ni.call(this),this.status=1}function Qo(t){this.a=t}($e=oo.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Zr),this.a.onreadystatechange=an(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void lo(this,o)}t=n||"";var i=new yi(this.headers);r&&vi(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=co,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Je.FormData&&t instanceof Je.FormData,!(0<=dn(uo,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{go(this),0<this.o&&((this.D=function(t){return Rn&&qn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=an(this.xa,this)):this.m=Rr(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){lo(this,o)}},$e.xa=function(){void 0!==Xe&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,mr(this,"timeout"),this.abort(8))},$e.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,mr(this,"complete"),mr(this,"abort"),po(this))},$e.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),po(this,!0)),oo.X.G.call(this)},$e.za=function(){this.j||(this.A||this.l||this.g?fo(this):this.Ua())},$e.Ua=function(){fo(this)},$e.W=function(){try{return 2<mo(this)?this.a.status:-1}catch(xn){return-1}},$e.$=function(){try{return this.a?this.a.responseText:""}catch(xn){return""}},$e.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),io(e)}},$e.ua=function(){return this.h},$e.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},($e=yo.prototype).ha=8,$e.v=1,$e.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ii(this,this.c,t,void 0),r=this.l;if(this.O&&(r?kn(r=On(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Eo(this,n,e),xi(i=Oi(this.B),"RID",t),xi(i,"CVER",22),this.A&&xi(i,"X-HTTP-Session-Id",this.A),ko(this,i),this.i&&r&&bo(i,this.i,r),Xi(this.b,n),this.Ia&&xi(i,"TYPE","init"),this.da?(xi(i,"$req",e),xi(i,"SID","null"),n.U=!0,ui(n,i,null)):ui(n,i,e),this.v=2}}else 3==this.v&&(t?So(this,t):0==this.g.length||Ki(this.b)||So(this))},$e.Aa=function(){if(this.j=null,Ro(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Kr(an(this.Ta,this),t)}},$e.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Wr(10),wo(this),Ro(this))},$e.Sa=function(){null!=this.m&&(this.m=null,wo(this),xo(this),Wr(19))},$e.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Wr(2)):(this.c.info("Failed to ping google.com"),Wr(1))},($e=Uo.prototype).ta=function(){},$e.sa=function(){},$e.ra=function(){},$e.qa=function(){},$e.Ja=function(){},Vo.prototype.a=function(t,e){return new qo(t,e)},ln(qo,gr),qo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Wr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Lo(t,null,t.fa),Oo(t)},qo.prototype.close=function(){_o(this.a)},qo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Co(this.a,e)}else this.l?((e={}).__data__=vr(t),Co(this.a,e)):Co(this.a,t)},qo.prototype.G=function(){this.a.f=null,delete this.f,_o(this.a),delete this.a,qo.X.G.call(this)},ln(Bo,ei),ln(zo,ni),ln(Qo,Uo),Qo.prototype.ta=function(){mr(this.a,"a")},Qo.prototype.sa=function(t){mr(this.a,new Bo(t))},Qo.prototype.ra=function(t){mr(this.a,new zo(t))},Qo.prototype.qa=function(){mr(this.a,"b")},Vo.prototype.createWebChannel=Vo.prototype.a,qo.prototype.send=qo.prototype.h,qo.prototype.open=qo.prototype.g,qo.prototype.close=qo.prototype.close,$r.NO_ERROR=0,$r.TIMEOUT=8,$r.HTTP_ERROR=6,Yr.COMPLETE="complete",Jr.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",gr.prototype.listen=gr.prototype.va,oo.prototype.listenOnce=oo.prototype.wa,oo.prototype.getLastError=oo.prototype.Qa,oo.prototype.getLastErrorCode=oo.prototype.ua,oo.prototype.getStatus=oo.prototype.W,oo.prototype.getResponseJson=oo.prototype.Pa,oo.prototype.getResponseText=oo.prototype.$,oo.prototype.send=oo.prototype.ba;var Ho=$r,Wo=Yr,Go=Vr,Ko=Jr,$o=oo,Yo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Yo.o=-1;var Xo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Jo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Be.__extends)(e,t),e}(Error),Zo=new We.Logger("@firebase/firestore");function ts(){return Zo.logLevel}function es(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zo.logLevel<=We.LogLevel.DEBUG){var r=e.map(is);Zo.debug.apply(Zo,Object(Be.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function ns(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zo.logLevel<=We.LogLevel.ERROR){var r=e.map(is);Zo.error.apply(Zo,Object(Be.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function rs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Zo.logLevel<=We.LogLevel.WARN){var r=e.map(is);Zo.warn.apply(Zo,Object(Be.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function is(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(um){return t}}function os(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw ns(e),new Error(e)}function ss(t,e){t||os()}function as(t,e){return t}function us(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var cs=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=us(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ls(t,e){return t<e?-1:t>e?1:0}function hs(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function ds(t){return t+"\0"}var fs=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Jo(Xo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Jo(Xo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Jo(Xo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Jo(Xo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?ls(this.nanoseconds,t.nanoseconds):ls(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ps=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new fs(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function gs(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ms(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var vs=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&os(),void 0===n?n=t.length-e:n>t.length-e&&os(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Be.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(vs),_s=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ws=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Be.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return _s.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Jo(Xo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Jo(Xo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Jo(Xo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(vs),Is=function(){function t(t){this.fields=t,t.sort(ws.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return hs(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Cs=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return ls(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Cs.EMPTY_BYTE_STRING=new Cs("");var Os=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(ss(!!t),"string"==typeof t){var e=0,n=Os.exec(t);if(ss(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ks(t.seconds),nanos:ks(t.nanos)}}function ks(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Es(t){return"string"==typeof t?Cs.fromBase64String(t):Cs.fromUint8Array(t)}function Ts(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xs(t){var e=t.mapValue.fields.__previous_value__;return Ts(e)?xs(e):e}function As(t){var e=Ss(t.mapValue.fields.__local_write_time__.timestampValue);return new fs(e.seconds,e.nanos)}function Rs(t){return null==t}function Ds(t){return 0===t&&1/t==-1/0}function Ns(t){return"number"==typeof t&&Number.isInteger(t)&&!Ds(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var js=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ys.fromString(e))},t.fromName=function(e){return new t(ys.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ys.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ys.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ys(e.slice()))},t}();function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ts(t)?4:10:os()}function Ms(t,e){var n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return As(t).isEqual(As(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ss(t.timestampValue),r=Ss(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Es(t.bytesValue).isEqual(Es(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ks(t.geoPointValue.latitude)===ks(e.geoPointValue.latitude)&&ks(t.geoPointValue.longitude)===ks(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ks(t.integerValue)===ks(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ks(t.doubleValue),r=ks(e.doubleValue);return n===r?Ds(n)===Ds(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return hs(t.arrayValue.values||[],e.arrayValue.values||[],Ms);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(gs(n)!==gs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ms(n[i],r[i])))return!1;return!0}(t,e);default:return os()}}function Ls(t,e){return void 0!==(t.values||[]).find(function(t){return Ms(t,e)})}function Fs(t,e){var n=Ps(t),r=Ps(e);if(n!==r)return ls(n,r);switch(n){case 0:return 0;case 1:return ls(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ks(t.integerValue||t.doubleValue),r=ks(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Us(t.timestampValue,e.timestampValue);case 4:return Us(As(t),As(e));case 5:return ls(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Es(t),r=Es(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ls(n[i],r[i]);if(0!==o)return o}return ls(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ls(ks(t.latitude),ks(e.latitude));return 0!==n?n:ls(ks(t.longitude),ks(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Fs(n[i],r[i]);if(o)return o}return ls(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ls(r[s],o[s]);if(0!==a)return a;var u=Fs(n[r[s]],i[o[s]]);if(0!==u)return u}return ls(r.length,o.length)}(t.mapValue,e.mapValue);default:throw os()}}function Us(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ls(t,e);var n=Ss(t),r=Ss(e),i=ls(n.seconds,r.seconds);return 0!==i?i:ls(n.nanos,r.nanos)}function Vs(t){return qs(t)}function qs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ss(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Es(t.bytesValue).toBase64():"referenceValue"in t?js.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=qs(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+qs(t.fields[o])}return e+"}"}(t.mapValue):os();var e}function Bs(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function zs(t){return!!t&&"integerValue"in t}function Qs(t){return!!t&&"arrayValue"in t}function Hs(t){return!!t&&"nullValue"in t}function Ws(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gs(t){return!!t&&"mapValue"in t}var Ks=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(ws.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Ms(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ps(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Gs(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(ws.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Gs(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function $s(t){var e=[];return ms(t.fields||{},function(t,n){var r=new ws([t]);if(Gs(n)){var i=$s(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Is(e)}var Ys=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ps.min(),Ks.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ks.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ks.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ks.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ks.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Xs=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Js(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Xs(t,e,n,r,i,o,s)}function Zs(t){var e=as(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Vs(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Rs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=da(e.startAt)),e.endAt&&(n+="|ub:",n+=da(e.endAt)),e.h=n}return e.h}function ta(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!pa(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ms(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ma(t.startAt,e.startAt)&&ma(t.endAt,e.endAt)}function ea(t){return js.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var na=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Be.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ra(t,n,r):"array-contains"===n?new aa(t,r):"in"===n?new ua(t,r):"not-in"===n?new ca(t,r):"array-contains-any"===n?new la(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ia(t,n):new oa(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Fs(e,this.value)):null!==e&&Ps(this.value)===Ps(e)&&this.m(Fs(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return os()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ra=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=js.fromName(r.referenceValue),i}return Object(Be.__extends)(e,t),e.prototype.matches=function(t){var e=js.comparator(t.key,this.key);return this.m(e)},e}(na),ia=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=sa(0,n),r}return Object(Be.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(na),oa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=sa(0,n),r}return Object(Be.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(na);function sa(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return js.fromName(t.referenceValue)})}var aa=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Be.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Qs(e)&&Ls(e.arrayValue,this.value)},e}(na),ua=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Be.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ls(this.value.arrayValue,e)},e}(na),ca=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Be.__extends)(e,t),e.prototype.matches=function(t){if(Ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ls(this.value.arrayValue,e)},e}(na),la=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Be.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Qs(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ls(e.value.arrayValue,t)})},e}(na),ha=function(t,e){this.position=t,this.before=e};function da(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Vs(t)}).join(",")}var fa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function pa(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ga(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?js.comparator(js.fromName(s.referenceValue),n.key):Fs(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ma(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ms(t.position[n],e.position[n]))return!1;return!0}var ba=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function va(t,e,n,r,i,o,s,a){return new ba(t,e,n,r,i,o,s,a)}function ya(t){return new ba(t)}function _a(t){return!Rs(t.limit)&&"F"===t.limitType}function wa(t){return!Rs(t.limit)&&"L"===t.limitType}function Ia(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ca(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Oa(t){return null!==t.collectionGroup}function Sa(t){var e=as(t);if(null===e.p){e.p=[];var n=Ca(e),r=Ia(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new fa(n)),e.p.push(new fa(ws.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new fa(ws.keyField(),u))}}}return e.p}function ka(t){var e=as(t);if(!e.T)if("F"===e.limitType)e.T=Js(e.path,e.collectionGroup,Sa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Sa(e);r<i.length;r++){var o=i[r];n.push(new fa(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ha(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ha(e.startAt.position,!e.startAt.before):null;e.T=Js(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Ea(t,e,n){return new ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ta(t,e){return ta(ka(t),ka(e))&&t.limitType===e.limitType}function xa(t){return Zs(ka(t))+"|lt:"+t.limitType}function Aa(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Vs(e.value);var e}).join(", ")+"]"),Rs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+da(t.startAt)),t.endAt&&(e+=", endAt: "+da(t.endAt)),"Target("+e+")"}(ka(t))+"; limitType="+t.limitType+")"}function Ra(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):js.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ga(t.startAt,Sa(t),e)||t.endAt&&ga(t.endAt,Sa(t),e))}(t,e)}function Da(t){return function(e,n){for(var r=!1,i=0,o=Sa(t);i<o.length;i++){var s=o[i],a=Na(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Na(t,e,n){var r=t.field.isKeyField()?js.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Fs(r,i):os()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return os()}}function ja(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ds(e)?"-0":e}}function Pa(t){return{integerValue:""+t}}function Ma(t,e){return Ns(e)?Pa(e):ja(t,e)}var La=function(){this._=void 0};function Fa(t,e,n){return t instanceof qa?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ba?za(t,e):t instanceof Qa?Ha(t,e):function(t,e){var n=Va(t,e),r=Ga(n)+Ga(t.A);return zs(n)&&zs(t.A)?Pa(r):ja(t.R,r)}(t,e)}function Ua(t,e,n){return t instanceof Ba?za(t,e):t instanceof Qa?Ha(t,e):n}function Va(t,e){return t instanceof Wa?zs(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var qa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Be.__extends)(e,t),e}(La),Ba=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Be.__extends)(e,t),e}(La);function za(t,e){for(var n=Ka(e),r=function(t){n.some(function(e){return Ms(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Qa=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Be.__extends)(e,t),e}(La);function Ha(t,e){for(var n=Ka(e),r=function(t){n=n.filter(function(e){return!Ms(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Wa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Be.__extends)(e,t),e}(La);function Ga(t){return ks(t.integerValue||t.doubleValue)}function Ka(t){return Qs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var $a=function(t,e){this.field=t,this.transform=e},Ya=function(t,e){this.version=t,this.transformResults=e},Xa=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ja(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Za=function(){};function tu(t,e,n){t instanceof ou?function(t,e,n){var r=t.value.clone(),i=uu(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof su?function(t,e,n){if(Ja(t.precondition,e)){var r=uu(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(au(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function eu(t,e,n){t instanceof ou?function(t,e,n){if(Ja(t.precondition,e)){var r=t.value.clone(),i=cu(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(iu(e),r).setHasLocalMutations()}}(t,e,n):t instanceof su?function(t,e,n){if(Ja(t.precondition,e)){var r=cu(t.fieldTransforms,n,e),i=e.data;i.setAll(au(t)),i.setAll(r),e.convertToFoundDocument(iu(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Ja(t.precondition,e)&&e.convertToNoDocument(ps.min())}(t,e)}function nu(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Va(o.transform,s||null);null!=a&&(null==n&&(n=Ks.empty()),n.set(o.field,a))}return n||null}function ru(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&hs(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ba&&e instanceof Ba||t instanceof Qa&&e instanceof Qa?hs(t.elements,e.elements,Ms):t instanceof Wa&&e instanceof Wa?Ms(t.A,e.A):t instanceof qa&&e instanceof qa}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function iu(t){return t.isFoundDocument()?t.version:ps.min()}var ou=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Be.__extends)(e,t),e}(Za),su=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Be.__extends)(e,t),e}(Za);function au(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function uu(t,e,n){var r=new Map;ss(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ua(s,a,n[i]))}return r}function cu(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Fa(a,u,e))}return r}var lu,hu,du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Be.__extends)(e,t),e}(Za),fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Be.__extends)(e,t),e}(Za),pu=function(t){this.count=t};function gu(t){switch(t){case Xo.OK:return os();case Xo.CANCELLED:case Xo.UNKNOWN:case Xo.DEADLINE_EXCEEDED:case Xo.RESOURCE_EXHAUSTED:case Xo.INTERNAL:case Xo.UNAVAILABLE:case Xo.UNAUTHENTICATED:return!1;case Xo.INVALID_ARGUMENT:case Xo.NOT_FOUND:case Xo.ALREADY_EXISTS:case Xo.PERMISSION_DENIED:case Xo.FAILED_PRECONDITION:case Xo.ABORTED:case Xo.OUT_OF_RANGE:case Xo.UNIMPLEMENTED:case Xo.DATA_LOSS:return!0;default:return os()}}function mu(t){if(void 0===t)return ns("GRPC error has no .code"),Xo.UNKNOWN;switch(t){case lu.OK:return Xo.OK;case lu.CANCELLED:return Xo.CANCELLED;case lu.UNKNOWN:return Xo.UNKNOWN;case lu.DEADLINE_EXCEEDED:return Xo.DEADLINE_EXCEEDED;case lu.RESOURCE_EXHAUSTED:return Xo.RESOURCE_EXHAUSTED;case lu.INTERNAL:return Xo.INTERNAL;case lu.UNAVAILABLE:return Xo.UNAVAILABLE;case lu.UNAUTHENTICATED:return Xo.UNAUTHENTICATED;case lu.INVALID_ARGUMENT:return Xo.INVALID_ARGUMENT;case lu.NOT_FOUND:return Xo.NOT_FOUND;case lu.ALREADY_EXISTS:return Xo.ALREADY_EXISTS;case lu.PERMISSION_DENIED:return Xo.PERMISSION_DENIED;case lu.FAILED_PRECONDITION:return Xo.FAILED_PRECONDITION;case lu.ABORTED:return Xo.ABORTED;case lu.OUT_OF_RANGE:return Xo.OUT_OF_RANGE;case lu.UNIMPLEMENTED:return Xo.UNIMPLEMENTED;case lu.DATA_LOSS:return Xo.DATA_LOSS;default:return os()}}(hu=lu||(lu={}))[hu.OK=0]="OK",hu[hu.CANCELLED=1]="CANCELLED",hu[hu.UNKNOWN=2]="UNKNOWN",hu[hu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hu[hu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hu[hu.NOT_FOUND=5]="NOT_FOUND",hu[hu.ALREADY_EXISTS=6]="ALREADY_EXISTS",hu[hu.PERMISSION_DENIED=7]="PERMISSION_DENIED",hu[hu.UNAUTHENTICATED=16]="UNAUTHENTICATED",hu[hu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hu[hu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hu[hu.ABORTED=10]="ABORTED",hu[hu.OUT_OF_RANGE=11]="OUT_OF_RANGE",hu[hu.UNIMPLEMENTED=12]="UNIMPLEMENTED",hu[hu.INTERNAL=13]="INTERNAL",hu[hu.UNAVAILABLE=14]="UNAVAILABLE",hu[hu.DATA_LOSS=15]="DATA_LOSS";var bu=function(){function t(t,e){this.comparator=t,this.root=e||yu.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yu.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yu.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new vu(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new vu(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new vu(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new vu(this.root,t,this.comparator,!0)},t}(),vu=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),yu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw os();if(this.right.isRed())throw os();var t=this.left.check();if(t!==this.right.check())throw os();return t+(this.isRed()?0:1)},t}();yu.EMPTY=null,yu.RED=!0,yu.BLACK=!1,yu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw os()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw os()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw os()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw os()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw os()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new yu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var _u=function(){function t(t){this.comparator=t,this.data=new bu(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new wu(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new wu(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),wu=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Iu=new bu(js.comparator);function Cu(){return Iu}var Ou=new bu(js.comparator);function Su(){return Ou}var ku=new bu(js.comparator);function Eu(){return ku}var Tu=new _u(js.comparator);function xu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Tu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Au=new _u(ls);function Ru(){return Au}var Du=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ps.min(),r,Ru(),Cu(),xu())},t}(),Nu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Cs.EMPTY_BYTE_STRING,n,xu(),xu(),xu())},t}(),ju=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Pu=function(t,e){this.targetId=t,this.V=e},Mu=function(t,e,n,r){void 0===n&&(n=Cs.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Lu=function(){function t(){this.S=0,this.D=Vu(),this.C=Cs.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=xu(),e=xu(),n=xu();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:os()}}),new Nu(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Vu()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Fu=function(){function t(t){this.W=t,this.G=new Map,this.H=Cu(),this.J=Uu(),this.Y=new _u(ls)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:os()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ea(i))if(0===n){var o=new js(i.path);this.tt(e,o,Ys.newNoDocument(o,ps.min()))}else ss(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&ea(o.target)){var s=new js(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Ys.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=xu();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Du(t,n,this.Y,this.H,r);return this.H=Cu(),this.J=Uu(),this.Y=new _u(ls),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Lu,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new _u(ls),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||es("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Lu),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Uu(){return new bu(js.comparator)}function Vu(){return new bu(js.comparator)}var qu={asc:"ASCENDING",desc:"DESCENDING"},Bu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zu=function(t,e){this.databaseId=t,this.I=e};function Qu(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hu(t,e){return t.I?e.toBase64():e.toUint8Array()}function Wu(t,e){return Qu(t,e.toTimestamp())}function Gu(t){return ss(!!t),ps.fromTimestamp(function(t){var e=Ss(t);return new fs(e.seconds,e.nanos)}(t))}function Ku(t,e){return function(t){return new ys(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function $u(t){var e=ys.fromString(t);return ss(yc(e)),e}function Yu(t,e){return Ku(t.databaseId,e.path)}function Xu(t,e){var n=$u(e);if(n.get(1)!==t.databaseId.projectId)throw new Jo(Xo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Jo(Xo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new js(ec(n))}function Ju(t,e){return Ku(t.databaseId,e)}function Zu(t){var e=$u(t);return 4===e.length?ys.emptyPath():ec(e)}function tc(t){return new ys(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ec(t){return ss(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function nc(t,e,n){return{name:Yu(t,e),fields:n.toProto().mapValue.fields}}function rc(t,e,n){var r=Xu(t,e.name),i=Gu(e.updateTime),o=new Ks({mapValue:{fields:e.fields}}),s=Ys.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function ic(t,e){var n;if(e instanceof ou)n={update:nc(t,e.key,e.value)};else if(e instanceof du)n={delete:Yu(t,e.key)};else if(e instanceof su)n={update:nc(t,e.key,e.data),updateMask:vc(e.fieldMask)};else{if(!(e instanceof fu))return os();n={verify:Yu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof qa)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ba)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qa)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wa)return{fieldPath:e.field.canonicalString(),increment:n.A};throw os()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Wu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:os()}(t,e.precondition)),n}function oc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Xa.updateTime(Gu(t.updateTime)):void 0!==t.exists?Xa.exists(t.exists):Xa.none()}(e.currentDocument):Xa.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(ss("REQUEST_TIME"===e.setToServerValue),n=new qa):"appendMissingElements"in e?n=new Ba(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Qa(e.removeAllFromArray.values||[]):"increment"in e?n=new Wa(t,e.increment):os();var r=ws.fromServerFormat(e.fieldPath);return new $a(r,n)}(t,e)}):[];if(e.update){var i=Xu(t,e.update.name),o=new Ks({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Is((t.fieldPaths||[]).map(function(t){return ws.fromServerFormat(t)}))}(e.updateMask);return new su(i,o,s,n,r)}return new ou(i,o,n,r)}if(e.delete){var a=Xu(t,e.delete);return new du(a,n)}if(e.verify){var u=Xu(t,e.verify);return new fu(u,n)}return os()}function sc(t,e){return{documents:[Ju(t,e.path)]}}function ac(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ju(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ju(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ws(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NAN"}};if(Hs(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ws(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NOT_NAN"}};if(Hs(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(t.field),op:fc(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:pc(t.field),direction:dc(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Rs(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=lc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=lc(e.endAt)),n}function uc(t){var e=Zu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ss(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=cc(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new fa(gc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Rs(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=hc(n.startAt));var l=null;return n.endAt&&(l=hc(n.endAt)),va(e,i,a,s,u,"F",c,l)}function cc(t){return t?void 0!==t.unaryFilter?[bc(t)]:void 0!==t.fieldFilter?[mc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return cc(t)}).reduce(function(t,e){return t.concat(e)}):os():[]}function lc(t){return{before:t.before,values:t.position}}function hc(t){return new ha(t.values||[],!!t.before)}function dc(t){return qu[t]}function fc(t){return Bu[t]}function pc(t){return{fieldPath:t.canonicalString()}}function gc(t){return ws.fromServerFormat(t.fieldPath)}function mc(t){return na.create(gc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return os()}}(t.fieldFilter.op),t.fieldFilter.value)}function bc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=gc(t.unaryFilter.field);return na.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=gc(t.unaryFilter.field);return na.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=gc(t.unaryFilter.field);return na.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=gc(t.unaryFilter.field);return na.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return os()}}function vc(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function yc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function _c(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ic(e)),e=wc(t.get(n),e);return Ic(e)}function wc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ic(t){return t+"\x01\x01"}function Cc(t){var e=t.length;if(ss(e>=2),2===e)return ss("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ys.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&os(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:os()}o=s+2}return new ys(r)}var Oc=function(t,e){this.seconds=t,this.nanoseconds=e},Sc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Sc.store="owner",Sc.key="owner";var kc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};kc.store="mutationQueues",kc.keyPath="userId";var Ec=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ec.store="mutations",Ec.keyPath="batchId",Ec.userMutationsIndex="userMutationsIndex",Ec.userMutationsKeyPath=["userId","batchId"];var Tc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,_c(e)]},t.key=function(t,e,n){return[t,_c(e),n]},t}();Tc.store="documentMutations",Tc.PLACEHOLDER=new Tc;var xc=function(t,e){this.path=t,this.readTime=e},Ac=function(t,e){this.path=t,this.version=e},Rc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Rc.store="remoteDocuments",Rc.readTimeIndex="readTimeIndex",Rc.readTimeIndexPath="readTime",Rc.collectionReadTimeIndex="collectionReadTimeIndex",Rc.collectionReadTimeIndexPath=["parentPath","readTime"];var Dc=function(t){this.byteSize=t};Dc.store="remoteDocumentGlobal",Dc.key="remoteDocumentGlobalKey";var Nc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Nc.store="targets",Nc.keyPath="targetId",Nc.queryTargetsIndexName="queryTargetsIndex",Nc.queryTargetsKeyPath=["canonicalId","targetId"];var jc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};jc.store="targetDocuments",jc.keyPath=["targetId","path"],jc.documentTargetsIndex="documentTargetsIndex",jc.documentTargetsKeyPath=["path","targetId"];var Pc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Pc.key="targetGlobalKey",Pc.store="targetGlobal";var Mc=function(t,e){this.collectionId=t,this.parent=e};Mc.store="collectionParents",Mc.keyPath=["collectionId","parent"];var Lc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Lc.store="clientMetadata",Lc.keyPath="clientId";var Fc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Fc.store="bundles",Fc.keyPath="bundleId";var Uc=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Uc.store="namedQueries",Uc.keyPath="name";var Vc=Object(Be.__spreadArray)(Object(Be.__spreadArray)([],Object(Be.__spreadArray)(Object(Be.__spreadArray)([],Object(Be.__spreadArray)(Object(Be.__spreadArray)([],Object(Be.__spreadArray)(Object(Be.__spreadArray)([],[kc.store,Ec.store,Tc.store,Rc.store,Nc.store,Sc.store,Pc.store,jc.store]),[Lc.store])),[Dc.store])),[Mc.store])),[Fc.store,Uc.store]),qc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bc=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),zc=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Qc=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&os(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Hc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new zc,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Kc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Zc(e.target.error);n.ft.reject(new Kc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Kc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(es("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Yc(e)},t}(),Wc=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(He.getUA)())&&ns("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return es("SimpleDb","Removing database:",t),Xc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(He.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(es("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Kc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Jo(Xo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Kc(t,n))},i.onupgradeneeded=function(t){es("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){es("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Be.__generator)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Be.__generator)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Hc.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Qc.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return es("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Gc=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Xc(this.Pt.delete())},t}(),Kc=function(t){function e(e,n){var r=this;return(r=t.call(this,Xo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Be.__extends)(e,t),e}(Jo);function $c(t){return"IndexedDbTransactionError"===t.name}var Yc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(es("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(es("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xc(n)},t.prototype.add=function(t){return es("SimpleDb","ADD",this.store.name,t,t),Xc(this.store.add(t))},t.prototype.get=function(t){var e=this;return Xc(this.store.get(t)).next(function(n){return void 0===n&&(n=null),es("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return es("SimpleDb","DELETE",this.store.name,t),Xc(this.store.delete(t))},t.prototype.count=function(){return es("SimpleDb","COUNT",this.store.name),Xc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){es("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Qc(function(n,r){e.onerror=function(t){var e=Zc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Qc(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Gc(i),s=e(i.primaryKey,i.value,o);if(s instanceof Qc){var a=s.catch(function(t){return o.done(),Qc.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Qc.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Xc(t){return new Qc(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Zc(t.target.error);n(e)}})}var Jc=!1;function Zc(t){var e=Wc._t(Object(He.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Jo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Jc||(Jc=!0,setTimeout(function(){throw r},0)),r}}return t}var tl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Be.__extends)(e,t),e}(Bc);function el(t,e){var n=as(t);return Wc.It(n.Mt,e)}var nl=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&tu(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&eu(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&eu(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ps.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},xu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&hs(this.mutations,t.mutations,function(t,e){return ru(t,e)})&&hs(this.baseMutations,t.baseMutations,function(t,e){return ru(t,e)})},t}(),rl=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ss(e.mutations.length===r.length);for(var i=Eu(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),il=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ps.min()),void 0===o&&(o=ps.min()),void 0===s&&(s=Cs.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ol=function(t){this.Lt=t};function sl(t,e){if(e.document)return rc(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=js.fromSegments(e.noDocument.path),r=hl(e.noDocument.readTime),i=Ys.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=js.fromSegments(e.unknownDocument.path);return r=hl(e.unknownDocument.version),Ys.newUnknownDocument(o,r)}return os()}function al(t,e,n){var r=ul(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Yu(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Qu(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Rc(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=ll(e.version);return s=e.hasCommittedMutations,new Rc(null,new xc(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=ll(e.version);return new Rc(new Ac(c,l),null,null,!0,r,i)}return os()}function ul(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function cl(t){var e=new fs(t[0],t[1]);return ps.fromTimestamp(e)}function ll(t){var e=t.toTimestamp();return new Oc(e.seconds,e.nanoseconds)}function hl(t){var e=new fs(t.seconds,t.nanoseconds);return ps.fromTimestamp(e)}function dl(t,e){for(var n=(e.baseMutations||[]).map(function(e){return oc(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return oc(t.Lt,e)}),o=fs.fromMillis(e.localWriteTimeMs);return new nl(e.batchId,o,n,i)}function fl(t){var e,n,r=hl(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?hl(t.lastLimboFreeSnapshotVersion):ps.min();return void 0!==t.query.documents?(ss(1===(n=t.query).documents.length),e=ka(ya(Zu(n.documents[0])))):e=function(t){return ka(uc(t))}(t.query),new il(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Cs.fromBase64String(t.resumeToken))}function pl(t,e){var n,r=ll(e.snapshotVersion),i=ll(e.lastLimboFreeSnapshotVersion);n=ea(e.target)?sc(t.Lt,e.target):ac(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Nc(e.targetId,Zs(e.target),r,o,e.sequenceNumber,i,n)}function gl(t){var e=uc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ea(e,e.limit,"L"):e}var ml=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return bl(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:hl(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return bl(t).put({bundleId:(n=e).id,createTime:ll(Gu(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return vl(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:gl(e.bundledQuery),readTime:hl(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return vl(t).put(function(t){return{name:t.name,readTime:ll(Gu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function bl(t){return el(t,Fc.store)}function vl(t){return el(t,Uc.store)}var yl=function(){function t(){this.Bt=new _l}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Qc.resolve()},t.prototype.getCollectionParents=function(t,e){return Qc.resolve(this.Bt.getEntries(e))},t}(),_l=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new _u(ys.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new _u(ys.comparator)).toArray()},t}(),wl=function(){function t(){this.qt=new _l}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:_c(i)};return Il(t).put(o)}return Qc.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ds(e),""],!1,!0);return Il(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Cc(o.parent))}return n})},t}();function Il(t){return el(t,Mc.store)}var Cl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ol=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Sl(t,e,n){var r=t.store(Ec.store),i=t.store(Tc.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){ss(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Tc.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Qc.waitFor(o).next(function(){return c})}function kl(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw os();e=t.noDocument}return JSON.stringify(e).length}Ol.DEFAULT_COLLECTION_PERCENTILE=10,Ol.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ol.DEFAULT=new Ol(41943040,Ol.DEFAULT_COLLECTION_PERCENTILE,Ol.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ol.DISABLED=new Ol(-1,0,0);var El=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return ss(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xl(t).Ot({index:Ec.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Al(t),s=xl(t);return s.add({}).next(function(a){ss("number"==typeof a);for(var u=new nl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return ic(t.Lt,e)}),i=n.mutations.map(function(e){return ic(t.Lt,e)});return new Ec(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new _u(function(t,e){return ls(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Tc.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Tc.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Qc.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return xl(t).get(e).next(function(t){return t?(ss(t.userId===n.userId),dl(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Qc.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return xl(t).Ot({index:Ec.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(ss(e.batchId>=r),o=dl(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return xl(t).Ot({index:Ec.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xl(t).Nt(Ec.userMutationsIndex,n).next(function(t){return t.map(function(t){return dl(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Tc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Al(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=Cc(r[1]);if(a===n.userId&&e.path.isEqual(c))return xl(t).get(u).next(function(t){if(!t)throw os();ss(t.userId===n.userId),o.push(dl(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new _u(ls),i=[];return e.forEach(function(e){var o=Tc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Al(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=Cc(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Qc.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Tc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new _u(ls);return Al(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=Cc(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(xl(t).get(e).next(function(t){if(null===t)throw os();ss(t.userId===n.userId),r.push(dl(n.R,t))}))}),Qc.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Sl(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Qc.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Qc.resolve();var r=IDBKeyRange.lowerBound(Tc.prefixForUser(e.userId)),i=[];return Al(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Cc(t[1]);i.push(o)}else r.done()}).next(function(){ss(0===i.length)})})},t.prototype.containsKey=function(t,e){return Tl(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Rl(t).get(this.userId).next(function(t){return t||new kc(e.userId,-1,"")})},t}();function Tl(t,e,n){var r=Tc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Al(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function xl(t){return el(t,Ec.store)}function Al(t){return el(t,Tc.store)}function Rl(t){return el(t,kc.store)}var Dl=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Nl=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Dl(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return ps.fromTimestamp(new fs(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return jl(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return ss(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return jl(t).Ot(function(s,a){var u=fl(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Qc.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return jl(t).Ot(function(t,n){var r=fl(n);e(r)})},t.prototype.Xt=function(t){return Pl(t).get(Pc.key).next(function(t){return ss(null!==t),t})},t.prototype.Zt=function(t,e){return Pl(t).put(Pc.key,e)},t.prototype.te=function(t,e){return jl(t).put(pl(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Zs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return jl(t).Ot({range:r,index:Nc.queryTargetsIndexName},function(t,n,r){var o=fl(n);ta(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ml(t);return e.forEach(function(e){var s=_c(e.path);i.push(o.put(new jc(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Qc.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ml(t);return Qc.forEach(e,function(e){var o=_c(e.path);return Qc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ml(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ml(t),i=xu();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Cc(t[1]),o=new js(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=_c(e.path),r=IDBKeyRange.bound([n],[ds(n)],!1,!0),i=0;return Ml(t).Ot({index:jc.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return jl(t).get(e).next(function(t){return t?fl(t):null})},t}();function jl(t){return el(t,Nc.store)}function Pl(t){return el(t,Pc.store)}function Ml(t){return el(t,jc.store)}function Ll(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){if(t.code!==Xo.FAILED_PRECONDITION||t.message!==qc)throw t;return es("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Fl(t,e){var n=t[1],r=e[1],i=ls(t[0],e[0]);return 0===i?ls(n,r):i}var Ul=function(){function t(t){this.ne=t,this.buffer=new _u(Fl),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Fl(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Vl=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;es("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Be.__awaiter)(e,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return $c(e=n.sent())?(es("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ll(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),ql=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Qc.resolve(Yo.o);var r=new Ul(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(es("LruGarbageCollector","Garbage collection skipped; disabled"),Qc.resolve(Cl)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(es("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Cl):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(es("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),ts()<=We.LogLevel.DEBUG&&es("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Qc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Bl=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ql(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return zl(t,n)},t.prototype.removeReference=function(t,e,n){return zl(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return zl(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Rl(t).$t(function(r){return Tl(t,r,e).next(function(t){return t&&(n=!0),Qc.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Ml(t).delete([0,_c(s.path)])})});i.push(u)}}).next(function(){return Qc.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return zl(t,e)},t.prototype.we=function(t,e){var n,r=Ml(t),i=Yo.o;return r.Ot({index:jc.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Yo.o&&e(new js(Cc(n)),i),i=s,n=o):i=Yo.o}).next(function(){i!==Yo.o&&e(new js(Cc(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function zl(t,e){return Ml(t).put(function(t,e){return new jc(0,_c(t.path),e)}(e,t.currentSequenceNumber))}var Ql=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ms(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return bs(this.inner)},t}(),Hl=function(){function t(){this.changes=new Ql(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ps.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ys.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Qc.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Wl=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return $l(t).put(Yl(e),n)},t.prototype.removeEntry=function(t,e){var n=$l(t),r=Yl(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return $l(t).get(Yl(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return $l(t).get(Yl(e)).next(function(t){return{document:n.ye(e,t),size:kl(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Cu();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Cu(),i=new bu(js.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,kl(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Qc.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return $l(t).Ot({range:r},function(t,e,r){for(var s=js.fromSegments(t);o&&js.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Cu(),o=e.path.length+1,s={};if(n.isEqual(ps.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ul(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Rc.collectionReadTimeIndex}return $l(t).Ot(s,function(t,n,s){if(t.length===o){var a=sl(r.R,n);e.path.isPrefixOf(a.key.path)?Ra(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Gl(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Kl(t).get(Dc.key).next(function(t){return ss(!!t),t})},t.prototype.me=function(t,e){return Kl(t).put(Dc.key,e)},t.prototype.ye=function(t,e){if(e){var n=sl(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ps.min()))return n}return Ys.newInvalidDocument(t)},t}(),Gl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ql(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Be.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new _u(function(t,e){return ls(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=al(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=kl(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=al(e.Ie.R,Ys.newNoDocument(o,ps.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Qc.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Hl);function Kl(t){return el(t,Dc.store)}function $l(t){return el(t,Rc.store)}function Yl(t){return t.path.toArray()}var Xl=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ss(n<r&&n>=0&&r<=11);var o=new Hc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Sc.store)}(t),function(t){t.createObjectStore(kc.store,{keyPath:kc.keyPath}),t.createObjectStore(Ec.store,{keyPath:Ec.keyPath,autoIncrement:!0}).createIndex(Ec.userMutationsIndex,Ec.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Tc.store)}(t),Jl(t),function(t){t.createObjectStore(Rc.store)}(t));var s=Qc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(jc.store),t.deleteObjectStore(Nc.store),t.deleteObjectStore(Pc.store)}(t),Jl(t)),s=s.next(function(){return function(t){var e=t.store(Pc.store),n=new Pc(0,0,ps.min().toTimestamp(),0);return e.put(Pc.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Ec.store).Nt().next(function(n){t.deleteObjectStore(Ec.store),t.createObjectStore(Ec.store,{keyPath:Ec.keyPath,autoIncrement:!0}).createIndex(Ec.userMutationsIndex,Ec.userMutationsKeyPath,{unique:!0});var r=e.store(Ec.store),i=n.map(function(t){return r.put(t)});return Qc.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Lc.store,{keyPath:Lc.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Dc.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Rc.store);e.createIndex(Rc.readTimeIndex,Rc.readTimeIndexPath,{unique:!1}),e.createIndex(Rc.collectionReadTimeIndex,Rc.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Fc.store,{keyPath:Fc.keyPath})}(t),function(t){t.createObjectStore(Uc.store,{keyPath:Uc.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Rc.store).Ot(function(t,n){e+=kl(n)}).next(function(){var n=new Dc(e);return t.store(Dc.store).put(Dc.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(kc.store),r=t.store(Ec.store);return n.Nt().next(function(n){return Qc.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ec.userMutationsIndex,i).next(function(r){return Qc.forEach(r,function(r){ss(r.userId===n.userId);var i=dl(e.R,r);return Sl(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(jc.store),n=t.store(Rc.store);return t.store(Pc.store).get(Pc.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new ys(n),s=function(t){return[0,_c(t)]}(o);r.push(e.get(s).next(function(n){return n?Qc.resolve():function(n){return e.put(new jc(0,_c(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Qc.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Mc.store,{keyPath:Mc.keyPath});var n=e.store(Mc.store),r=new _l,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:_c(i)})}};return e.store(Rc.store).Ot({kt:!0},function(t,e){var n=new ys(t);return i(n.popLast())}).next(function(){return e.store(Tc.store).Ot({kt:!0},function(t,e){var n=Cc(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Nc.store);return n.Ot(function(t,r){var i=fl(r),o=pl(e.R,i);return n.put(o)})},t}();function Jl(t){t.createObjectStore(jc.store,{keyPath:jc.keyPath}).createIndex(jc.documentTargetsIndex,jc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Nc.store,{keyPath:Nc.keyPath}).createIndex(Nc.queryTargetsIndexName,Nc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Pc.store)}var Zl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",th=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Jo(Xo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bl(this,i),this.Le=n+"main",this.R=new ol(u),this.Be=new Wc(this.Le,11,new Xl(this.R)),this.qe=new Nl(this.referenceDelegate,this.R),this.Ut=new wl,this.Ue=function(t,e){return new Wl(t,e)}(this.R,this.Ut),this.Qe=new ml,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&ns("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Jo(Xo.FAILED_PRECONDITION,Zl);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Yo(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Be.__awaiter)(e,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Be.__awaiter)(e,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Be.__awaiter)(e,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return nh(e).put(new Lc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if($c(e))return es("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return es("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return eh(t).get(Sc.key).next(function(t){return Qc.resolve(e.tn(t))})},t.prototype.en=function(t){return nh(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=el(t,Lc.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Qc.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Qc.resolve(!0):eh(t).get(Sc.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Jo(Xo.FAILED_PRECONDITION,Zl);return!1}}return!(!e.networkEnabled||!e.inForeground)||nh(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&es("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t=this;return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Sc.store,Lc.store],function(e){var n=new tl(e,Yo.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return nh(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return El.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return es("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Vc,function(o){return r=new tl(o,i.Ne?i.Ne.next():Yo.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw ns("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Jo(Xo.FAILED_PRECONDITION,qc);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return eh(t).get(Sc.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Jo(Xo.FAILED_PRECONDITION,Zl)})},t.prototype.Ze=function(t){var e=new Sc(this.clientId,this.allowTabSynchronization,Date.now());return eh(t).put(Sc.key,e)},t.yt=function(){return Wc.yt()},t.prototype.Xe=function(t){var e=this,n=eh(t);return n.get(Sc.key).next(function(t){return e.tn(t)?(es("IndexedDbPersistence","Releasing primary lease."),n.delete(Sc.key)):Qc.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ns("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return es("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ns("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ns("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function eh(t){return el(t,Sc.store)}function nh(t){return el(t,Lc.store)}function rh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ih=function(t,e){this.progress=t,this.wn=e},oh=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return js.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Oa(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new js(e)).next(function(t){var e=Su();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Su();return this.Ut.getCollectionParents(t,i).next(function(s){return Qc.forEach(s,function(s){var a=function(t,e){return new ba(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Ys.newInvalidDocument(c),r=r.insert(c,l)),eu(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Ra(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=xu(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof su&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),sh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=xu(),i=xu(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ah=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ps.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(_a(e)||wa(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(ts()<=We.LogLevel.DEBUG&&es("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Aa(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new _u(Da(t));return e.forEach(function(e,r){Ra(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ts()<=We.LogLevel.DEBUG&&es("QueryEngine","Using full collection scan to execute query:",Aa(e)),this.Sn.getDocumentsMatchingQuery(t,e,ps.min())},t}(),uh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new bu(ls),this.kn=new Ql(function(t){return Zs(t)},ta),this.On=ps.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new oh(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function ch(t,e,n,r){return new uh(t,e,n,r)}function lh(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return n=as(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new oh(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=xu(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function hh(t,e){var n=as(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Qc.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);ss(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function dh(t){var e=as(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function fh(t,e){var n=as(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return ss(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Cu();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(ph(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ps.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Qc.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function ph(t,e,n,r,i){var o=xu();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Cu();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(ps.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):es("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function gh(t,e){var n=as(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function mh(t,e){var n=as(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Qc.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new il(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function bh(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:r=as(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!$c(s=a.sent()))throw s;return es("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function vh(t,e,n){var r=as(t),i=ps.min(),o=xu();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=as(t),i=r.kn.get(n);return void 0!==i?Qc.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ka(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ps.min(),n?o:xu())}).next(function(t){return{documents:t,Bn:o}})})}function yh(t,e){var n=as(t),r=as(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function _h(t){var e=as(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=as(t),i=Cu(),o=ul(n),s=$l(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Rc.readTimeIndex,range:a},function(t,e){var n=sl(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:cl(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function wh(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){return[2,(e=as(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=$l(t),n=ps.min();return e.Ot({index:Rc.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=cl(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Ih(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Be.__generator)(this,function(p){switch(p.label){case 0:for(i=as(t),o=xu(),s=Cu(),a=Eu(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,mh(i,function(t){return ka(ya(ys.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return ph(t,d,s,ps.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Ch(t,e,n){return void 0===n&&(n=xu()),Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return[4,mh(t,ka(gl(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=as(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Gu(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Cs.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var Oh=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Qc.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Gu(n.createTime)}),Qc.resolve()},t.prototype.getNamedQuery=function(t,e){return Qc.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:gl(t.bundledQuery),readTime:Gu(t.readTime)}}(e)),Qc.resolve()},t}(),Sh=function(){function t(){this.Wn=new _u(kh.Gn),this.zn=new _u(kh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new kh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new kh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new js(new ys([])),r=new kh(n,t),i=new kh(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new js(new ys([])),n=new kh(e,t),r=new kh(e,t+1),i=xu();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new kh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),kh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return js.comparator(t.key,e.key)||ls(t.ns,e.ns)},t.Hn=function(t,e){return ls(t.ns,e.ns)||js.comparator(t.key,e.key)},t}(),Eh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new _u(kh.Gn)}return t.prototype.checkEmpty=function(t){return Qc.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new nl(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new kh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Qc.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Qc.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Qc.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Qc.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Qc.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new kh(e,0),i=new kh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Qc.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new _u(ls);return e.forEach(function(t){var e=new kh(t,0),i=new kh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Qc.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;js.isDocumentKey(i)||(i=i.child(""));var o=new kh(new js(i),0),s=new _u(ls);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Qc.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ss(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Qc.forEach(e.mutations,function(i){var o=new kh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new kh(e,0),r=this.rs.firstAfterOrEqual(n);return Qc.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Qc.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Th=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new bu(js.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Qc.resolve(n?n.document.clone():Ys.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Cu();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ys.newInvalidDocument(t))}),Qc.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Cu(),i=new js(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Ra(e,u)&&(r=r.insert(u.key,u.clone()))}return Qc.resolve(r)},t.prototype.fs=function(t,e){return Qc.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new xh(this)},t.prototype.getSize=function(t){return Qc.resolve(this.size)},t}(),xh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Be.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Qc.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Hl),Ah=function(){function t(t){this.persistence=t,this.ds=new Ql(function(t){return Zs(t)},ta),this.lastRemoteSnapshotVersion=ps.min(),this.highestTargetId=0,this.ws=0,this._s=new Sh,this.targetCount=0,this.ys=Dl.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Qc.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Qc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Qc.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Qc.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Qc.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Dl(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Qc.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Qc.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Qc.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qc.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Qc.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Qc.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Qc.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Qc.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Qc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Qc.resolve(n)},t.prototype.containsKey=function(t,e){return Qc.resolve(this._s.containsKey(e))},t}(),Rh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Yo(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Ah(this),this.Ut=new yl,this.Ue=function(t,e){return new Th(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new ol(e),this.Qe=new Oh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Eh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;es("MemoryPersistence","Starting transaction:",t);var i=new Dh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Qc.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Dh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Be.__extends)(e,t),e}(Bc),Nh=function(){function t(t){this.persistence=t,this.As=new Sh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw os()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Qc.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Qc.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Qc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qc.forEach(this.vs,function(r){var i=js.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Qc.or([function(){return Qc.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),jh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ph(t,e){return"firestore_clients_"+t+"_"+e}function Mh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Lh(t,e){return"firestore_targets_"+t+"_"+e}jh.UNAUTHENTICATED=new jh(null),jh.GOOGLE_CREDENTIALS=new jh("google-credentials-uid"),jh.FIRST_PARTY=new jh("first-party-uid");var Fh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Jo(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ns("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Uh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Jo(i.error.code,i.error.message)),o?new t(e,i.state,r):(ns("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Vh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ru(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ns(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ns("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),qh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ns("SharedClientState","Failed to parse online state: "+e),null)},t}(),Bh=function(){function t(){this.activeTargetIds=Ru()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),zh=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new bu(ls),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Ph(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Bh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Be.__generator)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Ph(this.persistenceKey,r)))&&(o=Vh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Lh(this.persistenceKey,t));if(n){var r=Uh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Lh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return es("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){es("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){es("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(es("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void ns("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Be.__awaiter)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Be.__generator)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Yo.o;if(null!=t)try{var n=JSON.parse(t);ss("number"==typeof n),e=n}catch(t){ns("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Yo.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Fh(this.currentUser,t,e,n),i=Mh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Mh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Lh(this.persistenceKey,t),i=new Uh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Vh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Fh.Vs(new jh(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Uh.Vs(r,e)},t.prototype.js=function(t){return qh.Vs(t)},t.prototype.ii=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(es("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ru();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Qh=function(){function t(){this.li=new Bh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Bh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Hh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Wh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){es("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){es("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Gh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Kh=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),$h=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Be.__extends)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new $o;s.listenOnce(Wo.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ho.NO_ERROR:var e=s.getResponseJson();es("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ho.TIMEOUT:es("Connection",'RPC "'+t+'" timed out'),o(new Jo(Xo.DEADLINE_EXCEEDED,"Request time out"));break;case Ho.HTTP_ERROR:var n=s.getStatus();if(es("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Xo).indexOf(e)>=0?e:Xo.UNKNOWN}(r.status);o(new Jo(a,r.message))}else o(new Jo(Xo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Jo(Xo.UNAVAILABLE,"Connection failed."));break;default:os()}}finally{es("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Vo,i=Br(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(He.isMobileCordova)()||Object(He.isReactNative)()||Object(He.isElectron)()||Object(He.isIE)()||Object(He.isUWP)()||Object(He.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");es("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Kh({Ei:function(t){c?es("Connection","Not sending because WebChannel is closed:",t):(u||(es("Connection","Opening WebChannel transport."),a.open(),u=!0),es("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ko.EventType.OPEN,function(){c||es("Connection","WebChannel transport opened.")}),h(a,Ko.EventType.CLOSE,function(){c||(c=!0,es("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ko.EventType.ERROR,function(t){c||(c=!0,rs("Connection","WebChannel transport errored:",t),l.Vi(new Jo(Xo.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ko.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];ss(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){es("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=lu[t];if(void 0!==e)return mu(e)}(i),s=r.message;void 0===o&&(o=Xo.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Jo(o,s)),a.close()}else es("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Go.STAT_EVENT,function(t){10===t.stat?es("Connection","Detected buffering proxy"):11===t.stat&&es("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);es("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return es("RestConnection","Received: ",t),t},function(e){throw rs("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Gh[t]},t}());function Yh(){return"undefined"!=typeof window?window:null}function Xh(){return"undefined"!=typeof document?document:null}function Jh(t){return new zu(t,!0)}var Zh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&es("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),td=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Zh(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Xo.RESOURCE_EXHAUSTED?(ns(e.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Xo.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Jo(Xo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Be.__awaiter)(t,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return es("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(es("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ed=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Be.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:os()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(ss(void 0===e||"string"==typeof e),Cs.fromBase64String(e||"")):(ss(void 0===e||e instanceof Uint8Array),Cs.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Xo.UNKNOWN:mu(t.code);return new Jo(e,t.message||"")}(a);n=new Mu(r,i,o,s||null)}else if("documentChange"in e){i=Xu(t,(r=e.documentChange).document.name),o=Gu(r.document.updateTime);var a=new Ks({mapValue:{fields:r.document.fields}}),u=(s=Ys.newFoundDocument(i,o,a),r.targetIds||[]);n=new ju(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Xu(t,(r=e.documentDelete).document),o=r.readTime?Gu(r.readTime):ps.min(),a=Ys.newNoDocument(i,o),n=new ju([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Xu(t,(r=e.documentRemove).document),n=new ju([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return os();var c=e.filter;i=new pu(r=c.count||0),n=new Pu(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ps.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ps.min():e.readTime?Gu(e.readTime):ps.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=tc(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ea(r)?{documents:sc(t,r)}:{query:ac(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Hu(t,e.resumeToken):e.snapshotVersion.compareTo(ps.min())>0&&(n.readTime=Qu(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return os()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=tc(this.R),e.removeTarget=t,this.cr(e)},e}(td),nd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Be.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(ss(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(ss(void 0!==e),t.map(function(t){return function(t,e){var n=Gu(t.updateTime?t.updateTime:e);return n.isEqual(ps.min())&&(n=Gu(e)),new Ya(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Gu(t.commitTime);return this.listener.Tr(n,e)}return ss(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=tc(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return ic(e.R,t)})};this.cr(n)},e}(td),rd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Be.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new Jo(Xo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Xo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Jo(Xo.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Xo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Jo(Xo.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),id=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ns(e),this.Vr=!1):es("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),od=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Be.__awaiter)(o,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return pd(this)?(es("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return(e=as(t)).$r.add(4),[4,ad(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,sd(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new id(n,r)};function sd(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:if(!pd(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ad(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ud(t,e){var n=as(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),fd(n)?dd(n):xd(n).er()&&ld(n,e))}function cd(t,e){var n=as(t),r=xd(n);n.Or.delete(e),r.er()&&hd(n,e),0===n.Or.size&&(r.er()?r.ir():pd(n)&&n.Br.set("Unknown"))}function ld(t,e){t.qr.U(e.targetId),xd(t).mr(e)}function hd(t,e){t.qr.U(e),xd(t).yr(e)}function dd(t){t.qr=new Fu({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),xd(t).start(),t.Br.Sr()}function fd(t){return pd(t)&&!xd(t).tr()&&t.Or.size>0}function pd(t){return 0===as(t).$r.size}function gd(t){t.qr=void 0}function md(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){return t.Or.forEach(function(e,n){ld(t,e)}),[2]})})}function bd(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(n){return gd(t),fd(t)?(t.Br.Nr(e),dd(t)):t.Br.set("Unknown"),[2]})})}function vd(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Mu&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),es("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,yd(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ju?t.qr.X(e):e instanceof Pu?t.qr.rt(e):t.qr.et(e),n.isEqual(ps.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,dh(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Cs.EMPTY_BYTE_STRING,n.snapshotVersion)),hd(t,e);var r=new il(n.target,e,1,n.sequenceNumber);ld(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return es("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,yd(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function yd(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r=this;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:if(!$c(e))throw e;return t.$r.add(1),[4,ad(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return dh(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Be.__awaiter)(r,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return es("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,sd(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function _d(t,e){return e().catch(function(n){return yd(t,n,e)})}function wd(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:e=as(t),n=Ad(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return pd(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,gh(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Ad(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,yd(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Id(e)&&Cd(e),[2]}})})}function Id(t){return pd(t)&&!Ad(t).tr()&&t.kr.length>0}function Cd(t){Ad(t).start()}function Od(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){return Ad(t).Ar(),[2]})})}function Sd(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Be.__generator)(this,function(i){for(e=Ad(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function kd(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=rl.from(r,e,n),[4,_d(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,wd(t)];case 2:return o.sent(),[2]}})})}function Ed(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return e&&Ad(t).pr?[4,function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return gu(r=e.code)&&r!==Xo.ABORTED?(n=t.kr.shift(),Ad(t).sr(),[4,_d(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,wd(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Id(t)&&Cd(t),[2]}})})}function Td(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return n=as(t),e?(n.$r.delete(2),[4,sd(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,ad(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function xd(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=as(t);return r.br(),new ed(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:md.bind(null,t),Ri:bd.bind(null,t),_r:vd.bind(null,t)}),t.Mr.push(function(n){return Object(Be.__awaiter)(e,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),fd(t)?dd(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),gd(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Ad(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=as(t);return r.br(),new nd(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Od.bind(null,t),Ri:Ed.bind(null,t),Ir:Sd.bind(null,t),Tr:kd.bind(null,t)}),t.Mr.push(function(n){return Object(Be.__awaiter)(e,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,wd(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(es("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Rd=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new zc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jo(Xo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Dd(t,e){if(ns("AsyncQueue",e+": "+t),$c(t))return new Jo(Xo.UNAVAILABLE,e+": "+t);throw t}var Nd=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||js.comparator(e.key,n.key)}:function(t,e){return js.comparator(t.key,e.key)},this.keyedMap=Su(),this.sortedSet=new bu(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),jd=function(){function t(){this.Kr=new bu(js.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):os():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Pd=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Nd.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ta(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Md=function(){this.Wr=void 0,this.listeners=[]},Ld=function(){this.queries=new Ql(function(t){return xa(t)},Ta),this.onlineState="Unknown",this.Gr=new Set};function Fd(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Be.__generator)(this,function(c){switch(c.label){case 0:if(n=as(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Md),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Dd(a,"Initialization of query '"+Aa(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Bd(n),[2]}})})}function Ud(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Be.__generator)(this,function(a){return n=as(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Vd(t,e){for(var n=as(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Bd(n)}function qd(t,e,n){var r=as(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Bd(t){t.Gr.forEach(function(t){t.next()})}var zd=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Pd(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Pd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Qd=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Hd=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Xu(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?rc(this.R,t.document,!1):Ys.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Gu(t)},t}(),Wd=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Gd(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Hd(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||xu()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return[4,Ih(this.localStore,new Hd(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Ch(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ih(Object.assign({},this.progress),t))]}})})},t}();function Gd(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Kd=function(t){this.key=t},$d=function(t){this.key=t},Yd=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=xu(),this.mutatedKeys=xu(),this.lo=Da(t),this.fo=new Nd(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new jd,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=_a(this.query)&&i.size===this.query.limit?i.last():null,c=wa(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ra(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),_a(this.query)||wa(this.query))for(;s.size>this.query.limit;){var l=_a(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return os()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Pd(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new jd,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=xu(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new $d(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Kd(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=xu();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Pd.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Xd=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Jd=function(t){this.key=t,this.bo=!1},Zd=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ql(function(t){return xa(t)},Ta),this.Vo=new Map,this.So=new Set,this.Do=new bu(js.comparator),this.Co=new Map,this.No=new Sh,this.xo={},this.Fo=new Map,this.ko=Dl.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function tf(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return n=Af(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,mh(n.localStore,ka(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,ef(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&ud(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function ef(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Be.__generator)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,vh(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(gf(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,vh(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Yd(e,i.Bn),s=o._o(i.documents),a=Nu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),gf(t,n,u.To),c=new Xd(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function nf(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return n=as(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Ta(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,bh(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),cd(n.remoteStore,r.targetId),ff(n,r.targetId)}).catch(Ll)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ff(n,r.targetId),[4,bh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function rf(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:r=Rf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=as(t),i=fs.now(),o=e.reduce(function(t,e){return t.add(e.key)},xu());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=nu(c,n.get(c.key));null!=l&&s.push(new su(c.key,l,$s(l.toProto().mapValue),Xa.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new bu(ls)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,vf(r,i.changes)];case 3:return a.sent(),[4,wd(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Dd(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function of(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:n=as(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,fh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(ss(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ss(r.bo):t.removedDocuments.size>0&&(ss(r.bo),r.bo=!1))}),[4,vf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Ll(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function sf(t,e,n){var r=as(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=as(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Bd(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function af(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Be.__generator)(this,function(c){switch(c.label){case 0:return(r=as(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new bu(js.comparator)).insert(o,Ys.newNoDocument(o,ps.min())),a=xu().add(o),u=new Du(ps.min(),new Map,new _u(ls),s,a),[4,of(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),bf(r),[3,4];case 2:return[4,bh(r.localStore,e,!1).then(function(){return ff(r,e,n)}).catch(Ll)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function uf(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:n=as(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,hh(n.localStore,e)];case 2:return i=o.sent(),df(n,r,null),hf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,vf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ll(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function cf(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:r=as(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=as(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return ss(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),df(r,e,n),hf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,vf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ll(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function lf(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:pd((n=as(t)).remoteStore)||es("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=as(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Dd(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function hf(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function df(t,e,n){var r=as(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function ff(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||pf(t,e)})}function pf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(cd(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),bf(t))}function gf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Kd?(t.No.addReference(o.key,e),mf(t,o)):o instanceof $d?(es("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||pf(t,o.key)):os()}}function mf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(es("SyncEngine","New document in limbo: "+n),t.So.add(r),bf(t))}function bf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new js(ys.fromString(e)),r=t.ko.next();t.Co.set(r,new Jd(n)),t.Do=t.Do.insert(n,r),ud(t.remoteStore,new il(ka(ya(n.path)),r,2,Yo.o))}}function vf(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return r=as(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=sh.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Be.__generator)(this,function(l){switch(l.label){case 0:n=as(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Qc.forEach(e,function(e){return Qc.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Qc.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!$c(r=l.sent()))throw r;return es("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function yf(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return(n=as(t)).currentUser.isEqual(e)?[3,3]:(es("SyncEngine","User change. New user:",e.toKey()),[4,lh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Jo(Xo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,vf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function _f(t,e){var n=as(t),r=n.Co.get(e);if(r&&r.bo)return xu().add(r.key);var i=xu(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function wf(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return[4,vh((n=as(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&gf(n,e.targetId,i.To),i)]}})})}function If(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){return[2,_h((e=as(t)).localStore).then(function(t){return vf(e,t)})]})})}function Cf(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=as(t),r=as(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Qc.resolve(null)})})}((i=as(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,wd(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(df(i,e,r||null),hf(i,e),function(t,e){as(as(t)._n).Gt(e)}(i.localStore,e)):os(),s.label=4;case 4:return[4,vf(i,o)];case 5:return s.sent(),[3,7];case 6:es("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Of(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Be.__generator)(this,function(c){switch(c.label){case 0:return Af(n=as(t)),Rf(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Sf(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Td(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)ud(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return ff(n,e),bh(n.localStore,e,!0)}),cd(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Sf(n,a)];case 5:return c.sent(),function(t){var e=as(t);e.Co.forEach(function(t,n){cd(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new bu(js.comparator)}(n),n.Oo=!1,[4,Td(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Sf(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Be.__generator)(this,function(g){switch(g.label){case 0:n=as(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,mh(n.localStore,ka(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,wf(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,yh(n.localStore,a)];case 8:return p=g.sent(),[4,mh(n.localStore,p)];case 9:return u=g.sent(),[4,ef(n,kf(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function kf(t){return va(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ef(t){var e=as(t);return as(as(e.localStore).persistence).fn()}function Tf(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return(i=as(t)).Oo?(es("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,_h(i.localStore)];case 3:return o=a.sent(),s=Du.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,vf(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,bh(i.localStore,e,!0)];case 6:return a.sent(),ff(i,e,r),[3,8];case 7:os(),a.label=8;case 8:return[2]}})})}function xf(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Be.__generator)(this,function(d){switch(d.label){case 0:if(!(r=Af(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(es("SyncEngine","Adding an already active target "+s),[3,5]):[4,yh(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,mh(r.localStore,a)];case 3:return u=d.sent(),[4,ef(r,kf(a),u.targetId,!1)];case 4:d.sent(),ud(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,bh(r.localStore,t,!1).then(function(){cd(r.remoteStore,t),ff(r,t)}).catch(Ll)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Af(t){var e=as(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=of.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_f.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=af.bind(null,e),e.vo._r=Vd.bind(null,e.eventManager),e.vo.Mo=qd.bind(null,e.eventManager),e}function Rf(t){var e=as(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cf.bind(null,e),e}function Df(t,e,n){var r=as(t);(function(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Be.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=as(t),r=Gu(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.Qe.getBundleMetadata(t,e.id)}).then(function(t){return!!t&&t.createTime.compareTo(r)>=0})}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(Gd(r)),i=new Wd(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,vf(t,a.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=as(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.Qe.saveBundleMetadata(t,e)})}(t.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return rs("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var Nf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return this.R=Jh(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return ch(this.persistence,new ah,t.initialUser,this.R)},t.prototype.qo=function(t){return new Rh(Nh.bs,this.R)},t.prototype.Bo=function(t){return new Qh},t.prototype.terminate=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Be.__extends)(e,t),e.prototype.initialize=function(e){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,wh(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Rf(this.Ko.syncEngine)];case 4:return n.sent(),[4,wd(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return ch(this.persistence,new ah,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Vl(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=rh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ol.withCacheSize(this.cacheSizeBytes):Ol.DEFAULT;return new th(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Yh(),Xh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Qh},e}(Nf),Pf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Be.__extends)(e,t),e.prototype.initialize=function(e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r=this;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof zh?(this.sharedClientState.syncEngine={ui:Cf.bind(null,n),ai:Tf.bind(null,n),hi:xf.bind(null,n),fn:Ef.bind(null,n),ci:If.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Be.__awaiter)(r,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return[4,Of(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Yh();if(!zh.yt(e))throw new Jo(Xo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new zh(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(jf),Mf=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n=this;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return sf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=yf.bind(null,this.syncEngine),[4,Td(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Ld},t.prototype.createDatastore=function(t){var e=Jh(t.databaseInfo.databaseId),n=new $h(t.databaseInfo);return function(t,e,n){return new rd(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return sf(s.syncEngine,t,0)},o=Wh.yt()?new Wh:new Hh,new od(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Zd(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return e=as(t),es("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,ad(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();function Lf(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r;return Object(Be.__generator)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Ff=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Uf=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new zc,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Qd(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),Vf=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Jo(Xo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Be.__generator)(this,function(u){switch(u.label){case 0:return n=as(t),r=tc(n.R)+"/documents",i={documents:e.map(function(t){return Yu(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){ss(!!e.found);var n=Xu(t,e.found.name),r=Gu(e.found.updateTime),i=new Ks({mapValue:{fields:e.found.fields}});return Ys.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){ss(!!e.missing),ss(!!e.readTime);var n=Xu(t,e.missing),r=Gu(e.readTime);return Ys.newNoDocument(n,r)}(t,e):os()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());ss(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new du(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e=this;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=js.fromPath(n);e.mutations.push(new fu(r,e.precondition(r)))}),[4,function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return n=as(t),r=tc(n.R)+"/documents",i={writes:e.map(function(t){return ic(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw os();e=ps.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Jo(Xo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Xa.updateTime(e):Xa.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ps.min()))throw new Jo(Xo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xa.updateTime(e)}return Xa.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),qf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Zh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Be.__awaiter)(t,void 0,void 0,function(){var t,e,n=this;return Object(Be.__generator)(this,function(r){return t=new Vf(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Rs(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!gu(e)}return!1},t}(),Bf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=jh.UNAUTHENTICATED,this.clientId=cs.u(),this.credentialListener=function(){},this.receivedInitialUser=new zc,this.credentials.setChangeListener(function(t){es("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Jo(Xo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new zc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Be.__awaiter)(t,void 0,void 0,function(){var t,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Dd(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function zf(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),es("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Be.__awaiter)(i,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return[4,lh(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Qf(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Hf(t)];case 1:return n=i.sent(),es("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return(n=as(t)).asyncQueue.verifyOperationInProgress(),es("RemoteStore","RemoteStore received new credentials"),r=pd(n),n.$r.add(3),[4,ad(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,sd(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Hf(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(es("FirestoreClient","Using default OfflineComponentProvider"),[4,zf(t,new Nf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Wf(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(es("FirestoreClient","Using default OnlineComponentProvider"),[4,Qf(t,new Mf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Gf(t){return Hf(t).then(function(t){return t.persistence})}function Kf(t){return Hf(t).then(function(t){return t.localStore})}function $f(t){return Wf(t).then(function(t){return t.remoteStore})}function Yf(t){return Wf(t).then(function(t){return t.syncEngine})}function Xf(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,Wf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=tf.bind(null,e.syncEngine),n.onUnlisten=nf.bind(null,e.syncEngine),n)]}})})}function Jf(t,e,n){var r=this;void 0===n&&(n={});var i=new zc;return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(r,void 0,void 0,function(){var r;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ff({next:function(o){e.enqueueAndForget(function(){return Ud(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Jo(Xo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Jo(Xo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new zd(ya(n.path),o,{includeMetadataChanges:!0,so:!0});return Fd(t,s)},[4,Xf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Zf(t,e,n){var r=this;void 0===n&&(n={});var i=new zc;return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(r,void 0,void 0,function(){var r;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ff({next:function(n){e.enqueueAndForget(function(){return Ud(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Jo(Xo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new zd(n,o,{includeMetadataChanges:!0,so:!0});return Fd(t,s)},[4,Xf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var tp=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},ep=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),np=new Map,rp=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ip=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(jh.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),op=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),sp=function(){function t(t){var e=this;this.oc=null,this.currentUser=jh.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(es("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ss("string"==typeof n.accessToken),new rp(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return ss(null===t||"string"==typeof t),new jh(t)},t}(),ap=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=jh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),up=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new ap(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(jh.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function cp(t,e,n){if(!n)throw new Jo(Xo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function lp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function hp(t,e,n,r){if(!0===e&&!0===r)throw new Jo(Xo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function dp(t){if(!js.isDocumentKey(t))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function fp(t){if(js.isDocumentKey(t))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function pp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":os()}function gp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Jo(Xo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=pp(t);throw new Jo(Xo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function mp(t,e){if(e<=0)throw new Jo(Xo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var bp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Jo(Xo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Jo(Xo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,hp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),vp=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bp({}),this._settingsFrozen=!1,t instanceof ep?(this._databaseId=t,this._credentials=new ip):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Jo(Xo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ep(t.options.projectId)}(t),this._credentials=new sp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Jo(Xo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Jo(Xo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bp(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ip;switch(t.type){case"gapi":var e=t.client;return ss(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new up(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Jo(Xo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=np.get(this))&&(es("ComponentProvider","Removing Datastore"),np.delete(this),t.terminate()),Promise.resolve();var t},t}(),yp=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wp(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),_p=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),wp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ya(r))||this)._path=r,i.type="collection",i}return Object(Be.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new yp(this.firestore,null,new js(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(_p);function Ip(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(He.getModularInstance)(t),cp("collection","path",e),t instanceof vp)return fp(n=ys.fromString.apply(ys,Object(Be.__spreadArray)([e],r))),new wp(t,null,n);if(!(t instanceof yp||t instanceof wp))throw new Jo(Xo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return fp(n=ys.fromString.apply(ys,Object(Be.__spreadArray)([t.path],r)).child(ys.fromString(e))),new wp(t.firestore,null,n)}function Cp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(He.getModularInstance)(t),1===arguments.length&&(e=cs.u()),cp("doc","path",e),t instanceof vp)return dp(n=ys.fromString.apply(ys,Object(Be.__spreadArray)([e],r))),new yp(t,null,new js(n));if(!(t instanceof yp||t instanceof wp))throw new Jo(Xo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dp(n=t._path.child(ys.fromString.apply(ys,Object(Be.__spreadArray)([e],r)))),new yp(t.firestore,t instanceof wp?t.converter:null,new js(n))}function Op(t,e){return t=Object(He.getModularInstance)(t),e=Object(He.getModularInstance)(e),(t instanceof yp||t instanceof wp)&&(e instanceof yp||e instanceof wp)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Sp(t,e){return t=Object(He.getModularInstance)(t),e=Object(He.getModularInstance)(e),t instanceof _p&&e instanceof _p&&t.firestore===e.firestore&&Ta(t._query,e._query)&&t.converter===e.converter}var kp=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Zh(this,"async_queue_retry"),this.Ec=function(){var e=Xh();e&&es("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Xh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Xh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e=this;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!$c(t=n.sent()))throw t;return es("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,ns("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Rd.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&os()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t;return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Ep(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Tp=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new zc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),xp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new kp,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Be.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Rp(this),this._firestoreClient.terminate()},e}(vp);function Ap(t){return t._firestoreClient||Rp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Rp(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new tp(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Bf(t._credentials,t._queue,r)}function Dp(t,e,n){var r=this,i=new zc;return t.asyncQueue.enqueue(function(){return Object(Be.__awaiter)(r,void 0,void 0,function(){var r;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,zf(t,n)];case 1:return o.sent(),[4,Qf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Xo.FAILED_PRECONDITION||t.code===Xo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Np(t){if(t._initialized||t._terminated)throw new Jo(Xo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var jp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ws(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Pp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Cs.fromBase64String(e))}catch(e){throw new Jo(Xo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Cs.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Mp=function(t){this._methodName=t},Lp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Jo(Xo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Jo(Xo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return ls(this._lat,t._lat)||ls(this._long,t._long)},t}(),Fp=/^__.*__$/,Up=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new su(t,this.data,this.fieldMask,e,this.fieldTransforms):new ou(t,this.data,e,this.fieldTransforms)},t}(),Vp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new su(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function qp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw os()}}var Bp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return ug(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(qp(this.Dc)&&Fp.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),zp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Jh(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new Bp({Dc:t,methodName:e,Lc:n,path:ws.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Qp(t){var e=t._freezeSettings(),n=Jh(t._databaseId);return new zp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);ig("Data must be an object, but it was:",s,r);var a,u,c=ng(r,s);if(o.merge)a=new Is(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=og(e,d[h],n);if(!s.contains(f))throw new Jo(Xo.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");cg(l,f)||l.push(f)}a=new Is(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Up(new Ks(c),a,u)}var Wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Be.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Mp);function Gp(t,e,n){return new Bp({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Be.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new $a(t.path,new qa)},e.prototype.isEqual=function(t){return t instanceof e},e}(Mp),$p=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Be.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Gp(this,t,!0),n=this.qc.map(function(t){return eg(t,e)}),r=new Ba(n);return new $a(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Mp),Yp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Be.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Gp(this,t,!0),n=this.qc.map(function(t){return eg(t,e)}),r=new Qa(n);return new $a(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Mp),Xp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Be.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new Wa(t.R,Ma(t.R,this.Uc));return new $a(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Mp);function Jp(t,e,n,r){var i=t.Bc(1,e,n);ig("Data must be an object, but it was:",i,r);var o=[],s=Ks.empty();ms(r,function(t,r){var a=ag(e,t,n);r=Object(He.getModularInstance)(r);var u=i.kc(a);if(r instanceof Wp)o.push(a);else{var c=eg(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Is(o);return new Vp(s,a,i.fieldTransforms)}function Zp(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[og(e,r,n)],u=[i];if(o.length%2!=0)throw new Jo(Xo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(og(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ks.empty(),d=a.length-1;d>=0;--d)if(!cg(l,a[d])){var f=a[d],p=u[d];p=Object(He.getModularInstance)(p);var g=s.kc(f);if(p instanceof Wp)l.push(f);else{var m=eg(p,g);null!=m&&(l.push(f),h.set(f,m))}}var b=new Is(l);return new Vp(h,b,s.fieldTransforms)}function tg(t,e,n,r){return void 0===r&&(r=!1),eg(n,t.Bc(r?4:3,e))}function eg(t,e){if(rg(t=Object(He.getModularInstance)(t)))return ig("Unsupported field value:",e,t),ng(t,e);if(t instanceof Mp)return function(t,e){if(!qp(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=eg(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(He.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ma(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=fs.fromDate(t);return{timestampValue:Qu(e.R,n)}}if(t instanceof fs)return n=new fs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Qu(e.R,n)};if(t instanceof Lp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pp)return{bytesValue:Hu(e.R,t._byteString)};if(t instanceof yp){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ku(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+pp(t))}(t,e)}function ng(t,e){var n={};return bs(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(t,function(t,r){var i=eg(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function rg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof fs||t instanceof Lp||t instanceof Pp||t instanceof yp||t instanceof Mp)}function ig(t,e,n){if(!rg(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=pp(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function og(t,e,n){if((e=Object(He.getModularInstance)(e))instanceof jp)return e._internalPath;if("string"==typeof e)return ag(t,e);throw ug("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var sg=new RegExp("[~\\*/\\[\\]]");function ag(t,e,n){if(e.search(sg)>=0)throw ug("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(jp.bind.apply(jp,Object(Be.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(r){throw ug("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ug(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Jo(Xo.INVALID_ARGUMENT,(a+=". ")+t+u)}function cg(t,e){return t.some(function(t){return t.isEqual(e)})}var lg=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new yp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new hg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(dg("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),hg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Be.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(lg);function dg(t,e){return"string"==typeof e?ag(t,e):e instanceof jp?e._internalPath:e._delegate._internalPath}var fg=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),pg=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Be.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new gg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(dg("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(lg),gg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Be.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(pg),mg=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new fg(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new gg(n._firestore,n._userDataWriter,r.key,r,new fg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Jo(Xo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new gg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new fg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new gg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new fg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:bg(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function bg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return os()}}function vg(t,e){return t instanceof pg&&e instanceof pg?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof mg&&e instanceof mg&&t._firestore===e._firestore&&Sp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function yg(t){if(wa(t)&&0===t.explicitOrderBy.length)throw new Jo(Xo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _g=function(){};function wg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Ig=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Be.__extends)(e,t),e.prototype._apply=function(t){var e=Qp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){xg(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Tg(r,t,l[c]));a={arrayValue:{values:u}}}else a=Tg(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||xg(s,o),a=tg(n,"where",s,"in"===o||"not-in"===o);var h=na.create(i,o,a);return function(t,e){if(e.g()){var n=Ca(t);if(null!==n&&!n.isEqual(e.field))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ia(t);null!==r&&Ag(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Jo(Xo.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new _p(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(_g),Cg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Be.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new fa(e,n);return function(t,e){if(null===Ia(t)){var n=Ca(t);null!==n&&Ag(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new _p(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ba(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(_g),Og=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Be.__extends)(e,t),e.prototype._apply=function(t){return new _p(t.firestore,t.converter,Ea(t._query,this.Gc,this.zc))},e}(_g),Sg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Be.__extends)(e,t),e.prototype._apply=function(t){var e=Eg(t,this.type,this.Hc,this.Jc);return new _p(t.firestore,t.converter,function(t,e){return new ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(_g),kg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Be.__extends)(e,t),e.prototype._apply=function(t){var e=Eg(t,this.type,this.Hc,this.Jc);return new _p(t.firestore,t.converter,function(t,e){return new ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(_g);function Eg(t,e,n,r){if(n[0]=Object(He.getModularInstance)(n[0]),n[0]instanceof lg)return function(t,e,n,r,i){if(!r)throw new Jo(Xo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Sa(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Bs(e,r.key));else{var c=r.data.field(u.field);if(Ts(c))throw new Jo(Xo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ha(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Qp(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Jo(Xo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Oa(t)&&-1!==c.indexOf("/"))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ys.fromString(c));if(!js.isDocumentKey(l))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new js(l);a.push(Bs(e,h))}else{var d=tg(n,r,c);a.push(d)}}return new ha(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Tg(t,e,n){if("string"==typeof(n=Object(He.getModularInstance)(n))){if(""===n)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Oa(e)&&-1!==n.indexOf("/"))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ys.fromString(n));if(!js.isDocumentKey(r))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Bs(t,new js(r))}if(n instanceof yp)return Bs(t,n._key);throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+pp(n)+".")}function xg(t,e){if(!Array.isArray(t)||0===t.length)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ag(t,e,n){if(!n.isEqual(e))throw new Jo(Xo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Rg=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ps(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ks(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Es(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw os()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ms(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Lp(ks(t.latitude),ks(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=xs(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(As(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Ss(t);return new fs(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ys.fromString(t);ss(yc(n));var r=new ep(n.get(1),n.get(3)),i=new js(n.popFirst(5));return r.isEqual(e)||ns("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Dg(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Ng=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Be.__extends)(e,t),e.prototype.convertBytes=function(t){return new Pp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new yp(this.firestore,null,e)},e}(Rg),jg=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Qp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Pg(t,this._firestore),i=Dg(r.converter,e,n),o=Hp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Xa.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Pg(t,this._firestore);return o="string"==typeof(e=Object(He.getModularInstance)(e))||e instanceof jp?Zp(this._dataReader,"WriteBatch.update",s._key,e,n,r):Jp(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Xa.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Pg(t,this._firestore);return this._mutations=this._mutations.concat(new du(e._key,Xa.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Jo(Xo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Pg(t,e){if((t=Object(He.getModularInstance)(t)).firestore!==e)throw new Jo(Xo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Mg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Be.__extends)(e,t),e.prototype.convertBytes=function(t){return new Pp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new yp(this.firestore,null,e)},e}(Rg);function Lg(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=gp(t,yp);var o=gp(t.firestore,xp),s=Qp(o);return Ug(o,[("string"==typeof(e=Object(He.getModularInstance)(e))||e instanceof jp?Zp(s,"updateDoc",t._key,e,n,r):Jp(s,"updateDoc",t._key,e)).toMutation(t._key,Xa.exists(!0))])}function Fg(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(He.getModularInstance)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Ep(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Ep(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof yp)c=gp(t.firestore,xp),l=ya(t._key.path),u={next:function(e){i[a]&&i[a](Vg(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=gp(t,_p);c=gp(f.firestore,xp),l=f._query;var p=new Mg(c);u={next:function(t){i[a]&&i[a](new mg(c,p,f,t))},error:i[a+1],complete:i[a+2]},yg(t._query)}return function(t,e,n,r){var i=this,o=new Ff(r),s=new zd(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(i,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return e=Fd,[4,Xf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(i,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return e=Ud,[4,Xf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Ap(c),l,h,u)}function Ug(t,e){return function(t,e){var n=this,r=new zc;return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(n,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return n=rf,[4,Yf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Ap(t),e)}function Vg(t,e,n){var r=n.docs.get(e._key),i=new Mg(t);return new pg(t,i,e._key,r,new fg(n.hasPendingWrites,n.fromCache),e.converter)}var qg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Be.__extends)(e,t),e.prototype.get=function(e){var n=this,r=Pg(e,this._firestore),i=new Mg(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new pg(n._firestore,i,r._key,t._document,new fg(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Qp(t)}return t.prototype.get=function(t){var e=this,n=Pg(t,this._firestore),r=new Ng(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return os();var i=t[0];if(i.isFoundDocument())return new lg(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new lg(e._firestore,r,n._key,null,n.converter);throw os()})},t.prototype.set=function(t,e,n){var r=Pg(t,this._firestore),i=Dg(r.converter,e,n),o=Hp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Pg(t,this._firestore);return o="string"==typeof(e=Object(He.getModularInstance)(e))||e instanceof jp?Zp(this._dataReader,"Transaction.update",s._key,e,n,r):Jp(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Pg(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Bg(){if("undefined"==typeof Uint8Array)throw new Jo(Xo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function zg(){if("undefined"==typeof atob)throw new Jo(Xo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Qg=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return zg(),new t(Pp.fromBase64String(e))},t.fromUint8Array=function(e){return Bg(),new t(Pp.fromUint8Array(e))},t.prototype.toBase64=function(){return zg(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Bg(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Hg=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Np(t=gp(t,xp));var n=Ap(t),r=t._freezeSettings(),i=new Mf;return Dp(n,i,new jf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Np(t=gp(t,xp));var e=Ap(t),n=t._freezeSettings(),r=new Mf;return Dp(e,r,new Pf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Jo(Xo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new zc;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Be.__awaiter)(e,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return Wc.yt()?[4,Wc.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(rh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Wg=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof ep||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=gp(t,vp))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&rs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(He.createMockUserToken)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Jo(Xo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new op(new rp(o,new jh(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Be.__awaiter)(e,void 0,void 0,function(){var e,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,Gf(t)];case 1:return e=r.sent(),[4,$f(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=as(t);return e.$r.delete(0),sd(e)}(n))]}})})})}(Ap(gp(this._delegate,xp)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Be.__awaiter)(e,void 0,void 0,function(){var e,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,Gf(t)];case 1:return e=r.sent(),[4,$f(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return(e=as(t)).$r.add(0),[4,ad(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Ap(gp(this._delegate,xp)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&hp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new zc;return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(e,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return e=lf,[4,Yf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Ap(gp(this._delegate,xp)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ff(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(n,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){as(t).Gr.add(e),e.next()},[4,Xf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(n,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){as(t).Gr.delete(e)},[4,Xf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Ap(t=gp(t,xp)),Ep(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Jo(Xo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new sm(this,Ip(this._delegate,t))}catch(t){throw Jg(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Xg(this,Cp(this._delegate,t))}catch(t){throw Jg(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new rm(this,function(t,e){if(t=gp(t,vp),cp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new _p(t,null,function(t){return new ba(ys.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Jg(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new zc;return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(n,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,function(t){return Wf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new qf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Ap(t),function(n){return e(new qg(t,n))})}(this._delegate,function(n){return t(new Kg(e,n))})},t.prototype.batch=function(){var t=this;return Ap(this._delegate),new $g(new jg(this._delegate,function(e){return Ug(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Jo(Xo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Jo(Xo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Gg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Be.__extends)(e,t),e.prototype.convertBytes=function(t){return new Qg(new Pp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Xg.Zc(e,this.firestore,null)},e}(Rg),Kg=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Gg(t)}return t.prototype.get=function(t){var e=this,n=am(t);return this._delegate.get(n).then(function(t){return new em(e._firestore,new pg(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=am(t);return n?(lp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=am(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Be.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=am(t);return this._delegate.delete(e),this},t}(),$g=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=am(t);return n?(lp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=am(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Be.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=am(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Yg=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new gg(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new nm(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Gg(e),n),i.set(n,o)),o},t}();Yg.eu=new WeakMap;var Xg=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Gg(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Jo(Xo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new yp(n._delegate,r,new js(e)))},t.Zc=function(e,n,r){return new t(n,new yp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new sm(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new sm(this.firestore,Ip(this._delegate,t))}catch(t){throw Jg(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(He.getModularInstance)(t))instanceof yp&&Op(this._delegate,t)},t.prototype.set=function(t,e){e=lp("DocumentReference.set",e);try{return function(t,e,n){t=gp(t,yp);var r=gp(t.firestore,xp),i=Dg(t.converter,e,n);return Ug(r,[Hp(Qp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Xa.none())])}(this._delegate,t,e)}catch(t){throw Jg(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Lg(this._delegate,t):Lg.apply(void 0,Object(Be.__spreadArray)([this._delegate,t,e],n))}catch(t){throw Jg(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ug(gp((t=this._delegate).firestore,xp),[new du(t._key,Xa.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Zg(e),i=tm(e,function(e){return new em(t.firestore,new pg(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Fg(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=gp(t,yp);var e=gp(t.firestore,xp),n=Ap(e),r=new Mg(e);return function(t,e){var n=this,r=new zc;return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(n,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=as(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Jo(Xo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Dd(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Kf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new pg(e,r,t._key,n,new fg(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=gp(t,yp);var e=gp(t.firestore,xp);return Jf(Ap(e),t._key,{source:"server"}).then(function(n){return Vg(e,t,n)})}(this._delegate):function(t){t=gp(t,yp);var e=gp(t.firestore,xp);return Jf(Ap(e),t._key).then(function(n){return Vg(e,t,n)})}(this._delegate)).then(function(t){return new em(e.firestore,new pg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Yg.tu(this.firestore,e):null))},t}();function Jg(t,e,n){return t.message=t.message.replace(e,n),t}function Zg(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ep(r))return r}return{}}function tm(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ep(t[0])?t[0]:Ep(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var em=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Xg(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return vg(this._delegate,t._delegate)},t}(),nm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Be.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(em),rm=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Gg(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,wg(this._delegate,function(t,e,n){var r=e,i=dg("where",t);return new Ig(i,r,n)}(e,n,r)))}catch(e){throw Jg(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,wg(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=dg("orderBy",t);return new Cg(r,n)}(e,n)))}catch(e){throw Jg(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,wg(this._delegate,function(t){return mp("limit",t),new Og("limit",t,"F")}(e)))}catch(e){throw Jg(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,wg(this._delegate,function(t){return mp("limitToLast",t),new Og("limitToLast",t,"L")}(e)))}catch(e){throw Jg(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,wg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sg("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Jg(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,wg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sg("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Jg(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,wg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kg("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Jg(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,wg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kg("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Jg(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Sp(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=gp(t,_p);var e=gp(t.firestore,xp),n=Ap(e),r=new Mg(e);return function(t,e){var n=this,r=new zc;return t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(n,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Be.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,vh(t,e,!0)];case 1:return a=u.sent(),r=new Yd(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Dd(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Kf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new mg(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=gp(t,_p);var e=gp(t.firestore,xp),n=Ap(e),r=new Mg(e);return Zf(n,t._query,{source:"server"}).then(function(n){return new mg(e,r,t,n)})}(this._delegate):function(t){t=gp(t,_p);var e=gp(t.firestore,xp),n=Ap(e),r=new Mg(e);return yg(t._query),Zf(n,t._query).then(function(n){return new mg(e,r,t,n)})}(this._delegate)).then(function(t){return new om(e.firestore,new mg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Zg(e),i=tm(e,function(e){return new om(t.firestore,new mg(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Fg(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Yg.tu(this.firestore,e):null))},t}(),im=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new nm(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),om=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new rm(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new nm(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new im(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new nm(n._firestore,r))})},t.prototype.isEqual=function(t){return vg(this._delegate,t._delegate)},t}(),sm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Be.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Xg(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Xg(this.firestore,void 0===t?Cp(this._delegate):Cp(this._delegate,t))}catch(t){throw Jg(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=gp(t.firestore,xp),r=Cp(t),i=Dg(t.converter,e);return Ug(n,[Hp(Qp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Xa.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Xg(e.firestore,t)})},e.prototype.isEqual=function(t){return Op(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Yg.tu(this.firestore,t):null))},e}(rm);function am(t){return gp(t,yp)}var um,cm,lm=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(jp.bind.apply(jp,Object(Be.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(ws.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(He.getModularInstance)(t))instanceof jp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),hm=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Kp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Wp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $p("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yp("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Xp("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),dm=n("/6Yf"),fm={Firestore:Wg,GeoPoint:Lp,Timestamp:fs,Blob:Qg,Transaction:Kg,WriteBatch:$g,DocumentReference:Xg,DocumentSnapshot:em,Query:rm,QueryDocumentSnapshot:nm,QuerySnapshot:om,CollectionReference:sm,FieldPath:lm,FieldValue:hm,setLogLevel:function(t){Zo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new dm.Component("firestore",function(t){return function(t,e){return new Wg(t,new xp(t,e),new Hg)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},fm)))})(um=Qe.default),um.registerVersion("@firebase/firestore","2.3.0"),(cm=Wg).prototype.loadBundle=function(t){return function(t,e){var n=Ap(t=gp(t,xp)),r=new Tp;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Uf(t,e)}(function(t,e){if(t instanceof Uint8Array)return Lf(t,e);if(t instanceof ArrayBuffer)return Lf(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,Jh(e));t.asyncQueue.enqueueAndForget(function(){return Object(Be.__awaiter)(i,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return e=Df,[4,Yf(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t._databaseId,e,r),r}(this._delegate,t)},cm.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue(function(){return Object(Be.__awaiter)(n,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=as(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Qe.getNamedQuery(t,e)})},[4,Kf(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(Ap(e=gp(e,xp)),n).then(function(t){return t?new _p(e,null,t.query):null})).then(function(t){return t?new rm(r,t):null})};var pm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gm=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(Be.__extends)(e,t),e}(Error),mm=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t;return Object(Be.__generator)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(um){return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function bm(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var vm,ym,_m,wm=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return bm(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?bm(t,function(t){return e.decode(t)}):t},t}(),Im=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new wm,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new mm(e,n),this.cancelAllRequests=new Promise(function(t){s.deleteService=function(){return t()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(um){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},t.prototype.getAppCheckToken=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t;return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype.call=function(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,d;return Object(Be.__generator)(this,function(f){switch(f.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=f.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new gm("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([Cm(u,this.postJSON(r,i,o)),c,Cm(u,this.cancelAllRequests)])];case 2:if(!(l=f.sent()))throw new gm("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!pm[a])return new gm("internal","internal");r=pm[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(um){}return"ok"===r?null:new gm(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new gm("internal","Response is not valid JSON object.");if(void 0===(d=l.json.data)&&(d=l.json.result),void 0===d)throw new gm("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}})})},t}();function Cm(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}vm=Qe.default,ym=fetch.bind(self),_m={Functions:Im},vm.INTERNAL.registerComponent(new dm.Component("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new Im(r,i,s,o,n,ym)},"PUBLIC").setServiceProps(_m).setMultipleInstances(!0)),Qe.default.registerVersion("@firebase/functions","0.6.8");var Om,Sm=n("nbvr"),km="w:0.4.26",Em=((Om={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Om["not-registered"]="Firebase Installation is not registered.",Om["installation-not-found"]="Firebase Installation not found.",Om["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Om["app-offline"]="Could not process request. Application offline.",Om["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Om),Tm=new He.ErrorFactory("installations","Installations",Em);function xm(t){return t instanceof He.FirebaseError&&t.code.includes("request-failed")}function Am(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Rm(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Dm(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,Tm.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function Nm(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function jm(t,e){var n=e.refreshToken,r=Nm(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function Pm(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function Mm(t,e){var n=e.fid;return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return e=Am(t),r=Nm(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:km})},[4,Pm(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Rm(s.authToken)}];case 3:return[4,Dm("Create Installation",o)];case 4:throw a.sent()}})})}function Lm(t){return new Promise(function(e){setTimeout(e,t)})}var Fm=/^[cdef][\w-]{21}$/;function Um(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(Be.__spreadArray)([],Object(Be.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Fm.test(e)?e:""}catch(n){return""}}function Vm(t){return t.appName+"!"+t.appId}var qm=new Map;function Bm(t,e){var n=Vm(t);zm(n,e),function(t,e){var n=Hm();n&&n.postMessage({key:t,fid:e}),Wm()}(n,e)}function zm(t,e){var n,r,i=qm.get(t);if(i)try{for(var o=Object(Be.__values)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Qm=null;function Hm(){return!Qm&&"BroadcastChannel"in self&&((Qm=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){zm(t.data.key,t.data.fid)}),Qm}function Wm(){0===qm.size&&Qm&&(Qm.close(),Qm=null)}var Gm,Km="firebase-installations-store",$m=null;function Ym(){return $m||($m=Object(Sm.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Km)}})),$m}function Xm(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return n=Vm(t),[4,Ym()];case 1:return r=a.sent(),i=r.transaction(Km,"readwrite"),[4,(o=i.objectStore(Km)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||Bm(t,e.fid),[2,e]}})})}function Jm(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return e=Vm(t),[4,Ym()];case 1:return n=i.sent(),[4,(r=n.transaction(Km,"readwrite")).objectStore(Km).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Zm(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Be.__generator)(this,function(u){switch(u.label){case 0:return n=Vm(t),[4,Ym()];case 1:return r=u.sent(),i=r.transaction(Km,"readwrite"),[4,(o=i.objectStore(Km)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||Bm(t,a.fid),[2,a]}})})}function tb(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,Zm(t,function(n){var r=function(t){return rb(t||{fid:Um(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Tm.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Mm(t,e)];case 1:return n=i.sent(),[2,Xm(t,n)];case 2:return xm(r=i.sent())&&409===r.customData.serverCode?[4,Jm(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Xm(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:eb(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function eb(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return[4,nb(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Lm(100)];case 3:return o.sent(),[4,nb(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,tb(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function nb(t){return Zm(t,function(t){if(!t)throw Tm.create("installation-not-found");return rb(t)})}function rb(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function ib(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,i,o,s,a;return Object(Be.__generator)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return Am(t)+"/"+n+"/authTokens:generate"}(n,e),i=jm(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:km}})},[4,Pm(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Rm(u.sent())];case 3:return[4,Dm("Generate Auth Token",a)];case 4:throw u.sent()}})})}function ob(t,e){return void 0===e&&(e=!1),Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return[4,Zm(t.appConfig,function(r){if(!ab(r))throw Tm.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,sb(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Lm(100)];case 3:return i.sent(),[4,sb(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ob(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw Tm.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(Be.__assign)(Object(Be.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,ib(t,e)];case 1:return n=o.sent(),i=Object(Be.__assign)(Object(Be.__assign)({},e),{authToken:n}),[4,Xm(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!xm(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Jm(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(Be.__assign)(Object(Be.__assign)({},e),{authToken:{requestStatus:0}}),[4,Xm(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function sb(t){return Zm(t,function(t){if(!ab(t))throw Tm.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(Be.__assign)(Object(Be.__assign)({},t),{authToken:{requestStatus:0}}):t})}function ab(t){return void 0!==t&&2===t.registrationStatus}function ub(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return[4,tb(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function cb(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return Am(t)+"/"+n}(t,e),r=jm(t,e),i={method:"DELETE",headers:r},[4,Pm(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,Dm("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function lb(t){return Tm.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new dm.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw lb("App Configuration");if(!t.name)throw lb("App Name");try{for(var r=Object(Be.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw lb(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,tb(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):ob(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return[4,ub(t.appConfig)];case 1:return n.sent(),[4,ob(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,Zm(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Tm.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Tm.create("app-offline");case 3:return[4,cb(e,n)];case 4:return r.sent(),[4,Jm(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){Hm();var n=Vm(t),r=qm.get(n);r||(r=new Set,qm.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Vm(t),r=qm.get(n);r&&(r.delete(e),0===r.size&&qm.delete(n),Wm())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.26")}(Qe.default);var hb=((Gm={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Gm["only-available-in-window"]="This method is available in a Window context.",Gm["only-available-in-sw"]="This method is available in a service worker context.",Gm["permission-default"]="The notification permission was not granted and dismissed instead.",Gm["permission-blocked"]="The notification permission was not granted and blocked instead.",Gm["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Gm["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Gm["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Gm["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Gm["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Gm["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Gm["token-update-no-token"]="FCM returned no token when updating the user to push.",Gm["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Gm["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Gm["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Gm["invalid-vapid-key"]="The public VAPID key must be a string.",Gm["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Gm),db=new He.ErrorFactory("messaging","Messaging",hb),fb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pb=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function gb(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(Be.__spreadArray)([],Object(Be.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mb(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var bb="fcm_token_details_db",vb="fcm_token_object_Store";function yb(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(bb))return[2,null];r.label=2;case 2:return e=null,[4,Object(Sm.openDb)(bb,5,function(r){return Object(Be.__awaiter)(n,void 0,void 0,function(){var n,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(vb)?[4,(n=r.transaction.objectStore(vb)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:gb(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:gb(o.auth),p256dh:gb(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:gb(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(Sm.deleteDb)(bb)];case 4:return r.sent(),[4,Object(Sm.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(Sm.deleteDb)("undefined")];case 6:return r.sent(),[2,_b(e)?e:null]}})})}function _b(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var wb="firebase-messaging-store",Ib=null;function Cb(){return Ib||(Ib=Object(Sm.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(wb)}})),Ib}function Ob(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return e=Eb(t),[4,Cb()];case 1:return[4,i.sent().transaction(wb).objectStore(wb).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,yb(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Sb(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function Sb(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return n=Eb(t),[4,Cb()];case 1:return r=o.sent(),[4,(i=r.transaction(wb,"readwrite")).objectStore(wb).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function kb(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return e=Eb(t),[4,Cb()];case 1:return n=i.sent(),[4,(r=n.transaction(wb,"readwrite")).objectStore(wb).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Eb(t){return t.appConfig.appId}function Tb(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return[4,Db(t)];case 1:n=a.sent(),r=Nb(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Rb(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),db.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw db.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw db.create("token-subscribe-no-token");return[2,o.token]}})})}function xb(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return[4,Db(t)];case 1:n=a.sent(),r=Nb(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Rb(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),db.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw db.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw db.create("token-update-no-token");return[2,o.token]}})})}function Ab(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return[4,Db(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Rb(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw db.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),db.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function Rb(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Db(t){var e=t.appConfig,n=t.installations;return Object(Be.__awaiter)(this,void 0,void 0,function(){var t;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function Nb(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==fb&&(n.web.applicationPubKey=e),n}function jb(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw db.create("permission-blocked");return[4,Fb(e,n)];case 1:return r=a.sent(),[4,Ob(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:gb(r.getKey("auth")),p256dh:gb(r.getKey("p256dh"))},i?[3,3]:[2,Lb(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,Ab(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,Lb(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,Mb({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function Pb(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,Ob(t)];case 1:return(n=i.sent())?[4,Ab(t,n.token)]:[3,4];case 2:return i.sent(),[4,kb(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function Mb(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,xb(e,t)];case 1:return r=s.sent(),i=Object(Be.__assign)(Object(Be.__assign)({},t),{token:r,createTime:Date.now()}),[4,Sb(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,Pb(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function Lb(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,Tb(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Sb(t,r)];case 2:return i.sent(),[2,r.token]}})})}function Fb(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mb(e)})]}})})}function Ub(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function Vb(t){return new Promise(function(e){setTimeout(e,t)})}var qb=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw db.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(Be.__awaiter)(this,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Ob(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:fb,r.label=2;case 2:return[2,jb(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return Pb(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw db.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw db.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw db.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw db.create("only-available-in-window")},t.prototype.onMessage=function(){throw db.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw db.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,Hb()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,Qb(n,e)]:(r=!1,e.notification?[4,Wb(Bb(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Vb(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(Be.__awaiter)(this,void 0,void 0,function(){var r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Pb(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Ob(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Pb(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,jb(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:fb)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Be.__generator)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(Ub(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,zb(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,Vb(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=pb.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function Bb(t){var e,n=Object(Be.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function zb(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Object(Be.__generator)(this,function(u){switch(u.label){case 0:return[4,Hb()];case 1:e=u.sent();try{for(n=Object(Be.__values)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function Qb(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=pb.PUSH_RECEIVED;try{for(var i=Object(Be.__values)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Hb(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Wb(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Gb=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===pb.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),Ub(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw db.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,jb(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=fb),[2]})})},t.prototype.updateSwReg=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw db.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),db.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Pb(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t;return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw db.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw db.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw db.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw db.create("invalid-sw-registration");if(this.swRegistration)throw db.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw db.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw db.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case pb.NOTIFICATION_CLICKED:return"notification_open";case pb.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function Kb(t){return db.create("missing-app-config-values",{valueName:t})}var $b={isSupported:Yb};function Yb(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Qe.default.INTERNAL.registerComponent(new dm.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Kb("App Configuration Object");if(!t.name)throw Kb("App Name");var r=t.options;try{for(var i=Object(Be.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw Kb(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Yb())throw db.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new qb(n):new Gb(n)},"PUBLIC").setServiceProps($b));var Xb="firebasestorage.googleapis.com",Jb=function(t){function e(n,r){var i=t.call(this,Zb(n),"Firebase Storage: "+r+" ("+Zb(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(Be.__extends)(e,t),e.prototype._codeEquals=function(t){return Zb(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(He.FirebaseError);function Zb(t){return"storage/"+t}function tv(){return new Jb("unknown","An unknown error occurred, please check the error payload for server response.")}function ev(){return new Jb("canceled","User canceled the upload/download.")}function nv(){return new Jb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rv(t){return new Jb("invalid-argument",t)}function iv(){return new Jb("app-deleted","The Firebase app was deleted.")}function ov(t){return new Jb("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sv(t,e){return new Jb("invalid-format","String does not match format '"+t+"': "+e)}function av(t){throw new Jb("internal-error","Internal error: "+t)}var uv={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},cv=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function lv(t,e){switch(t){case uv.RAW:return new cv(hv(e));case uv.BASE64:case uv.BASE64URL:return new cv(dv(t,e));case uv.DATA_URL:return new cv((n=new fv(e)).base64?dv(uv.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(um){throw sv(uv.DATA_URL,"Malformed data URL.")}return hv(e)}(n.rest),new fv(e).contentType)}var n;throw tv()}function hv(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function dv(t,e){switch(t){case uv.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw sv(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case uv.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw sv(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(um){throw sv(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var fv=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw sv(uv.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),pv={STATE_CHANGED:"state_changed"},gv={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mv(t){switch(t){case"running":case"pausing":case"canceling":return gv.RUNNING;case"paused":return gv.PAUSED;case"success":return gv.SUCCESS;case"canceled":return gv.CANCELED;case"error":default:return gv.ERROR}}var bv=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),vv=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=bv.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=bv.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=bv.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw av("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw av("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw av("cannot .getStatus() before sending");try{return this.xhr_.status}catch(um){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw av("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),yv=function(){function t(){}return t.prototype.createXhrIo=function(){return new vv},t}(),_v=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(um){return new t(e,"")}if(""===r.path)return r;throw new Jb("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===Xb?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new Jb("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),wv=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Iv(t){return"string"==typeof t||t instanceof String}function Cv(t){return Ov()&&t instanceof Blob}function Ov(){return"undefined"!=typeof Blob}function Sv(t,e,n,r){if(r<e)throw rv("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw rv("Invalid value for '"+t+"'. Expected "+n+" or less.")}function kv(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Ev(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Tv=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(um){o(um)}else null!==s?((r=tv()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?iv():ev():new Jb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new xv(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new xv(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===bv.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new xv(s,n))}else{var a=n.getErrorCode()===bv.ABORT;e(!1,new xv(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Be.__spreadArray)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Be.__spreadArray)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),xv=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Av(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Rv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Av();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Ov())return new Blob(t);throw new Jb("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Dv=function(){function t(t,e){var n=0,r="";Cv(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Cv(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Ov()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Rv.apply(null,r))}var i=e.map(function(t){return Iv(t)?lv(uv.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Nv(t){var e,n;try{e=JSON.parse(t)}catch(um){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function jv(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Pv(t,e){return e}var Mv=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Pv}}(),Lv=null;function Fv(){if(Lv)return Lv;var t=[];t.push(new Mv("bucket")),t.push(new Mv("generation")),t.push(new Mv("metageneration")),t.push(new Mv("name","fullPath",!0));var e=new Mv("name");e.xform=function(t,e){return function(t){return!Iv(t)||t.length<2?t:jv(t)}(e)},t.push(e);var n=new Mv("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Mv("timeCreated")),t.push(new Mv("updated")),t.push(new Mv("md5Hash",null,!0)),t.push(new Mv("cacheControl",null,!0)),t.push(new Mv("contentDisposition",null,!0)),t.push(new Mv("contentEncoding",null,!0)),t.push(new Mv("contentLanguage",null,!0)),t.push(new Mv("contentType",null,!0)),t.push(new Mv("metadata","customMetadata",!0)),Lv=t}function Uv(t,e,n){var r=Nv(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new _v(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Vv(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var qv=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function Bv(t){if(!t)throw tv()}function zv(t,e){return function(n,r){var i=Uv(t,r,e);return Bv(null!==i),i}}function Qv(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new Jb("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Jb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Jb("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Jb("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Hv(t){var e=Qv(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Jb("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Wv(t,e,n){var r=kv(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new qv(r,"GET",zv(t,n),i);return o.errorHandler=Hv(e),o}function Gv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Kv=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function $v(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(um){Bv(!1)}return Bv(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Yv=262144,Xv=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Jv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var Zv=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Fv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Gv(e,r,i),a={name:s.fullPath},u=kv(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Vv(s,n),h=new qv(u,"POST",function(t){var e;$v(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(um){Bv(!1)}return Bv(Iv(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Qv(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new qv(n,"POST",function(t){var e=$v(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(um){Bv(!1)}n||Bv(!1);var i=Number(n);return Bv(!isNaN(i)),new Kv(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Qv(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=Yv*this._chunkMultiplier,n=new Kv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new Kv(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Jb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw nv();var p=new qv(n,"POST",function(t,n){var i,s=$v(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?zv(e,o)(t,n):null,new Kv(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=Qv(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(um){return t._error=um,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){Yv*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=Wv(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Gv(e,r,i),c=Vv(u,n),l=Dv.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw nv();var h={name:u.fullPath},d=kv(o,t.host),f=t.maxUploadRetryTime,p=new qv(d,"POST",zv(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Qv(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=ev(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=mv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Xv(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(mv(this._state)){case gv.SUCCESS:Jv(this._resolve.bind(null,this.snapshot))();break;case gv.CANCELED:case gv.ERROR:Jv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(mv(this._state)){case gv.RUNNING:case gv.PAUSED:t.next&&Jv(t.next.bind(t,this.snapshot))();break;case gv.SUCCESS:t.complete&&Jv(t.complete.bind(t))();break;case gv.CANCELED:case gv.ERROR:t.error&&Jv(t.error.bind(t,this._error))();break;default:t.error&&Jv(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),ty=function(){function t(t,e){this._service=t,this._location=e instanceof _v?e:_v.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new _v(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return jv(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new _v(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw ov(t)},t}();function ey(t){var e={prefixes:[],items:[]};return ny(t,e).then(function(){return e})}function ny(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return[4,ry(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,ny(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function ry(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Sv("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=kv(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new qv(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Nv(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new _v(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new _v(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return Bv(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Qv(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function iy(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new _v(t._location.bucket,n);return new ty(t.storage,r)}function oy(t){return/^[A-Za-z]+:\/\//.test(t)}function sy(t,e){if(t instanceof cy){var n=t;if(null==n._bucket)throw new Jb("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ty(n,n._bucket);return null!=e?sy(r,e):r}if(void 0!==e){if(e.includes(".."))throw rv('`path` param cannot contain ".."');return iy(t,e)}return t}function ay(t,e){if(e&&oy(e)){if(t instanceof cy)return new ty(t,e);throw rv("To use ref(service, url), the first argument must be a Storage instance.")}return sy(t,e)}function uy(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:_v.makeFromBucketSpec(n,t)}var cy=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Xb,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_v.makeFromBucketSpec(i,this._host):uy(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?_v.makeFromBucketSpec(this._url,t):uy(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Sv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Sv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t;return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new ty(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new wv(iv());var i=function(t,e,n,r,i,o){var s=Ev(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Tv(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function ly(t,e){return ay(t=Object(He.getModularInstance)(t),e)}var hy=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),dy=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new hy(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new hy(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new hy(t,i,i._ref))}:{next:e.next?function(t){return e.next(new hy(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),fy=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new py(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new py(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),py=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return iy(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new dy(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Zv(t,new Dv(e),n)}(t=Object(He.getModularInstance)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=uv.RAW),this._throwIfRoot("putString");var r=lv(e,t),i=Object(Be.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new dy(new Zv(this._delegate,new Dv(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,ey(t=Object(He.getModularInstance)(t))).then(function(t){return new fy(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return ry(t=Object(He.getModularInstance)(t),e)}(this._delegate,t||void 0).then(function(t){return new fy(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Wv(t.storage,t._location,Fv()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(He.getModularInstance)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=kv(e.fullServerUrl(),t.host),o=Vv(n,r),s=t.maxOperationRetryTime,a=new qv(i,"PATCH",zv(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Hv(e),a}(t.storage,t._location,e,Fv()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=Object(He.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=kv(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new qv(r,"GET",function(t,e){return function(n,r){var i=Uv(t,r,e);return Bv(null!==i),function(t,e,n){var r=Nv(e);if(null===r)return null;if(!Iv(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return kv("/b/"+o(t.bucket)+"/o/"+o(r),n)+Ev({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=Hv(e),o}(t.storage,t._location,Fv()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new Jb("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(He.getModularInstance)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=kv(e.fullServerUrl(),t.host),r=new qv(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Hv(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(He.getModularInstance)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw ov(t)},t}(),gy=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(oy(t))throw rv("ref() expected a child path but got a URL, use refFromURL instead.");return new py(ly(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!oy(t))throw rv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_v.makeFromUrl(t,this._delegate.host)}catch(um){throw rv("refFromUrl() expected a valid full URL but got an invalid one.")}return new py(ly(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function my(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new gy(r,new cy(r,i,o,new yv,n,Qe.default.SDK_VERSION))}!function(t){var e={TaskState:gv,TaskEvent:pv,StringFormat:uv,Storage:cy,Reference:py};t.INTERNAL.registerComponent(new dm.Component("storage",my,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.2")}(Qe.default);var by,vy,yy,_y="0.4.12",wy=_y,Iy="FB-PERF-TRACE-MEASURE",Cy="_wt_",Oy="_fcp",Sy="_fid",ky="@firebase/performance/config",Ey="@firebase/performance/configexpire",Ty="Performance",xy=((by={})["trace started"]="Trace {$traceName} was started before.",by["trace stopped"]="Trace {$traceName} is not running.",by["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",by["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",by["no window"]="Window is not available.",by["no app id"]="App id is not available.",by["no project id"]="Project id is not available.",by["no api key"]="Api key is not available.",by["invalid cc log"]="Attempted to queue invalid cc event",by["FB not default"]="Performance can only start when Firebase app instance is the default one.",by["RC response not ok"]="RC response is not ok",by["invalid attribute name"]="Attribute name {$attributeName} is invalid.",by["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",by["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",by["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",by),Ay=new He.ErrorFactory("performance",Ty,xy),Ry=new We.Logger(Ty);Ry.logLevel=We.LogLevel.INFO;var Dy,Ny=function(){function t(t){if(this.window=t,!t)throw Ay.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(He.isIndexedDBAvailable)()||(Ry.info("IndexedDB is not supported by current browswer"),!1):(Ry.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===vy&&(vy=new t(yy)),vy},t}();function jy(t,e){var n=t.length-e.length;if(n<0||n>1)throw Ay.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Py,My=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=jy("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=jy("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Ay.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Ay.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Ay.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===Dy&&(Dy=new t),Dy},t}();function Ly(){return Py}var Fy=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),Uy=["firebase_","google_","ga_"],Vy=new RegExp("^[a-zA-Z]\\w*$");function qy(){var t=Ny.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function By(){switch(Ny.getInstance().document.visibilityState){case"visible":return Fy.VISIBLE;case"hidden":return Fy.HIDDEN;default:return Fy.UNKNOWN}}function zy(){var t=Ny.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Qy(t){if(!t)return t;var e=My.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Hy(e.tracesSamplingRate),e.logNetworkAfterSampling=Hy(e.networkRequestsSamplingRate),t}function Hy(t){return Math.random()<=t}var Wy,Gy=1;function Ky(){return Gy=2,Wy=Wy||function(){var t=Ny.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=My.getInstance().installationsService.getId()).then(function(t){Py=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=Ny.getInstance().localStorage;if(t){var e=t.getItem(Ey);if(e&&Number(e)>Date.now()){var n=t.getItem(ky);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(Qy(e),Promise.resolve()):function(t){return(e=My.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+My.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+My.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:My.getInstance().getAppId(),app_version:wy,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw Ay.create("RC response not ok")})}).catch(function(){Ry.info("Could not fetch config, will use default configs")});var e}(t).then(Qy).then(function(t){return function(t){var e=Ny.getInstance().localStorage;t&&e&&(e.setItem(ky,JSON.stringify(t)),e.setItem(Ey,String(Date.now()+60*My.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return $y()},function(){return $y()})}function $y(){Gy=3}var Yy,Xy=1e4,Jy=3,Zy=[],t_=!1;function e_(t){setTimeout(function(){var t,e;if(0!==Jy)return Zy.length?(e=(t=Zy.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=My.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||Ry.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=Xy;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Zy=Object(Be.__spreadArray)(Object(Be.__spreadArray)([],e),Zy),Ry.info("Retry transport request later.")),Jy=3,e_(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:My.getInstance().logSource,log_event:e},t).catch(function(){Zy=Object(Be.__spreadArray)(Object(Be.__spreadArray)([],t),Zy),Jy--,Ry.info("Tries left: "+Jy+"."),e_(Xy)})):e_(Xy)},t)}function n_(t){if(!t.eventTime||!t.message)throw Ay.create("invalid cc log");Zy=Object(Be.__spreadArray)(Object(Be.__spreadArray)([],Zy),[t])}function r_(t,e){var n;Yy||(n=s_,Yy=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n_({message:n.apply(void 0,t),eventTime:Date.now()})}),Yy(t,e)}function i_(t){var e=My.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Ny.getInstance().requiredApisAvailable()&&(t.isAuto&&By()!==Fy.VISIBLE||(3===Gy?o_(t):Ky().then(function(){return o_(t)},function(){return o_(t)})))}function o_(t){if(Ly()){var e=My.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return r_(t,1)},0)}}function s_(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:a_(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:a_(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function a_(){return{google_app_id:My.getInstance().getAppId(),app_instance_id:Ly(),web_app_info:{sdk_version:wy,page_url:Ny.getInstance().getUrl(),service_worker_status:qy(),visibility_state:By(),effective_connection_type:zy()},application_process_state:0}}var u_=["_fp",Oy,Sy],c_=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Ny.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Ay.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Ay.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),i_(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Ay.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Ay.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(Be.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}i_(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(Cy)&&u_.indexOf(i)>-1)&&i.startsWith("_"))throw Ay.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&Ry.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||Uy.some(function(t){return n.startsWith(t)})||!n.match(Vy)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw Ay.create("invalid attribute name",{attributeName:t});if(!i)throw Ay.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(Be.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=Ny.getInstance().getUrl();if(i){var o=new t(Cy+i,!0),s=Math.floor(1e3*Ny.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(Oy,Math.floor(1e3*u.startTime)),r&&o.putMetric(Sy,Math.floor(1e3*r))}i_(o)}},t.createUserTimingTrace=function(e){i_(new t(e,!1,e))},t}();function l_(t){var e=t;if(e&&void 0!==e.responseStart){var n=Ny.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=My.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return r_(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function h_(){Ly()&&(setTimeout(function(){return function(){var t=Ny.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){c_.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),c_.createOobTrace(e,n,t))})}else c_.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=Ny.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)l_(n[e]);t.setupObserver("resource",l_)}()},0),setTimeout(function(){return function(){for(var t=Ny.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)d_(n[e]);t.setupObserver("measure",d_)}()},0))}function d_(t){var e=t.name;e.substring(0,Iy.length)!==Iy&&c_.createUserTimingTrace(e)}var f_=function(){function t(t){this.app=t,Ny.getInstance().requiredApisAvailable()&&Object(He.validateIndexedDBOpenable)().then(function(t){t&&(t_||(e_(5500),t_=!0),Ky().then(h_,h_))}).catch(function(t){Ry.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new c_(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return My.getInstance().instrumentationEnabled},set:function(t){My.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return My.getInstance().dataCollectionEnabled},set:function(t){My.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new dm.Component("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw Ay.create("FB not default");if("undefined"==typeof window)throw Ay.create("no window");return function(t){yy=t}(window),My.getInstance().firebaseAppInstance=t,My.getInstance().installationsService=e,new f_(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",_y)}(Qe.default);var p_,g_="https://www.googletagmanager.com/gtag/js",m_=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),b_=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),v_=new We.Logger("@firebase/analytics");function y_(t,e,n,r,i,o){return Object(Be.__awaiter)(this,void 0,void 0,function(){var s,a,u,c;return Object(Be.__generator)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),v_.error(c),[3,8];case 8:return t(m_.CONFIG,i,o),[2]}})})}function __(t,e,n,r,i){return Object(Be.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return Object(Be.__generator)(this,function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=d.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);d.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return d.sent(),t(m_.EVENT,r,i||{}),[3,5];case 4:return h=d.sent(),v_.error(h),[3,5];case 5:return[2]}})})}var w_=((p_={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",p_["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",p_["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",p_["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",p_["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",p_["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",p_["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",p_["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',p_["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',p_),I_=new He.ErrorFactory("analytics","Analytics",w_),C_=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function O_(t){var e;return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Be.__generator)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw I_.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function S_(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=C_),Object(Be.__awaiter)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return Object(Be.__generator)(this,function(d){switch(d.label){case 0:e=t.appId,s=t.measurementId,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,k_(n,i)];case 2:return d.sent(),[3,4];case 3:if(a=d.sent(),s)return v_.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return d.trys.push([4,6,,7]),[4,O_(t)];case 5:return u=d.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof He.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=d.sent())){if(r.deleteThrottleMetadata(e),s)return v_.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Object(He.calculateBackoffMillis)(o,r.intervalMillis,30):Object(He.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),v_.debug("Calling attemptFetch again in "+l+" millis"),[2,S_(t,h,n,r)];case 7:return[2]}})})}function k_(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(I_.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var E_,T_,x_=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),A_={},R_=[],D_={},N_="dataLayer",j_="gtag",P_=!1;function M_(t){if(P_)throw I_.create("already-initialized");t.dataLayerName&&(N_=t.dataLayerName),t.gtagName&&(j_=t.gtagName)}var L_="analytics";function F_(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:if(Object(He.isBrowserExtension)())return[2,!1];if(!Object(He.areCookiesEnabled)())return[2,!1];if(!Object(He.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(He.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new dm.Component(L_,function(t){return function(t,e){!function(){var t=[];if(Object(He.isBrowserExtension)()&&t.push("This is a browser extension environment."),Object(He.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=I_.create("invalid-analytics-context",{errorInfo:e});v_.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw I_.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw I_.create("no-api-key");v_.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=A_[i])throw I_.create("already-exists",{id:i});if(!P_){n=N_,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(Be.__awaiter)(this,void 0,void 0,function(){var a;return Object(Be.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==m_.EVENT?[3,2]:[4,__(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==m_.CONFIG?[3,4]:[4,y_(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(m_.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),v_.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(A_,R_,D_,N_,j_);T_=o.wrappedGtag,E_=o.gtagCore,P_=!0}return A_[i]=function(t,e,n,r,i,o){return Object(Be.__awaiter)(this,void 0,void 0,function(){var s,a,u,c,l,h,d;return Object(Be.__generator)(this,function(f){switch(f.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=C_),Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return Object(Be.__generator)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw I_.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw I_.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new x_,setTimeout(function(){return Object(Be.__awaiter)(u,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){return a.abort(),[2]})})},6e4),[2,S_({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&v_.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return v_.error(t)}),e.push(s),a=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t;return Object(Be.__generator)(this,function(e){switch(e.label){case 0:return Object(He.isIndexedDBAvailable)()?[3,1]:(v_.warn(I_.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(He.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),v_.warn(I_.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=f.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(g_))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=g_+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(d={}).origin="firebase",d.update=!0,h=d,null!=l&&(h.firebase_id=l),i(m_.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,R_,D_,e,E_,N_),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Object(Be.__awaiter)(this,void 0,void 0,function(){var o,s;return Object(Be.__generator)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(m_.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(Be.__assign)(Object(Be.__assign)({},r),{send_to:o}),t(m_.EVENT,n,s),a.label=3;case 3:return[2]}})})})(T_,A_[i],t,e,n).catch(function(t){return v_.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(m_.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(m_.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(T_,A_[i],t,e).catch(function(t){return v_.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i;return Object(Be.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(m_.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(m_.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(T_,A_[i],t,e).catch(function(t){return v_.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(Be.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Be.__generator)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(m_.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(m_.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(T_,A_[i],t,e).catch(function(t){return v_.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(A_[i],t).catch(function(t){return v_.error(t)})},INTERNAL:{delete:function(){return delete A_[i],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:M_,EventName:b_,isSupported:F_})),t.INTERNAL.registerComponent(new dm.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(L_).getImmediate().logEvent}}catch(um){throw I_.create("interop-component-reg-failed",{reason:um})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.10")}(Qe.default);var U_,V_=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),q_=((U_={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",U_["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",U_["registration-api-key"]="Undefined API key. Check Firebase app initialization.",U_["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",U_["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",U_["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",U_["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",U_["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",U_["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",U_["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',U_["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',U_["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",U_["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",U_),B_=new He.ErrorFactory("remoteconfig","Remote Config",q_),z_=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m;return Object(Be.__generator)(this,function(b){switch(b.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=b.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===v&&(v=navigator),v.languages&&v.languages[0]||v.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),b.label=2;case 2:return b.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return b.sent(),[4,s];case 4:return u=b.sent(),[3,6];case 5:throw c=b.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),B_.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,d=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,b.label=7;case 7:return b.trys.push([7,9,,10]),[4,u.json()];case 8:return g=b.sent(),[3,10];case 9:throw m=b.sent(),B_.create("fetch-client-parse",{originalErrorMessage:m.message});case 10:f=g.entries,p=g.state,b.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw B_.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:d,config:f}]}var v})})},t}(),Q_=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),H_=["1","true","t","yes","y","on"],W_=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&H_.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),G_=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=We.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=We.LogLevel.SILENT;break;default:this._logger.logLevel=We.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e,n;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:t=new Q_,setTimeout(function(){return Object(Be.__awaiter)(r,void 0,void 0,function(){return Object(Be.__generator)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof He.FirebaseError&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){return Object(Be.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(Be.__assign)(Object(Be.__assign)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new W_("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new W_("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new W_("static"))},t}();function K_(t,e){var n=t.target.error||void 0;return B_.create(e,{originalErrorMessage:n&&n.message})}var $_="app_namespace_store",Y_=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(K_(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore($_,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([$_],"readonly").objectStore($_),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(K_(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(um){i(B_.create("storage-get",{originalErrorMessage:um&&um.message}))}})]}})})},t.prototype.set=function(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function(){var n,r=this;return Object(Be.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([$_],"readwrite").objectStore($_),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(K_(t,"storage-set"))},u.onsuccess=function(){i()}}catch(um){o(B_.create("storage-set",{originalErrorMessage:um&&um.message}))}})]}})})},t.prototype.delete=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(Be.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([$_],"readwrite").objectStore($_),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(K_(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(um){i(B_.create("storage-delete",{originalErrorMessage:um&&um.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),X_=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(Be.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function J_(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(B_.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var Z_,tw=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(Be.__awaiter)(this,void 0,void 0,function(){var e;return Object(Be.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(Be.__awaiter)(this,void 0,void 0,function(){var e,i,o;return Object(Be.__generator)(this,function(s){switch(s.label){case 0:return[4,J_(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof He.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(He.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),ew="@firebase/remote-config";(Z_=Qe.default).INTERNAL.registerComponent(new dm.Component("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw B_.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw B_.create("registration-project-id");if(!a)throw B_.create("registration-api-key");if(!u)throw B_.create("registration-app-id");var c=new Y_(u,r.name,n=n||"firebase"),l=new X_(c),h=new We.Logger(ew);h.logLevel=We.LogLevel.ERROR;var d=new z_(i,Z_.SDK_VERSION,n,s,a,u),f=new tw(d,c),p=new V_(f,c,l,h),g=new G_(r,p,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),Z_.registerVersion(ew,"0.1.37"),n("X8/r"),Qe.default.registerVersion("firebase","8.6.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Qe.default.registerVersion("firebase","8.6.1");class nw{constructor(t,e,n,r,i,o,s,a,u,c,l,h,d){this.entryType=t,this.start=e,this.destination=n,this.startDate=r,this.startTime=i,this.description=o,this.price=s,this.transportType=a,this.length=u,this.width=c,this.height=l,this.cubicmeter=this.getCubicMeter(),this.seats=h,this.trackingStatus=d}setUserId(t){this.userId=t}getUserId(){return this.userId}getCubicMeter(){return this.length*this.width*this.height/1e6}setEntryId(t){this.entryId=t}setFirstName(t){this.firstName=t}setLastName(t){this.lastName=t}}class rw{getUserId(){return this.userId}setUserId(t){this.userId=t}getTransportType(){return this.transportType}setTransportType(t){this.transportType=t}getBrand(){return this.brand}setBrand(t){this.brand=t}getYearOfManufacture(){return this.yearOfManufacture}setYearOfManufacture(t){this.yearOfManufacture=t}getNumberOfSeats(){return this.numberOfSeats}setNumberOfSeats(t){this.numberOfSeats=t}getLength(){return this.length}setLength(t){this.length=t}getHeight(){return this.height}setHeight(t){this.height=t}getWidth(){return this.width}setWidth(t){this.width=t}setVehicleId(t){this.vehicleId=t}}class iw{constructor(t,e,n,r){this.rating=t,this.title=e,this.description=n,this.bookingId=r}setBookingId(t){this.bookingId=t}}var ow=n("D0XW"),sw=n("bHdf");function aw(...t){return Object(sw.a)(1)(Object(Yt.a)(...t))}var uw=n("z+Ro");function cw(...t){const e=t[t.length-1];return Object(uw.a)(e)?(t.pop(),n=>aw(t,n,e)):e=>aw(t,e)}function lw(){return t=>t.lift(new hw)}class hw{call(t,e){return e.subscribe(new dw(t))}}class dw extends pe.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function fw(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new pw(t,e,n))}}class pw{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new gw(t,this.accumulator,this.seed,this.hasSeed))}}class gw extends pe.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function mw(t,e){return n=>n.lift(new bw(t,e))}class bw{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new vw(t,this.compare,this.keySelector))}}class vw extends pe.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var yw=n("Jgta");function _w(t,e){return function(t,e=ow.b){return new Xt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function ww(t,e){return _w(t,e).pipe(Object(ee.a)(t=>({payload:t,type:"query"})))}function Iw(t,e){return ww(t,e).pipe(cw(void 0),lw(),Object(ee.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Cw(t,e,n){return Iw(t,n).pipe(fw((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ow(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ow(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ow(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),mw(),Object(ee.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Ow(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Sw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class kw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Iw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(ee.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(cw(void 0),lw(),ge(([t,e])=>e.length>0||!t),Object(ee.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(fw((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Sw(t);return Cw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ww(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ee.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Jt.a)(this.query.get(t)).pipe(Object(te.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ew(this.ref.doc(t),this.afs)}}class Ew{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Nw(n,e);return new kw(r,i,this.afs)}snapshotChanges(){return _w(this.ref,this.afs.schedulers.outsideAngular).pipe(cw(void 0),lw(),Object(ee.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(ee.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Jt.a)(this.ref.get(t)).pipe(Object(te.b)(this.afs.schedulers.insideAngular))}}class Tw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Iw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ee.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ge(t=>t.length>0),this.afs.keepUnstableUntilFirst):Iw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(fw((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Sw(t);return Cw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ww(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ee.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Jt.a)(this.query.get(t)).pipe(Object(te.b)(this.afs.schedulers.insideAngular))}}const xw=new r.r("angularfire2.enableFirestorePersistence"),Aw=new r.r("angularfire2.firestore.persistenceSettings"),Rw=new r.r("angularfire2.firestore.settings"),Dw=new r.r("angularfire2.firestore.use-emulator");function Nw(t,e=(t=>t)){return{query:e(t),ref:t}}let jw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new je.d(o),this.keepUnstableUntilFirst=Object(je.h)(this.schedulers);const c=Object(je.g)(t,o,e);!yw.a.auth&&u&&Object(je.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(je.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!mt(i)){const e=()=>{try{return Object(Jt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(um){return"undefined"!=typeof console&&console.warn(um),Object(Yt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Yt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Nw(n,e),o=this.schedulers.ngZone.run(()=>r);return new kw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Tw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Ew(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(je.c),r.Yb(je.b,8),r.Yb(xw,8),r.Yb(Rw,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Aw,8),r.Yb(Dw,8),r.Yb(Pe,8))},t.\u0275prov=r.Ib({factory:function(){return new t(r.Yb(je.c),r.Yb(je.b,8),r.Yb(xw,8),r.Yb(Rw,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Aw,8),r.Yb(Dw,8),r.Yb(Pe,8))},token:t,providedIn:"any"}),t})(),Pw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:xw,useValue:!0},{provide:Aw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[jw]}),t})();class Mw extends $t.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ue.a;return this._value}next(t){super.next(this._value=t)}}var Lw=n("DH7j");class Fw extends pe.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Uw extends pe.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Vw=n("SeVD");function qw(t,e,n,r,i=new Uw(t,n,r)){if(!i.closed)return e instanceof Xt.a?e.subscribe(i):Object(Vw.a)(e)(i)}var Bw=n("yCtX");const zw={};function Qw(...t){let e,n;return Object(uw.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Lw.a)(t[0])&&(t=t[0]),Object(Bw.a)(t,n).lift(new Hw(e))}class Hw{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ww(t,this.resultSelector))}}class Ww extends Fw{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(zw),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(qw(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===zw?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Gw(t){return new Xt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Jt.a)(n):Object(ye.b)()).subscribe(e)})}var Kw=n("EQ5u");function $w(t){return function(e){const n=new Yw(t),r=e.lift(n);return n.caught=r}}class Yw{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Xw(t,this.selector,this.caught))}}class Xw extends ne.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new ne.a(this);this.add(r);const i=Object(ne.c)(n,r);i!==r&&this.add(i)}}}var Jw=n("5+tZ");function Zw(t,e){return Object(Jw.a)(t,e,1)}function tI(t){return function(e){return 0===t?Object(ye.b)():e.lift(new eI(t))}}class eI{constructor(t){if(this.total=t,this.total<0)throw new ve}call(t,e){return e.subscribe(new nI(t,this.total))}}class nI extends pe.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var rI=n("vkgz"),iI=n("x+ZX");class oI{constructor(t){this.callback=t}call(t,e){return e.subscribe(new sI(t,this.callback))}}class sI extends pe.a{constructor(t,e){super(t),this.add(new ae.a(e))}}class aI{constructor(t,e){this.id=t,this.url=e}}class uI extends aI{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cI extends aI{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lI extends aI{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hI extends aI{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dI extends aI{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fI extends aI{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pI extends aI{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gI extends aI{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mI extends aI{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bI{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vI{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yI{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _I{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wI{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class II{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CI{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const OI="primary";class SI{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function kI(t){return new SI(t)}function EI(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function TI(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function xI(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!AI(t[i],e[i]))return!1;return!0}function AI(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function RI(t){return Array.prototype.concat.apply([],t)}function DI(t){return t.length>0?t[t.length-1]:null}function NI(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function jI(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(Jt.a)(Promise.resolve(t)):Object(Yt.a)(t)}function PI(t,e,n){return n?function(t,e){return xI(t,e)}(t.queryParams,e.queryParams)&&MI(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>AI(t[n],e[n]))}(t.queryParams,e.queryParams)&&LI(t.root,e.root)}function MI(t,e){if(!BI(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!MI(t.children[n],e.children[n]))return!1}return!0}function LI(t,e){return FI(t,e,e.segments)}function FI(t,e,n){if(t.segments.length>n.length)return!!BI(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!BI(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!LI(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!BI(t.segments,r)&&!!t.children.primary&&FI(t.children.primary,e,i)}}class UI{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kI(this.queryParams)),this._queryParamMap}toString(){return HI.serialize(this)}}class VI{constructor(t,e){this.segments=t,this.children=e,this.parent=null,NI(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return WI(this)}}class qI{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=kI(this.parameters)),this._parameterMap}toString(){return ZI(this)}}function BI(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class zI{}class QI{parse(t){const e=new iC(t);return new UI(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${GI(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${$I(e)}=${$I(t)}`).join("&"):`${$I(e)}=${$I(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const HI=new QI;function WI(t){return t.segments.map(t=>ZI(t)).join("/")}function GI(t,e){if(!t.hasChildren())return WI(t);if(e){const e=t.children.primary?GI(t.children.primary,!1):"",n=[];return NI(t.children,(t,e)=>{e!==OI&&n.push(`${e}:${GI(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return NI(t.children,(t,r)=>{r===OI&&(n=n.concat(e(t,r)))}),NI(t.children,(t,r)=>{r!==OI&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===OI?[GI(t.children.primary,!1)]:[`${n}:${GI(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${WI(t)}/${e[0]}`:`${WI(t)}/(${e.join("//")})`}}function KI(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $I(t){return KI(t).replace(/%3B/gi,";")}function YI(t){return KI(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function XI(t){return decodeURIComponent(t)}function JI(t){return XI(t.replace(/\+/g,"%20"))}function ZI(t){return`${YI(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${YI(t)}=${YI(e[t])}`).join("")}`;var e}const tC=/^[^\/()?;=#]+/;function eC(t){const e=t.match(tC);return e?e[0]:""}const nC=/^[^=?&#]+/,rC=/^[^?&#]+/;class iC{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new VI([],{}):new VI([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new VI(t,e)),n}parseSegment(){const t=eC(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new qI(XI(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=eC(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=eC(this.remaining);t&&(n=t,this.capture(n))}t[XI(e)]=XI(n)}parseQueryParam(t){const e=function(t){const e=t.match(nC);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(rC);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=JI(e),i=JI(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=eC(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=OI);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new VI([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class oC{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=sC(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=sC(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=aC(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return aC(t,this._root).map(t=>t.value)}}function sC(t,e){if(t===e.value)return e;for(const n of e.children){const e=sC(t,n);if(e)return e}return null}function aC(t,e){if(t===e.value)return[e];for(const n of e.children){const r=aC(t,n);if(r.length)return r.unshift(e),r}return[]}class uC{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function cC(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class lC extends oC{constructor(t,e){super(t),this.snapshot=e,mC(this,t)}toString(){return this.snapshot.toString()}}function hC(t,e){const n=function(t,e){const n=new pC([],{},{},"",{},OI,e,null,t.root,-1,{});return new gC("",new uC(n,[]))}(t,e),r=new Mw([new qI("",{})]),i=new Mw({}),o=new Mw({}),s=new Mw({}),a=new Mw(""),u=new dC(r,i,s,a,o,OI,e,n.root);return u.snapshot=n.root,new lC(new uC(u,[]),n)}class dC{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(ee.a)(t=>kI(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(ee.a)(t=>kI(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fC(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class pC{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kI(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kI(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gC extends oC{constructor(t,e){super(e),this.url=t,mC(this,e)}toString(){return bC(this._root)}}function mC(t,e){e.value._routerState=t,e.children.forEach(e=>mC(t,e))}function bC(t){const e=t.children.length>0?` { ${t.children.map(bC).join(", ")} } `:"";return`${t.value}${e}`}function vC(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,xI(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),xI(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!xI(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),xI(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function yC(t,e){return xI(t.params,e.params)&&function(t,e){return BI(t,e)&&t.every((t,n)=>xI(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||yC(t.parent,e.parent))}function _C(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return _C(t,e,r);return _C(t,e)})}(t,e,n);return new uC(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return wC(e,t),t}}const n=new dC(new Mw((r=e.value).url),new Mw(r.params),new Mw(r.queryParams),new Mw(r.fragment),new Mw(r.data),r.outlet,r.component,r),i=e.children.map(e=>_C(t,e));return new uC(n,i)}var r}function wC(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)wC(t.children[n],e.children[n])}function IC(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function CC(t){return"object"==typeof t&&null!=t&&t.outlets}function OC(t,e,n,r,i){let o={};return r&&NI(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new UI(n.root===t?e:SC(n.root,t,e),o,i)}function SC(t,e,n){const r={};return NI(t.children,(t,i)=>{r[i]=t===e?n:SC(t,e,n)}),new VI(t.segments,r)}class kC{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&IC(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(CC);if(r&&r!==DI(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class EC{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function TC(t,e,n){if(t||(t=new VI([],{})),0===t.segments.length&&t.hasChildren())return xC(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(CC(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!NC(a,u,e))return o;r+=2}else{if(!NC(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new VI(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new VI(t.segments.slice(r.pathIndex),t.children),xC(e,0,i)}return r.match&&0===i.length?new VI(t.segments,{}):r.match&&!t.hasChildren()?AC(t,e,n):r.match?xC(t,0,i):AC(t,e,n)}function xC(t,e,n){if(0===n.length)return new VI(t.segments,{});{const r=function(t){return CC(t[0])?t[0].outlets:{[OI]:t}}(n),i={};return NI(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=TC(t.children[r],e,n))}),NI(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new VI(t.segments,i)}}function AC(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(CC(o)){const t=RC(o.outlets);return new VI(r,t)}if(0===i&&IC(n[0])){r.push(new qI(t.segments[e].path,DC(n[0]))),i++;continue}const s=CC(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&IC(a)?(r.push(new qI(s,DC(a))),i+=2):(r.push(new qI(s,{})),i++)}return new VI(r,{})}function RC(t){const e={};return NI(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=AC(new VI([],{}),0,t))}),e}function DC(t){const e={};return NI(t,(t,n)=>e[n]=`${t}`),e}function NC(t,e,n){return t==n.path&&xI(e,n.parameters)}class jC{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),vC(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=cC(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),NI(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=cC(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=cC(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new II(t.value.snapshot))}),t.children.length&&this.forwardEvent(new _I(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(vC(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),PC(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function PC(t){vC(t.value),t.children.forEach(PC)}class MC{constructor(t,e){this.routes=t,this.module=e}}function LC(t){return"function"==typeof t}function FC(t){return t instanceof UI}const UC=Symbol("INITIAL_VALUE");function VC(){return re(t=>Qw(t.map(t=>t.pipe(_e(1),cw(UC)))).pipe(fw((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==UC)return t;if(r===UC&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||FC(r))return r}return t},t)},UC),ge(t=>t!==UC),Object(ee.a)(t=>FC(t)?t:!0===t),_e(1)))}let qC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:function(){return[MO]},encapsulation:2}),t})();function BC(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];zC(r,QC(e,r))}}function zC(t,e){t.children&&BC(t.children,e)}function QC(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function HC(t){const e=t.children&&t.children.map(HC),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==OI&&(n.component=qC),n}function WC(t){return t.outlet||OI}function GC(t,e){const n=t.filter(t=>WC(t)===e);return n.push(...t.filter(t=>WC(t)!==e)),n}const KC={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $C(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},KC):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||TI)(n,t,e);if(!i)return Object.assign({},KC);const o={};NI(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function YC(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>XC(t,e,n)&&WC(n)!==OI)}(t,n,r)){const i=new VI(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&WC(o)!==OI){const n=new VI([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[WC(o)]=n}return i}(t,e,r,new VI(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>XC(t,e,n))}(t,n,r)){const o=new VI(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(XC(t,n,a)&&!i[WC(a)]){const n=new VI([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[WC(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new VI(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function XC(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function JC(t,e,n,r){return!!(WC(t)===r||r!==OI&&XC(e,n,t))&&("**"===t.path||$C(e,t,n).matched)}function ZC(t,e,n){return 0===e.length&&!t.children[n]}class tO{constructor(t){this.segmentGroup=t||null}}class eO{constructor(t){this.urlTree=t}}function nO(t){return new Xt.a(e=>e.error(new tO(t)))}function rO(t){return new Xt.a(e=>e.error(new eO(t)))}function iO(t){return new Xt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class oO{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=YC(this.urlTree.root,[],[],this.config).segmentGroup,e=new VI(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,OI).pipe(Object(ee.a)(t=>this.createUrlTree(sO(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe($w(t=>{if(t instanceof eO)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof tO)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,OI).pipe(Object(ee.a)(e=>this.createUrlTree(sO(e),t.queryParams,t.fragment))).pipe($w(t=>{if(t instanceof tO)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new VI([],{[OI]:t}):t;return new UI(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(ee.a)(t=>new VI([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Jt.a)(r).pipe(Zw(r=>{const i=n.children[r],o=GC(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(ee.a)(t=>({segment:t,outlet:r})))}),fw((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ge((e,n)=>t(e,n,r)):Ae.a,tI(1),n?Ce(e):ke(()=>new fe))}())}expandSegment(t,e,n,r,i,o){return Object(Jt.a)(n).pipe(Zw(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe($w(t=>{if(t instanceof tO)return Object(Yt.a)(null);throw t}))),Re(t=>!!t),$w((t,n)=>{if(t instanceof fe||"EmptyError"===t.name){if(ZC(e,r,i))return Object(Yt.a)(new VI([],{}));throw new tO(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return JC(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):nO(e):nO(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?rO(i):this.lineralizeSegments(n,i).pipe(Object(Jw.a)(n=>{const i=new VI(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=$C(e,r,i);if(!s)return nO(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?rO(l):this.lineralizeSegments(r,l).pipe(Object(Jw.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(Yt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(ee.a)(t=>(n._loadedConfig=t,new VI(r,{})))):Object(Yt.a)(new VI(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=$C(e,n,r);if(!o)return nO(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Jw.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=YC(e,s,u,o),l=new VI(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(ee.a)(t=>new VI(s,t)));if(0===o.length&&0===c.length)return Object(Yt.a)(new VI(s,{}));const h=WC(n)===i;return this.expandSegment(r,l,o,c,h?OI:i,!0).pipe(Object(ee.a)(t=>new VI(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Yt.a)(new MC(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Yt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Jw.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(ee.a)(t=>(e._loadedConfig=t,t))):function(t){return new Xt.a(e=>e.error(EI(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Yt.a)(new MC([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Yt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&LC(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!LC(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return jI(o)});return Object(Yt.a)(i).pipe(VC(),Object(rI.a)(t=>{if(!FC(t))return;const e=EI(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(ee.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Yt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return iO(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new UI(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return NI(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return NI(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new VI(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function sO(t){const e={};for(const n of Object.keys(t.children)){const r=sO(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new VI(t.segments.concat(e.segments),e.children)}return t}(new VI(t.segments,e))}class aO{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class uO{constructor(t,e){this.component=t,this.route=e}}function cO(t,e,n){const r=t._root;return hO(r,e?e._root:null,n,[r.value])}function lO(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function hO(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=cC(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!BI(t.url,e.url);case"pathParamsOrQueryParamsChange":return!BI(t.url,e.url)||!xI(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yC(t,e)||!xI(t.queryParams,e.queryParams);case"paramsChange":default:return!yC(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new aO(r)):(o.data=s.data,o._resolvedData=s._resolvedData),hO(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new uO(a.outlet.component,s))}else s&&dO(e,a,i),i.canActivateChecks.push(new aO(r)),hO(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),NI(o,(t,e)=>dO(t,n.getContext(e),i)),i}function dO(t,e,n){const r=cC(t),i=t.value;NI(r,(t,r)=>{dO(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new uO(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class fO{}function pO(t){return new Xt.a(e=>e.error(t))}class gO{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=YC(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,OI);if(null===e)return null;const n=new pC([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},OI,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new uC(n,e),i=new gC(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=fC(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=GC(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=bO(n);return r.sort((t,e)=>t.value.outlet===OI?-1:e.value.outlet===OI?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return ZC(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!JC(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?DI(n).parameters:{};i=new pC(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_O(t),WC(t),t.component,t,vO(e),yO(e)+n.length,wO(t))}else{const r=$C(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new pC(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_O(t),WC(t),t.component,t,vO(e),yO(e)+o.length,wO(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=YC(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new uC(i,t)]}if(0===a.length&&0===c.length)return[new uC(i,[])];const l=WC(t)===r,h=this.processSegment(a,u,c,l?OI:r);return null===h?null:[new uC(i,h)]}}function mO(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function bO(t){const e=[],n=new Set;for(const r of t){if(!mO(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=bO(r.children);e.push(new uC(r.value,t))}return e.filter(t=>!n.has(t))}function vO(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yO(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function _O(t){return t.data||{}}function wO(t){return t.resolve||{}}function IO(t){return re(e=>{const n=t(e);return n?Object(Jt.a)(n).pipe(Object(ee.a)(()=>e)):Object(Yt.a)(e)})}class CO extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const OO=new r.r("ROUTES");class SO{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(ee.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new MC(RI(i.injector.get(OO,void 0,r.q.Self|r.q.Optional)).map(HC),i)}),$w(t=>{throw e._loader$=void 0,t}));return e._loader$=new Kw.a(n,()=>new $t.a).pipe(Object(iI.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(Jt.a)(this.loader.load(t)):jI(t()).pipe(Object(Jw.a)(t=>t instanceof r.w?Object(Yt.a)(t):Object(Jt.a)(this.compiler.compileModuleAsync(t))))}}class kO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new EO,this.attachRef=null}}class EO{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new kO,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class TO{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function xO(t){throw t}function AO(t,e,n){return e.parse("/")}function RO(t,e){return Object(Yt.a)(null)}let DO=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new $t.a,this.errorHandler=xO,this.malformedUriErrorHandler=AO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:RO,afterPreactivation:RO},this.urlHandlingStrategy=new TO,this.routeReuseStrategy=new CO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new UI(new VI([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new SO(s,a,t=>this.triggerEvent(new bI(t)),t=>this.triggerEvent(new vI(t))),this.routerState=hC(this.currentUrlTree,this.rootComponentType),this.transitions=new Mw({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ge(t=>0!==t.id),Object(ee.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),re(t=>{let n=!1,r=!1;return Object(Yt.a)(t).pipe(Object(rI.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),re(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Yt.a)(t).pipe(re(t=>{const n=this.transitions.getValue();return e.next(new uI(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ye.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,re(t=>function(t,e,n,r,i){return new oO(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(ee.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(rI.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Jw.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new gO(t,e,n,r,i,o).recognize();return null===s?pO(new fO):Object(Yt.a)(s)}catch(um){return pO(um)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(ee.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(rI.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new dI(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new uI(n,this.serializeUrl(r),i,o);e.next(a);const u=hC(r,this.rootComponentType).snapshot;return Object(Yt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ye.a}),IO(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(rI.a)(t=>{const e=new fI(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(ee.a)(t=>Object.assign(Object.assign({},t),{guards:cO(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Jw.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Yt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Jt.a)(t).pipe(Object(Jw.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Yt.a)(!0);const s=o.map(o=>{const s=lO(o,e,i);let a;if(function(t){return t&&LC(t.canDeactivate)}(s))a=jI(s.canDeactivate(t,e,n,r));else{if(!LC(s))throw new Error("Invalid CanDeactivate guard");a=jI(s(t,e,n,r))}return a.pipe(Re())});return Object(Yt.a)(s).pipe(VC())}(t.component,t.route,n,e,r)),Re(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Jw.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Jt.a)(e).pipe(Zw(e=>aw(function(t,e){return null!==t&&e&&e(new yI(t)),Object(Yt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new wI(t)),Object(Yt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Gw(()=>{const i=e.guards.map(i=>{const o=lO(i,e.node,n);let s;if(function(t){return t&&LC(t.canActivateChild)}(o))s=jI(o.canActivateChild(r,t));else{if(!LC(o))throw new Error("Invalid CanActivateChild guard");s=jI(o(r,t))}return s.pipe(Re())});return Object(Yt.a)(i).pipe(VC())}));return Object(Yt.a)(i).pipe(VC())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Yt.a)(!0);const i=r.map(r=>Gw(()=>{const i=lO(r,e,n);let o;if(function(t){return t&&LC(t.canActivate)}(i))o=jI(i.canActivate(e,t));else{if(!LC(i))throw new Error("Invalid CanActivate guard");o=jI(i(e,t))}return o.pipe(Re())}));return Object(Yt.a)(i).pipe(VC())}(t,e.route,n))),Re(t=>!0!==t,!0))}(r,o,t,e):Object(Yt.a)(n)),Object(ee.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(rI.a)(t=>{if(FC(t.guardsResult)){const e=EI(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new pI(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ge(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new lI(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),IO(t=>{if(t.guards.canActivateChecks.length)return Object(Yt.a)(t).pipe(Object(rI.a)(t=>{const e=new gI(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),re(t=>{let n=!1;return Object(Yt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Jw.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Yt.a)(t);let o=0;return Object(Jt.a)(n).pipe(Zw(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Yt.a)({});const o={};return Object(Jt.a)(i).pipe(Object(Jw.a)(i=>function(t,e,n,r){const i=lO(t,e,r);return jI(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(rI.a)(t=>{o[i]=t}))),tI(1),Object(Jw.a)(()=>Object.keys(o).length===i.length?Object(Yt.a)(o):ye.a))}(t._resolve,t,e,r).pipe(Object(ee.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),fC(t,n).resolve),null)))}(t.route,e,r,i)),Object(rI.a)(()=>o++),tI(1),Object(Jw.a)(e=>o===n.length?Object(Yt.a)(t):ye.a))})),Object(rI.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new lI(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(rI.a)(t=>{const e=new mI(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),IO(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ee.a)(t=>{const e=function(t,e,n){const r=_C(t,e._root,n?n._root:void 0);return new lC(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(rI.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(ee.a)(t=>(new jC(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(rI.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new lI(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new oI(i))),$w(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=FC(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new lI(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new hI(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Ta){t.reject(Ta)}}var i;return ye.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){BC(t),this.config=t.map(HC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return OC(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new kC(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return NI(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new kC(n,e,r)}(n);if(o.toRoot())return OC(e.root,new VI([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new EC(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new EC(t,t===e.root,0)}const r=IC(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new EC(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?xC(s.segmentGroup,s.index,o.commands):TC(s.segmentGroup,s.index,o.commands);return OC(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=FC(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(um){e=this.malformedUriErrorHandler(um,this.urlSerializer,t)}return e}isActive(t,e){if(FC(t))return PI(this.currentUrlTree,t,e);const n=this.parseUrl(t);return PI(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new cI(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.N),r.Yb(zI),r.Yb(EO),r.Yb(w),r.Yb(r.s),r.Yb(r.x),r.Yb(r.i),r.Yb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),NO=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new $t.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:PO(this.skipLocationChange),replaceUrl:PO(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:PO(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(DO),r.Mb(dC),r.Zb("tabindex"),r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.bc("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),jO=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new $t.a,this.subscription=t.events.subscribe(t=>{t instanceof cI&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:PO(this.skipLocationChange),replaceUrl:PO(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:PO(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(DO),r.Mb(dC),r.Mb(m))},t.\u0275dir=r.Hb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.bc("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ub("href",e.href,r.uc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function PO(t){return""===t||!!t}let MO=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||OI,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new LO(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(EO),r.Mb(r.Q),r.Mb(r.j),r.Zb("name"),r.Mb(r.h))},t.\u0275dir=r.Hb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class LO{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===dC?this.route:t===EO?this.childContexts:this.parent.get(t,e)}}class FO{}class UO{preload(t,e){return Object(Yt.a)(null)}}let VO=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new SO(e,n,e=>t.triggerEvent(new bI(e)),e=>t.triggerEvent(new vI(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ge(t=>t instanceof cI),Zw(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Jt.a)(n).pipe(Object(sw.a)(),Object(ee.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(Yt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Jw.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(DO),r.Yb(r.x),r.Yb(r.i),r.Yb(r.s),r.Yb(FO))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),qO=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof cI&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof CI&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new CI(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(DO),r.Yb(bt),r.Yb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const BO=new r.r("ROUTER_CONFIGURATION"),zO=new r.r("ROUTER_FORROOT_GUARD"),QO=[w,{provide:zI,useClass:QI},{provide:DO,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new DO(null,t,e,n,r,i,s,RI(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[zI,EO,w,r.s,r.x,r.i,OO,BO,[class{},new r.B],[class{},new r.B]]},EO,{provide:dC,useFactory:function(t){return t.routerState.root},deps:[DO]},{provide:r.x,useClass:r.K},VO,UO,class{preload(t,e){return e().pipe($w(()=>Object(Yt.a)(null)))}},{provide:BO,useValue:{enableTracing:!1}}];function HO(){return new r.z("Router",DO)}let WO=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[QO,YO(e),{provide:zO,useFactory:$O,deps:[[DO,new r.B,new r.J]]},{provide:BO,useValue:n||{}},{provide:m,useFactory:KO,deps:[a,[new r.p(v),new r.B],BO]},{provide:qO,useFactory:GO,deps:[DO,bt,BO]},{provide:FO,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:UO},{provide:r.z,multi:!0,useFactory:HO},[XO,{provide:r.d,multi:!0,useFactory:JO,deps:[XO]},{provide:tS,useFactory:ZO,deps:[XO]},{provide:r.b,multi:!0,useExisting:tS}]]}}static forChild(e){return{ngModule:t,providers:[YO(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(zO,8),r.Yb(DO,8))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();function GO(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new qO(t,e,n)}function KO(t,e,n={}){return n.useHash?new _(t,e):new y(t,e)}function $O(t){return"guarded"}function YO(t){return[{provide:r.a,multi:!0,useValue:t},{provide:OO,multi:!0,useValue:t}]}let XO=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new $t.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(DO),r=this.injector.get(BO);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Yt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(BO),n=this.injector.get(VO),i=this.injector.get(qO),o=this.injector.get(DO),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function JO(t){return t.appInitializer.bind(t)}function ZO(t){return t.bootstrapListener.bind(t)}const tS=new r.r("Router Initializer");class eS{constructor(t,e,n,r){this.entry=t,this.searcher=e,this.supplier=n,this.bookingDate=r}setBookingId(t){this.bookingId=t}}let nS=(()=>{class t{constructor(){this.ALERTS=[]}close(t){this.ALERTS.splice(this.ALERTS.indexOf(t),1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),rS=(()=>{class t{constructor(t,e,n,r){this.afs=t,this.auth=e,this.router=n,this.alertService=r,this.user=null,this.db=Qe.default.firestore(),this.bookingCollection=t.collection("booking"),this.auth.user.subscribe(t=>{t&&(this.user=t)})}getBooking(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){return(yield this.afs.collection("booking").doc(t).get().toPromise()).data()})}getSupplier(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=yield this.afs.collection("users").doc(t).get().toPromise(),n=[];return n.push(e.data()),n})}getRequest(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=yield this.afs.collection("open_requests").doc(t).get().toPromise();let n=[];return n.push(e.data()),n})}getEntry(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=yield this.afs.collection("entries").doc(t).get().toPromise();return this.entry=e.data(),{data:e.data(),id:e.id}})}createBooking(t,e,n){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const r=this.afs.collection("entries");let i=yield this.getEntry(t.entry),o=i.id;if(r.doc(o).update({}),"Ladefl\xe4che"==i.data.transportType&&"Angebot"==i.data.entryType)if(t.supplier=i.data.userId,t.searcher=this.user.uid,e<=i.data.cubicmeter)console.log("Ladefl\xe4che buchen: ",e),r.doc(o).update({cubicmeter:i.data.cubicmeter-e}).then(()=>{Qe.default.firestore().collection("booking").add(Object.assign({},t)).then(t=>{let e=t.id;Qe.default.firestore().collection("open_requests").doc(n).delete().then(()=>{this.router.navigate(["/tracking/booking/"+e])})})});else{const t={type:"danger",message:"Platz nicht mehr vorhanden"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}else if("Mitfahrgelegenheit"==i.data.transportType&&"Angebot"==i.data.entryType)if(t.supplier=i.data.userId,t.searcher=this.user.uid,e<=i.data.seats)console.log("Entry ",i),r.doc(o).update({seats:i.data.seats-e}).then(()=>{Qe.default.firestore().collection("booking").add(Object.assign({},t)).then(t=>{let e=t.id;Qe.default.firestore().collection("open_requests").doc(n).delete().then(()=>{this.router.navigate(["/tracking/booking/"+e])})})});else{const t={type:"danger",message:"Platz nicht mehr vorhanden!"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}else if("Ladefl\xe4che"==i.data.transportType&&"Gesuch"==i.data.entryType)if(t.supplier=this.user.uid,t.searcher=i.data.userId,e<=i.data.cubicmeter)console.log("Ladefl\xe4che buchen: ",e),r.doc(o).update({cubicmeter:i.data.cubicmeter-e}).then(()=>{Qe.default.firestore().collection("booking").add(Object.assign({},t)).then(t=>{let e=t.id;Qe.default.firestore().collection("open_requests").doc(n).delete().then(()=>{this.router.navigate(["/tracking/booking/"+e])})})});else{const t={type:"danger",message:"Platz nicht mehr vorhanden!"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}else if(t.supplier=this.user.uid,t.searcher=i.data.userId,e<=i.data.seats)console.log("Entry ",i),r.doc(o).update({seats:i.data.seats-e}).then(()=>{Qe.default.firestore().collection("booking").add(Object.assign({},t)).then(t=>{let e=t.id;Qe.default.firestore().collection("open_requests").doc(n).delete().then(()=>{this.router.navigate(["/tracking/booking/"+e])})})});else{const t={type:"danger",message:"Platz nicht mehr vorhanden!"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}})}getBookingByEntryId(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=[],n=this.db.collection("booking");return yield n.where("entry","==",t).get().then(t=>{t.forEach(t=>{e.push(new eS(t.data().entry,t.data().searcher,t.data().supplier,t.data().bookingDate))})}),e})}getBookingBySupplier(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=[],n=this.db.collection("booking");return yield n.where("supplier","==",t).get().then(t=>{t.forEach(t=>{const n=new eS(t.data().entry,t.data().searcher,t.data().supplier,t.data().bookingDate);n.setBookingId(t.id),e.push(n)})}),e})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(jw),r.Yb(qe),r.Yb(DO),r.Yb(nS))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),iS=(()=>{class t{constructor(t,e,n,r,i){this.afs=t,this.auth=e,this.location=n,this.router=r,this.bookingService=i,this.authState=null,this.user=null,this.firebaseUser=null,this.isLoggedIn=!1,this.currentUser=null,this.db=Qe.default.firestore(),this.auth.onAuthStateChanged(t=>{t?(this.authState=t,this.isLoggedIn=!0):this.isLoggedIn=!1}),this.auth.user.subscribe(t=>{t&&(this.currentUser=t)})}uploadProfilePicture(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const t=Qe.default.storage().ref().child(`profile_images/${this.file.name}`);return new Promise((e,n)=>{t.put(this.file).then(t=>{t.ref.getDownloadURL().then(t=>{e(t)}).catch(t=>{n(t)})})})})}register(t,e,n,r,i,o){return Object(Be.__awaiter)(this,void 0,void 0,function*(){this.file?this.uploadProfilePicture().then(s=>{this.createUser(t,e,n,r,i=s,o).catch(t=>{console.error(t)})}):this.createUser(t,e,n,r,i,o).catch(t=>{console.error(t)})})}createUser(t,e,n,r,i,o){return Object(Be.__awaiter)(this,void 0,void 0,function*(){Qe.default.auth().createUserWithEmailAndPassword(n,o).then(s=>{var a,u,c;void 0!==i&&(null===(a=s.user)||void 0===a||a.updateProfile({photoURL:i}));const l={id:null===(u=s.user)||void 0===u?void 0:u.uid,email:n,password:o,firstname:e,lastname:t,birthday:r,image:i||null};console.log(l),Qe.default.firestore().collection("users").doc(null===(c=s.user)||void 0===c?void 0:c.uid).set(l),this.router.navigate(["/"])}).catch(t=>{console.log(t.message)})})}login(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function*(){this.auth.signInWithEmailAndPassword(t,e).then(()=>{this.router.navigate(["/"])}).catch(t=>{console.log(t.message)})})}logout(){this.auth.signOut().then(()=>{this.router.navigate(["/"])}).catch(t=>{console.log(t.message)})}getcurrentUser(){let t;return new Promise((e,n)=>{Qe.default.auth().onAuthStateChanged(r=>{r&&Qe.default.firestore().collection("users").doc(r.uid).get().then(n=>{const r=n.data();r&&(t=new ze(r.id,r.email,r.password,r.firstname,r.lastname,r.birthday,r.image)),e(t)}).catch(t=>{n(t)})})})}getOffersFromCurrentUser(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=[],n=Qe.default.firestore().collection("entries");return yield n.where("userId","==",t).get().then(t=>{t.forEach(t=>{if("Angebot"===t.data().entryType){const n=new nw(t.data().entryType,t.data().start,t.data().destination,t.data().startDate,t.data().startTime,t.data().description,t.data().price,t.data().transportType,t.data().length,t.data().width,t.data().height,t.data().seats,t.data().trackingStatus);n.setEntryId(t.id),e.push(n)}})}),this.offers=e,this.offers})}getBookingsFromCurrentUser(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){Qe.default.firestore().collection("booking").where("searcher","==",t).get().then(t=>{t.forEach(t=>{const e=t.id,n=t.data().entry,r=[];return Qe.default.firestore().collection("entries").doc(n).get().then(t=>{const n=new nw(t.data().entryType,t.data().start,t.data().destination,t.data().startDate,t.data().startTime,t.data().description,t.data().price,t.data().transportType,t.data().length,t.data().width,t.data().height,t.data().seats,t.data().trackingStatus);n.setEntryId(e),r.push(n)}),this.bookingsFromSelectedUser=r,this.bookingsFromSelectedUser})})})}getVehiclesFromCurrentUser(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=[],n=this.db.collection("vehicles");return yield n.where("userId","==",t).get().then(t=>{t.forEach(t=>{const n=new rw;n.setVehicleId(t.id),n.setUserId(t.data().userId),n.setTransportType(t.data().transportType),n.setBrand(t.data().brand),n.setYearOfManufacture(t.data().yearOfManufacture),n.setNumberOfSeats(t.data().numberOfSeats),n.setLength(t.data().length),n.setHeight(t.data().height),n.setWidth(t.data().width),e.push(n)})}),this.vehicles=e,this.vehicles})}getUserByUserId(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){let e;const n=Qe.default.firestore().collection("users");return yield n.where("id","==",t).get().then(t=>{t.forEach(t=>{e=new ze(t.data().id,t.data().email,t.data().password,t.data().firstname,t.data().lastname,t.data().birthday,t.data().image)}),this.selectedUser=e}),this.selectedUser})}getOffersFromSelectedUser(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=[],n=Qe.default.firestore().collection("entries");return yield n.where("userId","==",t).get().then(t=>{t.forEach(t=>{"Angebot"===t.data().entryType&&e.push(new nw(t.data().entryType,t.data().start,t.data().destination,t.data().startDate,t.data().startTime,t.data().description,t.data().price,t.data().transportType,t.data().length,t.data().width,t.data().height,t.data().seats,t.data().trackingStatus))})}),this.offersFromSelectedUser=e,this.offersFromSelectedUser})}getRatingsFromSelectedUser(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){return new Promise((e,n)=>{Qe.default.firestore().collection("booking").where("supplier","==",t).get().then(t=>{t.forEach(t=>{const r=t.id,i=[];Qe.default.firestore().collection("rating").where("bookingId","==",r).get().then(t=>{t.forEach(t=>{i.push(new iw(t.data().rating,t.data().title,t.data().description))}),this.ratingsFromSelectedUser=i,console.log(this.ratingsFromSelectedUser),e(this.ratingsFromSelectedUser)}).catch(t=>{n(t)})})})})})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(jw),r.Yb(qe),r.Yb(w),r.Yb(DO),r.Yb(rS))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var oS=n("n6bG");function sS(t,e,n,r){return Object(oS.a)(n)&&(r=n,n=void 0),r?sS(t,e,n).pipe(Object(ee.a)(t=>Object(Lw.a)(t)?r(...t):r(t))):new Xt.a(r=>{aS(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function aS(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)aS(t[o],e,n,r,i)}r.add(o)}var uS=n("Y7HM");function cS(t=0,e,n){let r=-1;return Object(uS.a)(e)?r=Number(e)<1?1:Number(e):Object(uw.a)(e)&&(n=e),Object(uw.a)(n)||(n=ow.a),new Xt.a(e=>{const i=Object(uS.a)(t)?t:+t-n.now();return n.schedule(lS,i,{index:0,period:r,subscriber:e})})}function lS(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function hS(...t){if(1===t.length){if(!Object(Lw.a)(t[0]))return t[0];t=t[0]}return Object(Bw.a)(t,void 0).lift(new dS)}class dS{call(t,e){return e.subscribe(new fS(t))}}class fS extends Fw{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=qw(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}var pS=n("KqfI");const gS=new Xt.a(pS.a);var mS=n("Lhse");function bS(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(Bw.a)(t,void 0).lift(new vS(e))}class vS{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new yS(t,this.resultSelector))}}class yS extends pe.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(Lw.a)(t)?e.push(new wS(t)):e.push("function"==typeof t[mS.a]?new _S(t[mS.a]()):new IS(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class _S{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class wS{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[mS.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class IS extends ne.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[mS.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(ne.c)(this.observable,new ne.a(this))}}function CS(t){return e=>e.lift(new OS(t))}class OS{constructor(t){this.notifier=t}call(t,e){const n=new SS(t),r=Object(ne.c)(this.notifier,new ne.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class SS extends ne.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function kS(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new ES(t,n))}}class ES{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new TS(t,this.observables,this.project))}}class TS extends Fw{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(qw(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var xS=n("WMd4");class AS{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new RS(t,this.delay,this.scheduler))}}class RS extends pe.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(RS.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new DS(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(xS.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(xS.a.createComplete()),this.unsubscribe()}}class DS{constructor(t,e){this.time=t,this.notification=e}}n("w1tV");var NS=n("XoHu");function jS(t,e){return new Xt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Jt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class PS{}const MS=new r.r("NgValueAccessor"),LS={provide:MS,useExisting:Object(r.U)(()=>US),multi:!0},FS=new r.r("CompositionEventMode");let US=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l),r.Mb(FS,8))},t.\u0275dir=r.Hb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.bc("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([LS])]}),t})();const VS=new r.r("NgValidators"),qS=new r.r("NgAsyncValidators");function BS(t){return null!=t}function zS(t){const e=Object(r.rb)(t)?Object(Jt.a)(t):t;return Object(r.qb)(e),e}function QS(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function HS(t,e){return e.map(e=>e(t))}function WS(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function GS(t){return null!=t?function(t){if(!t)return null;const e=t.filter(BS);return 0==e.length?null:function(t){return QS(HS(t,e))}}(WS(t)):null}function KS(t){return null!=t?function(t){if(!t)return null;const e=t.filter(BS);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Lw.a)(e))return jS(e,null);if(Object(NS.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return jS(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return jS(t=1===t.length&&Object(Lw.a)(t[0])?t[0]:t,null).pipe(Object(ee.a)(t=>e(...t)))}return jS(t,null)}(HS(t,e).map(zS)).pipe(Object(ee.a)(QS))}}(WS(t)):null}function $S(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function YS(t){return t._rawValidators}function XS(t){return t._rawAsyncValidators}let JS=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=GS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=KS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t}),t})(),ZS=(()=>{class t extends JS{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return tk(e||t)},t.\u0275dir=r.Hb({type:t,features:[r.xb]}),t})();const tk=r.Tb(ZS);class ek extends JS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nk{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let rk=(()=>{class t extends nk{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ek,2))},t.\u0275dir=r.Hb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),ik=(()=>{class t extends nk{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ZS,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function ok(t,e){return[...e.path,t]}function sk(t,e){ck(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&hk(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&hk(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ak(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),lk(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function uk(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ck(t,e,n){const r=YS(t);null!==e.validator?t.setValidators($S(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=XS(t);if(null!==e.asyncValidator?t.setAsyncValidators($S(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();uk(e._rawValidators,n),uk(e._rawAsyncValidators,n)}}function lk(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=YS(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=XS(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};uk(e._rawValidators,t),uk(e._rawAsyncValidators,t)}return r}function hk(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function dk(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function fk(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===US?n=t:Object.getPrototypeOf(t.constructor)===PS?r=t:i=t}),i||r||n||null}function pk(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const gk="VALID",mk="INVALID",bk="PENDING",vk="DISABLED";function yk(t){return(Ck(t)?t.validators:t)||null}function _k(t){return Array.isArray(t)?GS(t):t||null}function wk(t,e){return(Ck(e)?e.asyncValidators:t)||null}function Ik(t){return Array.isArray(t)?KS(t):t||null}function Ck(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Ok{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=_k(this._rawValidators),this._composedAsyncValidatorFn=Ik(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===gk}get invalid(){return this.status===mk}get pending(){return this.status==bk}get disabled(){return this.status===vk}get enabled(){return this.status!==vk}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=_k(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Ik(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=bk,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=vk,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=gk,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==gk&&this.status!==bk||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vk:gk}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=bk,this._hasOwnPendingAsyncValidator=!0;const e=zS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof kk?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ek&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?vk:this.errors?mk:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bk)?bk:this._anyControlsHaveStatus(mk)?mk:gk}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ck(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Sk extends Ok{constructor(t=null,e,n){super(yk(e),wk(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){pk(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){pk(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class kk extends Ok{constructor(t,e,n){super(yk(e),wk(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Sk?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ek extends Ok{constructor(t,e,n){super(yk(e),wk(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Sk?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Tk={provide:ek,useExisting:Object(r.U)(()=>Ak)},xk=(()=>Promise.resolve(null))();let Ak=(()=>{class t extends ek{constructor(t,e,n,i){super(),this.control=new Sk,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=fk(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),dk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?ok(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sk(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;xk.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ZS,9),r.Mb(VS,10),r.Mb(qS,10),r.Mb(MS,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([Tk]),r.xb,r.yb]}),t})(),Rk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Dk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();const Nk=new r.r("NgModelWithFormControlWarning"),jk={provide:ZS,useExisting:Object(r.U)(()=>Pk)};let Pk=(()=>{class t extends ZS{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lk(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return sk(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){ak(t.control||null,t,!1),pk(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(ak(e||null,t),n instanceof Sk&&(sk(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){ck(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return lk(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ck(this.form,this,!1),this._oldForm&&lk(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(VS,10),r.Mb(qS,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.bc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([jk]),r.xb,r.yb]}),t})();const Mk={provide:ek,useExisting:Object(r.U)(()=>Lk)};let Lk=(()=>{class t extends ek{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=fk(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),dk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ok(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ZS,13),r.Mb(VS,10),r.Mb(qS,10),r.Mb(MS,10),r.Mb(Nk,8))},t.\u0275dir=r.Hb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.zb([Mk]),r.xb,r.yb]}),t._ngModelWarningSentOnce=!1,t})();const Fk={provide:MS,useExisting:Object(r.U)(()=>Vk),multi:!0};function Uk(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Vk=(()=>{class t extends PS{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Uk(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.bc("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Fk]),r.xb]}),t})(),qk=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Uk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.E),r.Mb(Vk,9))},t.\u0275dir=r.Hb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Bk={provide:MS,useExisting:Object(r.U)(()=>Qk),multi:!0};function zk(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Qk=(()=>{class t extends PS{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Bk]),r.xb]}),t})(),Hk=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(zk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(zk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.E),r.Mb(Qk,9))},t.\u0275dir=r.Hb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Wk={provide:VS,useExisting:Object(r.U)(()=>Gk),multi:!0};let Gk=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return null==(e=t.value)||0===e.length?{required:!0}:null;var e}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("required",e.required?"":null)},inputs:{required:"required"},features:[r.zb([Wk])]}),t})(),Kk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[Dk]]}),t})(),$k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[Kk]}),t})(),Yk=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Nk,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[Kk]}),t})();function Xk(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",1),r.bc("click",function(){return r.tc(t),r.fc().close()}),r.Rb(1,"span",2),r.zc(2,"\xd7"),r.Qb(),r.Qb()}}const Jk=["*"];function Zk(t,e){if(1&t){const t=r.Sb();r.Rb(0,"li",6),r.bc("click",function(){r.tc(t);const n=e.$implicit,i=r.fc();return i.focus(),i.select(n.id,i.NgbSlideEventSource.INDICATOR)}),r.Qb()}if(2&t){const t=e.$implicit,n=r.fc();r.Eb("active",t.id===n.activeId),r.Bb("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===n.activeId)}}function tE(t,e){}function eE(t,e){if(1&t&&(r.Rb(0,"div",7),r.Rb(1,"span",8),r.Vb(2,9),r.Qb(),r.xc(3,tE,0,0,"ng-template",10),r.Qb()),2&t){const t=e.$implicit,n=e.index,i=e.count;r.kc("id","slide-"+t.id),r.Ab(2),r.Xb(n+1)(i),r.Wb(2),r.Ab(1),r.kc("ngTemplateOutlet",t.tplRef)}}function nE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"a",11),r.bc("click",function(){return r.tc(t),r.fc().arrowLeft()}),r.Nb(1,"span",12),r.Rb(2,"span",8),r.Vb(3,13),r.Qb(),r.Qb()}}function rE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"a",14),r.bc("click",function(){return r.tc(t),r.fc().arrowRight()}),r.Nb(1,"span",15),r.Rb(2,"span",8),r.Vb(3,16),r.Qb(),r.Qb()}}const iE=["defaultDayTemplate"],oE=["content"];function sE(t,e){if(1&t&&r.Nb(0,"div",7),2&t){const t=e.currentMonth,n=e.selected,i=e.disabled,o=e.focused;r.kc("date",e.date)("currentMonth",t)("selected",n)("disabled",i)("focused",o)}}function aE(t,e){if(1&t&&(r.Rb(0,"div",12),r.zc(1),r.Qb()),2&t){const t=r.fc().$implicit,e=r.fc(2);r.Ab(1),r.Bc(" ",e.i18n.getMonthLabel(t.firstDate)," ")}}function uE(t,e){if(1&t&&(r.Rb(0,"div",9),r.xc(1,aE,2,1,"div",10),r.Nb(2,"ngb-datepicker-month",11),r.Qb()),2&t){const t=e.$implicit,n=r.fc(2);r.Ab(1),r.kc("ngIf","none"===n.navigation||n.displayMonths>1&&"select"===n.navigation),r.Ab(1),r.kc("month",t.firstDate)}}function cE(t,e){if(1&t&&r.xc(0,uE,3,2,"div",8),2&t){const t=r.fc();r.kc("ngForOf",t.model.months)}}function lE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"ngb-datepicker-navigation",13),r.bc("navigate",function(e){return r.tc(t),r.fc().onNavigateEvent(e)})("select",function(e){return r.tc(t),r.fc().onNavigateDateSelect(e)}),r.Qb()}if(2&t){const t=r.fc();r.kc("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function hE(t,e){}function dE(t,e){}function fE(t,e){if(1&t&&(r.Rb(0,"div",5),r.zc(1),r.Qb()),2&t){const t=r.fc(2);r.Ab(1),r.Ac(t.i18n.getWeekLabel())}}function pE(t,e){if(1&t&&(r.Rb(0,"div",6),r.zc(1),r.Qb()),2&t){const t=e.$implicit;r.Ab(1),r.Ac(t)}}function gE(t,e){if(1&t&&(r.Rb(0,"div",2),r.xc(1,fE,2,1,"div",3),r.xc(2,pE,2,1,"div",4),r.Qb()),2&t){const t=r.fc();r.Ab(1),r.kc("ngIf",t.datepicker.showWeekNumbers),r.Ab(1),r.kc("ngForOf",t.viewModel.weekdays)}}function mE(t,e){if(1&t&&(r.Rb(0,"div",11),r.zc(1),r.Qb()),2&t){const t=r.fc(2).$implicit,e=r.fc();r.Ab(1),r.Ac(e.i18n.getWeekNumerals(t.number))}}function bE(t,e){}function vE(t,e){if(1&t&&r.xc(0,bE,0,0,"ng-template",14),2&t){const t=r.fc().$implicit,e=r.fc(3);r.kc("ngTemplateOutlet",e.datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function yE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",12),r.bc("click",function(n){r.tc(t);const i=e.$implicit;return r.fc(3).doSelect(i),n.preventDefault()}),r.xc(1,vE,1,2,"ng-template",13),r.Qb()}if(2&t){const t=e.$implicit;r.Eb("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),r.kc("tabindex",t.tabindex),r.Bb("aria-label",t.ariaLabel),r.Ab(1),r.kc("ngIf",!t.hidden)}}function _E(t,e){if(1&t&&(r.Rb(0,"div",8),r.xc(1,mE,2,1,"div",9),r.xc(2,yE,2,9,"div",10),r.Qb()),2&t){const t=r.fc().$implicit,e=r.fc();r.Ab(1),r.kc("ngIf",e.datepicker.showWeekNumbers),r.Ab(1),r.kc("ngForOf",t.days)}}function wE(t,e){1&t&&r.xc(0,_E,3,2,"div",7),2&t&&r.kc("ngIf",!e.$implicit.collapsed)}function IE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"ngb-datepicker-navigation-select",7),r.bc("select",function(e){return r.tc(t),r.fc().select.emit(e)}),r.Qb()}if(2&t){const t=r.fc();r.kc("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function CE(t,e){1&t&&r.Nb(0,"div",0)}function OE(t,e){1&t&&r.Nb(0,"div",0)}function SE(t,e){if(1&t&&(r.xc(0,CE,1,0,"div",9),r.Rb(1,"div",10),r.zc(2),r.Qb(),r.xc(3,OE,1,0,"div",9)),2&t){const t=e.$implicit,n=e.index,i=r.fc(2);r.kc("ngIf",n>0),r.Ab(2),r.Cc(" ",i.i18n.getMonthFullName(t.number,t.year)," ",i.i18n.getYearNumerals(t.year)," "),r.Ab(1),r.kc("ngIf",n!==i.months.length-1)}}function kE(t,e){if(1&t&&r.xc(0,SE,4,4,"ng-template",8),2&t){const t=r.fc();r.kc("ngForOf",t.months)}}const EE=["ngbDatepickerDayView",""],TE=["month"],xE=["year"];function AE(t,e){if(1&t&&(r.Rb(0,"option",5),r.zc(1),r.Qb()),2&t){const t=e.$implicit,n=r.fc();r.kc("value",t),r.Bb("aria-label",n.i18n.getMonthFullName(t,null==n.date?null:n.date.year)),r.Ab(1),r.Ac(n.i18n.getMonthShortName(t,null==n.date?null:n.date.year))}}function RE(t,e){if(1&t&&(r.Rb(0,"option",5),r.zc(1),r.Qb()),2&t){const t=e.$implicit,n=r.fc();r.kc("value",t),r.Ab(1),r.Ac(n.i18n.getYearNumerals(t))}}const DE=["dialog"];function NE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",11),r.bc("click",function(){r.tc(t);const e=r.fc();return e.changeHour(e.hourStep)}),r.Nb(1,"span",12),r.Rb(2,"span",13),r.Vb(3,14),r.Qb(),r.Qb()}if(2&t){const t=r.fc();r.Eb("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),r.kc("disabled",t.disabled)}}function jE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",11),r.bc("click",function(){r.tc(t);const e=r.fc();return e.changeHour(-e.hourStep)}),r.Nb(1,"span",15),r.Rb(2,"span",13),r.Vb(3,16),r.Qb(),r.Qb()}if(2&t){const t=r.fc();r.Eb("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),r.kc("disabled",t.disabled)}}function PE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",11),r.bc("click",function(){r.tc(t);const e=r.fc();return e.changeMinute(e.minuteStep)}),r.Nb(1,"span",12),r.Rb(2,"span",13),r.Vb(3,17),r.Qb(),r.Qb()}if(2&t){const t=r.fc();r.Eb("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),r.kc("disabled",t.disabled)}}function ME(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",11),r.bc("click",function(){r.tc(t);const e=r.fc();return e.changeMinute(-e.minuteStep)}),r.Nb(1,"span",15),r.Rb(2,"span",13),r.Vb(3,18),r.Qb(),r.Qb()}if(2&t){const t=r.fc();r.Eb("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),r.kc("disabled",t.disabled)}}function LE(t,e){1&t&&(r.Rb(0,"div",5),r.zc(1,":"),r.Qb())}function FE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",11),r.bc("click",function(){r.tc(t);const e=r.fc(2);return e.changeSecond(e.secondStep)}),r.Nb(1,"span",12),r.Rb(2,"span",13),r.Vb(3,21),r.Qb(),r.Qb()}if(2&t){const t=r.fc(2);r.Eb("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),r.kc("disabled",t.disabled)}}function UE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",11),r.bc("click",function(){r.tc(t);const e=r.fc(2);return e.changeSecond(-e.secondStep)}),r.Nb(1,"span",15),r.Rb(2,"span",13),r.Vb(3,22),r.Qb(),r.Qb()}if(2&t){const t=r.fc(2);r.Eb("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),r.kc("disabled",t.disabled)}}function VE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",19),r.xc(1,FE,4,7,"button",3),r.Rb(2,"input",20),r.bc("change",function(e){return r.tc(t),r.fc().updateSecond(e.target.value)})("input",function(e){return r.tc(t),r.fc().formatInput(e.target)})("keydown.ArrowUp",function(e){r.tc(t);const n=r.fc();return n.changeSecond(n.secondStep),e.preventDefault()})("keydown.ArrowDown",function(e){r.tc(t);const n=r.fc();return n.changeSecond(-n.secondStep),e.preventDefault()}),r.Qb(),r.xc(3,UE,4,7,"button",3),r.Qb()}if(2&t){const t=r.fc();r.Ab(1),r.kc("ngIf",t.spinners),r.Ab(1),r.Eb("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),r.kc("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),r.Ab(1),r.kc("ngIf",t.spinners)}}function qE(t,e){1&t&&r.Nb(0,"div",5)}function BE(t,e){if(1&t&&(r.Pb(0),r.Vb(1,27),r.Ob()),2&t){const t=r.fc(2);r.Ab(1),r.Xb(t.i18n.getAfternoonPeriod()),r.Wb(1)}}function zE(t,e){if(1&t&&r.Vb(0,28),2&t){const t=r.fc(2);r.Xb(t.i18n.getMorningPeriod()),r.Wb(0)}}function QE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",23),r.Rb(1,"button",24),r.bc("click",function(){return r.tc(t),r.fc().toggleMeridian()}),r.xc(2,BE,2,1,"ng-container",25),r.xc(3,zE,1,1,"ng-template",null,26,r.yc),r.Qb(),r.Qb()}if(2&t){const t=r.sc(4),e=r.fc();r.Ab(1),r.Eb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),r.kc("disabled",e.disabled),r.Ab(1),r.kc("ngIf",e.model&&e.model.hour>=12)("ngIfElse",t)}}function HE(t){return parseInt(`${t}`,10)}function WE(t){return"string"==typeof t}function GE(t){return!isNaN(HE(t))}function KE(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function $E(t){return null!=t}function YE(t){return GE(t)?`0${t}`.slice(-2):""}function XE(t,e){return t&&t.className&&t.className.split&&t.className.split(/\s+/).indexOf(e)>=0}function JE(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const ZE={animation:!0,transitionTimerDelayMs:5};let tT=(()=>{class t{constructor(){this.animation=ZE.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const eT=()=>{},{transitionTimerDelayMs:nT}=ZE,rT=new Map,iT=(t,e,n,r)=>{let i=r.context||{};const o=rT.get(e);if(o)switch(r.runningTransition){case"continue":return ye.a;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),rT.delete(e)}const s=n(e,r.animation,i)||eT;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),Object(Yt.a)(void 0).pipe(function(t){return e=>new Xt.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new $t.a,u=new $t.a,c=a.pipe(function(...t){return e=>aw(e,Object(Yt.a)(...t))}(!0));rT.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=sS(e,"transitionend").pipe(CS(c),ge(({target:t})=>t===e));hS(cS(l+nT).pipe(CS(c)),n,u).pipe(CS(c)).subscribe(()=>{rT.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let oT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),sT=(()=>{class t{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(tT))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(tT))},token:t,providedIn:"root"}),t})();const aT=({classList:t})=>{t.remove("show")};let uT=(()=>{class t{constructor(t,e,n,i){this._renderer=e,this._element=n,this._zone=i,this.closed=new r.n,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=iT(this._zone,this._element.nativeElement,aT,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const e=t.type;e&&!e.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${e.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${e.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(sT),r.Mb(r.E),r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,e){2&t&&r.Eb("fade",e.animation)("alert-dismissible",e.dismissible)},inputs:{dismissible:"dismissible",type:"type",animation:"animation"},outputs:{closed:"closed"},exportAs:["ngbAlert"],features:[r.yb],ngContentSelectors:Jk,decls:2,vars:1,consts:function(){let t;return t=$localize`:@@ngb.alert.close␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,[["type","button","class","close","aria-label",t,3,"click",4,"ngIf"],["type","button","aria-label",t,1,"close",3,"click"],["aria-hidden","true"]]},template:function(t,e){1&t&&(r.jc(),r.ic(0),r.xc(1,Xk,3,0,"button",0)),2&t&&(r.Ab(1),r.kc("ngIf",e.dismissible))},directives:[ht],styles:["ngb-alert{display:block}"],encapsulation:2,changeDetection:0}),t})(),cT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),lT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})(),hT=(()=>{class t{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(tT))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(tT))},token:t,providedIn:"root"}),t})();var dT=function(t){return t.LEFT="left",t.RIGHT="right",t}({});const fT=({classList:t})=>t.contains("carousel-item-left")||t.contains("carousel-item-right"),pT=t=>{t.remove("carousel-item-left"),t.remove("carousel-item-right")},gT=t=>{pT(t),t.remove("carousel-item-prev"),t.remove("carousel-item-next")},mT=(t,e,{direction:n})=>{const{classList:r}=t;return e?(fT(t)?pT(r):(r.add("carousel-item-"+(n===dT.LEFT?"next":"prev")),JE(t),r.add("carousel-item-"+n)),()=>{gT(r),r.add("active")}):(pT(r),gT(r),void r.add("active"))},bT=(t,e,{direction:n})=>{const{classList:r}=t;return e?(fT(t)?pT(r):r.add("carousel-item-"+n),()=>{gT(r),r.remove("active")}):(pT(r),gT(r),void r.remove("active"))};let vT=0,yT=(()=>{class t{constructor(t){this.tplRef=t,this.id="ngb-slide-"+vT++,this.slid=new r.n}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.L))},t.\u0275dir=r.Hb({type:t,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"}}),t})(),_T=(()=>{class t{constructor(t,e,n,i,o){this._platformId=e,this._ngZone=n,this._cd=i,this._container=o,this.NgbSlideEventSource=wT,this._destroy$=new $t.a,this._interval$=new Mw(0),this._mouseHover$=new Mw(!1),this._focused$=new Mw(!1),this._pauseOnHover$=new Mw(!1),this._pauseOnFocus$=new Mw(!1),this._pause$=new Mw(!1),this._wrap$=new Mw(!1),this.slide=new r.n,this.slid=new r.n,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(wT.ARROW_LEFT)}arrowRight(){this.focus(),this.next(wT.ARROW_RIGHT)}ngAfterContentInit(){"browser"===this._platformId&&this._ngZone.runOutsideAngular(()=>{const t=Qw([this.slide.pipe(Object(ee.a)(t=>t.current),cw(this.activeId)),this._wrap$,this.slides.changes.pipe(cw(null))]).pipe(Object(ee.a)(([t,e])=>{const n=this.slides.toArray(),r=this._getSlideIdxById(t);return e?n.length>1:r<n.length-1}),mw());Qw([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe(Object(ee.a)(([t,e,n,r,i,o,s])=>t||e&&n||r&&i||!s?0:o),mw(),re(t=>t>0?cS(t,t):gS),CS(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(wT.TIMER)))}),this.slides.changes.pipe(CS(this._destroy$)).subscribe(()=>{var t;null===(t=this._transitionIds)||void 0===t||t.forEach(t=>(t=>{var e;null===(e=rT.get(t))||void 0===e||e.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(_e(1)).subscribe(()=>{for(const{id:t}of this.slides){const e=this._getSlideElement(t);t===this.activeId?e.classList.add("active"):e.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,e){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),e)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),dT.RIGHT,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),dT.LEFT,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,e,n){const r=this._transitionIds;if(r&&(r[0]!==t||r[1]!==this.activeId))return;let i=this._getSlideById(t);if(i&&i.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:i.id,direction:e,paused:this._pause$.value,source:n});const r={animation:this.animation,runningTransition:"stop",context:{direction:e}},o=[],s=this._getSlideById(this.activeId);if(s){const t=iT(this._ngZone,this._getSlideElement(s.id),bT,r);t.subscribe(()=>{s.slid.emit({isShown:!1,direction:e,source:n})}),o.push(t)}const a=this.activeId;this.activeId=i.id;const u=this._getSlideById(this.activeId),c=iT(this._ngZone,this._getSlideElement(i.id),mT,r);c.subscribe(()=>{null==u||u.slid.emit({isShown:!0,direction:e,source:n})}),o.push(c),bS(...o).pipe(_e(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:a,current:i.id,direction:e,paused:this._pause$.value,source:n})})}this._cd.markForCheck()}_getSlideEventDirection(t,e){return this._getSlideIdxById(t)>this._getSlideIdxById(e)?dT.RIGHT:dT.LEFT}_getSlideById(t){return this.slides.find(e=>e.id===t)||null}_getSlideIdxById(t){const e=this._getSlideById(t);return null!=e?this.slides.toArray().indexOf(e):-1}_getNextSlide(t){const e=this.slides.toArray(),n=this._getSlideIdxById(t);return n===e.length-1?this.wrap?e[0].id:e[e.length-1].id:e[n+1].id}_getPrevSlide(t){const e=this.slides.toArray(),n=this._getSlideIdxById(t);return 0===n?this.wrap?e[e.length-1].id:e[0].id:e[n-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(hT),r.Mb(r.C),r.Mb(r.A),r.Mb(r.h),r.Mb(r.l))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-carousel"]],contentQueries:function(t,e,n){if(1&t&&r.Fb(n,yT,0),2&t){let t;r.rc(t=r.cc())&&(e.slides=t)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,e){1&t&&r.bc("keydown.arrowLeft",function(){return e.keyboard&&e.arrowLeft()})("keydown.arrowRight",function(){return e.keyboard&&e.arrowRight()})("mouseenter",function(){return e.mouseHover=!0})("mouseleave",function(){return e.mouseHover=!1})("focusin",function(){return e.focused=!0})("focusout",function(){return e.focused=!1}),2&t&&(r.Bb("aria-activedescendant","slide-"+e.activeId),r.wc("display","block"))},inputs:{animation:"animation",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators",activeId:"activeId"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],decls:6,vars:6,consts:function(){let t,e,n;return t=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number␟a65b1b49aa7dd8c4f3004da6a8c2241814dae621␟783273603869937627: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,e=$localize`:@@ngb.carousel.previous␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`,n=$localize`:@@ngb.carousel.next␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`,[["role","tablist",1,"carousel-indicators"],["role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","role","button",3,"click",4,"ngIf"],["class","carousel-control-next","role","button",3,"click",4,"ngIf"],["role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"sr-only"],t,[3,"ngTemplateOutlet"],["role","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],e,["role","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],n]},template:function(t,e){1&t&&(r.Rb(0,"ol",0),r.xc(1,Zk,1,5,"li",1),r.Qb(),r.Rb(2,"div",2),r.xc(3,eE,4,4,"div",3),r.Qb(),r.xc(4,nE,4,0,"a",4),r.xc(5,rE,4,0,"a",5)),2&t&&(r.Eb("sr-only",!e.showNavigationIndicators),r.Ab(1),r.kc("ngForOf",e.slides),r.Ab(2),r.kc("ngForOf",e.slides),r.Ab(1),r.kc("ngIf",e.showNavigationArrows),r.Ab(1),r.kc("ngIf",e.showNavigationArrows))},directives:[ct,ht,pt],encapsulation:2,changeDetection:0}),t})();var wT=function(t){return t.TIMER="timer",t.ARROW_LEFT="arrowLeft",t.ARROW_RIGHT="arrowRight",t.INDICATOR="indicator",t}({});let IT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),CT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();class OT{constructor(t,e,n){this.year=KE(t)?t:null,this.month=KE(e)?e:null,this.day=KE(n)?n:null}static from(t){return t instanceof OT?t:t?new OT(t.year,t.month,t.day):null}equals(t){return null!=t&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day<t.day:this.month<t.month:this.year<t.year)}after(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day>t.day:this.month>t.month:this.year>t.year)}}function ST(t){return new OT(t.getFullYear(),t.getMonth()+1,t.getDate())}function kT(t){const e=new Date(t.year,t.month-1,t.day,12);return isNaN(e.getTime())||e.setFullYear(t.year),e}function ET(){return new xT}let TT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:ET,token:t,providedIn:"root"}),t})(),xT=(()=>{class t extends TT{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,e="d",n=1){let r=kT(t),i=!0,o=r.getMonth();switch(e){case"y":r.setFullYear(r.getFullYear()+n);break;case"m":o+=n,r.setMonth(o),o%=12,o<0&&(o+=12);break;case"d":r.setDate(r.getDate()+n),i=!1;break;default:return t}return i&&r.getMonth()!==o&&r.setDate(0),ST(r)}getPrev(t,e="d",n=1){return this.getNext(t,e,-n)}getWeekday(t){let e=kT(t).getDay();return 0===e?7:e}getWeekNumber(t,e){7===e&&(e=0);const n=kT(t[(11-e)%7]);n.setDate(n.getDate()+4-(n.getDay()||7));const r=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((r-n.getTime())/864e5)/7)+1}getToday(){return ST(new Date)}isValid(t){if(!(t&&KE(t.year)&&KE(t.month)&&KE(t.day)))return!1;if(0===t.year)return!1;const e=kT(t);return!isNaN(e.getTime())&&e.getFullYear()===t.year&&e.getMonth()+1===t.month&&e.getDate()===t.day}}return t.\u0275fac=function(e){return AT(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const AT=r.Tb(xT);function RT(t,e){return!function(t,e){return!t&&!e||!!t&&!!e&&t.equals(e)}(t,e)}function DT(t,e){return!(!t&&!e||t&&e&&t.year===e.year&&t.month===e.month)}function NT(t,e,n){return t&&e&&t.before(e)?e:t&&n&&t.after(n)?n:t||null}function jT(t,e){const{minDate:n,maxDate:r,disabled:i,markDisabled:o}=e;return!(null==t||i||o&&o(t,{year:t.year,month:t.month})||n&&t.before(n)||r&&t.after(r))}let PT=(()=>{class t{getWeekdayLabel(t,e){return this.getWeekdayShortName(t)}getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return t=Object(r.Yb)(r.v),new MT(t);var t},token:t,providedIn:"root"}),t})(),MT=(()=>{class t extends PT{constructor(t){super(),this._locale=t,this._monthsShort=R(t,S.Standalone,k.Abbreviated),this._monthsFull=R(t,S.Standalone,k.Wide)}getWeekdayShortName(t){return this.getWeekdayLabel(t,k.Short)}getWeekdayLabel(t,e){const n=A(this._locale,S.Standalone,void 0===e?k.Short:e);return n.map((t,e)=>n[(e+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){return W(new Date(t.year,t.month-1,t.day),"fullDate",this._locale)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),LT=(()=>{class t{constructor(t,e){this._calendar=t,this._i18n=e,this._VALIDATORS={dayTemplateData:t=>{if(this._state.dayTemplateData!==t)return{dayTemplateData:t}},displayMonths:t=>{if(KE(t=HE(t))&&t>0&&this._state.displayMonths!==t)return{displayMonths:t}},disabled:t=>{if(this._state.disabled!==t)return{disabled:t}},firstDayOfWeek:t=>{if(KE(t=HE(t))&&t>=0&&this._state.firstDayOfWeek!==t)return{firstDayOfWeek:t}},focusVisible:t=>{if(this._state.focusVisible!==t&&!this._state.disabled)return{focusVisible:t}},markDisabled:t=>{if(this._state.markDisabled!==t)return{markDisabled:t}},maxDate:t=>{const e=this.toValidDate(t,null);if(RT(this._state.maxDate,e))return{maxDate:e}},minDate:t=>{const e=this.toValidDate(t,null);if(RT(this._state.minDate,e))return{minDate:e}},navigation:t=>{if(this._state.navigation!==t)return{navigation:t}},outsideDays:t=>{if(this._state.outsideDays!==t)return{outsideDays:t}},weekdays:t=>{const e=!0===t||!1===t?k.Short:t,n=!0!==t&&!1!==t||t;if(this._state.weekdayWidth!==e||this._state.weekdaysVisible!==n)return{weekdayWidth:e,weekdaysVisible:n}}},this._model$=new $t.a,this._dateSelect$=new $t.a,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:k.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(ge(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(ge(t=>null!==t))}set(t){let e=Object.keys(t).map(e=>this._VALIDATORS[e](t[e])).reduce((t,e)=>Object.assign(Object.assign({},t),e),{});Object.keys(e).length>0&&this._nextState(e)}focus(t){const e=this.toValidDate(t,null);null!=e&&!this._state.disabled&&RT(this._state.focusDate,e)&&this._nextState({focusDate:t})}focusSelect(){jT(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const e=this.toValidDate(t,this._calendar.getToday());null==e||this._state.disabled||this._state.firstDate&&!DT(this._state.firstDate,e)||this._nextState({firstDate:e})}select(t,e={}){const n=this.toValidDate(t,null);null==n||this._state.disabled||(RT(this._state.selectedDate,n)&&this._nextState({selectedDate:n}),e.emitEvent&&jT(n,this._state)&&this._dateSelect$.next(n))}toValidDate(t,e){const n=OT.from(t);return void 0===e&&(e=this._calendar.getToday()),this._calendar.isValid(n)?n:e}getMonth(t){for(let e of this._state.months)if(t.month===e.number&&t.year===e.year)return e;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const e=this._updateState(t);this._patchContexts(e),this._state=e,this._model$.next(this._state)}_patchContexts(t){const{months:e,displayMonths:n,selectedDate:r,focusDate:i,focusVisible:o,disabled:s,outsideDays:a}=t;t.months.forEach(t=>{t.weeks.forEach(u=>{u.days.forEach(u=>{i&&(u.context.focused=i.equals(u.date)&&o),u.tabindex=!s&&i&&u.date.equals(i)&&i.month===t.number?0:-1,!0===s&&(u.context.disabled=!0),void 0!==r&&(u.context.selected=null!==r&&r.equals(u.date)),t.number!==u.date.month&&(u.hidden="hidden"===a||"collapsed"===a||n>1&&u.date.after(e[0].firstDate)&&u.date.before(e[n-1].lastDate))})})})}_updateState(t){const e=Object.assign({},this._state,t);let n=e.firstDate;if(("minDate"in t||"maxDate"in t)&&(function(t,e){if(e&&t&&e.before(t))throw new Error(`'maxDate' ${e} should be greater than 'minDate' ${t}`)}(e.minDate,e.maxDate),e.focusDate=NT(e.focusDate,e.minDate,e.maxDate),e.firstDate=NT(e.firstDate,e.minDate,e.maxDate),n=e.focusDate),"disabled"in t&&(e.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(n=e.selectedDate),"focusVisible"in t)return e;if("focusDate"in t&&(e.focusDate=NT(e.focusDate,e.minDate,e.maxDate),n=e.focusDate,0!==e.months.length&&e.focusDate&&!e.focusDate.before(e.firstDate)&&!e.focusDate.after(e.lastDate)))return e;if("firstDate"in t&&(e.firstDate=NT(e.firstDate,e.minDate,e.maxDate),n=e.firstDate),n){const r=function(t,e,n,r,i){const{displayMonths:o,months:s}=n,a=s.splice(0,s.length);return Array.from({length:o},(n,r)=>{const o=Object.assign(t.getNext(e,"m",r),{day:1});if(s[r]=null,!i){const t=a.findIndex(t=>t.firstDate.equals(o));-1!==t&&(s[r]=a.splice(t,1)[0])}return o}).forEach((e,i)=>{null===s[i]&&(s[i]=function(t,e,n,r,i={}){const{dayTemplateData:o,minDate:s,maxDate:a,firstDayOfWeek:u,markDisabled:c,outsideDays:l,weekdayWidth:h,weekdaysVisible:d}=n,f=t.getToday();i.firstDate=null,i.lastDate=null,i.number=e.month,i.year=e.year,i.weeks=i.weeks||[],i.weekdays=i.weekdays||[],e=function(t,e,n){const r=t.getDaysPerWeek(),i=new OT(e.year,e.month,1),o=t.getWeekday(i)%r;return t.getPrev(i,"d",(r+o-n)%r)}(t,e,u),d||(i.weekdays.length=0);for(let p=0;p<t.getWeeksPerMonth();p++){let n=i.weeks[p];n||(n=i.weeks[p]={number:0,days:[],collapsed:!0});const g=n.days;for(let u=0;u<t.getDaysPerWeek();u++){0===p&&d&&(i.weekdays[u]=r.getWeekdayLabel(t.getWeekday(e),h));const n=new OT(e.year,e.month,e.day),l=t.getNext(n),m=r.getDayAriaLabel(n);let b=!!(s&&n.before(s)||a&&n.after(a));!b&&c&&(b=c(n,{month:i.number,year:i.year}));let v=n.equals(f),y=o?o(n,{month:i.number,year:i.year}):void 0;null===i.firstDate&&n.month===i.number&&(i.firstDate=n),n.month===i.number&&l.month!==i.number&&(i.lastDate=n);let _=g[u];_||(_=g[u]={}),_.date=n,_.context=Object.assign(_.context||{},{$implicit:n,date:n,data:y,currentMonth:i.number,currentYear:i.year,disabled:b,focused:!1,selected:!1,today:v}),_.tabindex=-1,_.ariaLabel=m,_.hidden=!1,e=l}n.number=t.getWeekNumber(g.map(t=>t.date),u),n.collapsed="collapsed"===l&&g[0].date.month!==i.number&&g[g.length-1].date.month!==i.number}return i}(t,e,n,r,a.shift()||{}))}),s}(this._calendar,n,e,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);e.months=r,e.firstDate=r[0].firstDate,e.lastDate=r[r.length-1].lastDate,"selectedDate"in t&&!jT(e.selectedDate,e)&&(e.selectedDate=null),"firstDate"in t&&(!e.focusDate||e.focusDate.before(e.firstDate)||e.focusDate.after(e.lastDate))&&(e.focusDate=n);const i=!this._state.firstDate||this._state.firstDate.year!==e.firstDate.year,o=!this._state.firstDate||this._state.firstDate.month!==e.firstDate.month;"select"===e.navigation?(("minDate"in t||"maxDate"in t||0===e.selectBoxes.years.length||i)&&(e.selectBoxes.years=function(t,e,n){if(!t)return[];const r=e?Math.max(e.year,t.year-500):t.year-10,i=(n?Math.min(n.year,t.year+500):t.year+10)-r+1,o=Array(i);for(let s=0;s<i;s++)o[s]=r+s;return o}(e.firstDate,e.minDate,e.maxDate)),("minDate"in t||"maxDate"in t||0===e.selectBoxes.months.length||i)&&(e.selectBoxes.months=function(t,e,n,r){if(!e)return[];let i=t.getMonths(e.year);if(n&&e.year===n.year){const t=i.findIndex(t=>t===n.month);i=i.slice(t)}if(r&&e.year===r.year){const t=i.findIndex(t=>t===r.month);i=i.slice(0,t+1)}return i}(this._calendar,e.firstDate,e.minDate,e.maxDate))):e.selectBoxes={years:[],months:[]},"arrows"!==e.navigation&&"select"!==e.navigation||!(o||i||"minDate"in t||"maxDate"in t||"disabled"in t)||(e.prevDisabled=e.disabled||function(t,e,n){const r=Object.assign(t.getPrev(e,"m"),{day:1});return null!=n&&(r.year===n.year&&r.month<n.month||r.year<n.year&&1===n.month)}(this._calendar,e.firstDate,e.minDate),e.nextDisabled=e.disabled||function(t,e,n){const r=Object.assign(t.getNext(e,"m"),{day:1});return null!=n&&r.after(n)}(this._calendar,e.lastDate,e.maxDate))}return e}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(TT),r.Yb(PT))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();var FT=function(t){return t[t.PREV=0]="PREV",t[t.NEXT=1]="NEXT",t}({});let UT=(()=>{class t{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekdays=!0,this.showWeekNumbers=!1,this.weekdays=k.Short}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();function VT(){return new BT}let qT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:VT,token:t,providedIn:"root"}),t})(),BT=(()=>{class t extends qT{fromModel(t){return t&&KE(t.year)&&KE(t.month)&&KE(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&KE(t.year)&&KE(t.month)&&KE(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return t.\u0275fac=function(e){return zT(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const zT=r.Tb(BT);let QT=(()=>{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.L))},t.\u0275dir=r.Hb({type:t,selectors:[["ng-template","ngbDatepickerContent",""]]}),t})(),HT=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this._service=t,this._calendar=e,this.i18n=n,this._elementRef=s,this._ngbDateAdapter=a,this._ngZone=u,this._controlValue=null,this._destroyed$=new $t.a,this._publicState={},this.navigate=new r.n,this.dateSelect=new r.n,this.onChange=t=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekdays","showWeekNumbers","startDate","weekdays"].forEach(t=>this[t]=i[t]),t.dateSelect$.pipe(CS(this._destroyed$)).subscribe(t=>{this.dateSelect.emit(t)}),t.model$.pipe(CS(this._destroyed$)).subscribe(t=>{const e=t.firstDate,n=this.model?this.model.firstDate:null;this._publicState={maxDate:t.maxDate,minDate:t.minDate,firstDate:t.firstDate,lastDate:t.lastDate,focusedDate:t.focusDate,months:t.months.map(t=>t.firstDate)};let r=!1;if(!e.equals(n)&&(this.navigate.emit({current:n?{year:n.year,month:n.month}:null,next:{year:e.year,month:e.month},preventDefault:()=>r=!0}),r&&null!==n))return void this._service.open(n);const i=t.selectedDate,s=t.focusDate,a=this.model?this.model.focusDate:null;this.model=t,RT(i,this._controlValue)&&(this._controlValue=i,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(i))),RT(s,a)&&a&&t.focusVisible&&this.focus(),o.markForCheck()})}set showWeekdays(t){this.weekdays=t,this._showWeekdays=t}get showWeekdays(){return this._showWeekdays}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(OT.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(_e(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(OT.from(t?t.day?t:Object.assign(Object.assign({},t),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=sS(this._contentEl.nativeElement,"focusin"),e=sS(this._contentEl.nativeElement,"focusout"),{nativeElement:n}=this._elementRef;Object(Zt.a)(t,e).pipe(ge(({target:t,relatedTarget:e})=>!(XE(t,"ngb-dp-day")&&XE(e,"ngb-dp-day")&&n.contains(t)&&n.contains(e))),CS(this._destroyed$)).subscribe(({type:t})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===t})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(e=>t[e]=this[e]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const e={};if(t.showWeekdays&&(e.weekdays=this.weekdays),["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(e=>e in t).forEach(t=>e[t]=this[t]),this._service.set(e),"startDate"in t){const{currentValue:e,previousValue:n}=t.startDate;DT(n,e)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case FT.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case FT.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=OT.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(LT),r.Mb(TT),r.Mb(PT),r.Mb(UT),r.Mb(r.h),r.Mb(r.l),r.Mb(qT),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-datepicker"]],contentQueries:function(t,e,n){if(1&t&&r.Fb(n,QT,3),2&t){let t;r.rc(t=r.cc())&&(e.contentTemplate=t.first)}},viewQuery:function(t,e){if(1&t&&(r.Gc(iE,3),r.Gc(oE,3)),2&t){let t;r.rc(t=r.cc())&&(e._defaultDayTemplate=t.first),r.rc(t=r.cc())&&(e._contentEl=t.first)}},inputs:{showWeekdays:"showWeekdays",weekdays:"weekdays",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],features:[r.zb([{provide:MS,useExisting:Object(r.U)(()=>t),multi:!0},LT]),r.yb],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,e){if(1&t&&(r.xc(0,sE,1,5,"ng-template",null,0,r.yc),r.xc(2,cE,1,1,"ng-template",null,1,r.yc),r.Rb(4,"div",2),r.xc(5,lE,1,7,"ngb-datepicker-navigation",3),r.Qb(),r.Rb(6,"div",4,5),r.xc(8,hE,0,0,"ng-template",6),r.Qb(),r.xc(9,dE,0,0,"ng-template",6)),2&t){const t=r.sc(3);r.Ab(5),r.kc("ngIf","none"!==e.navigation),r.Ab(1),r.Eb("ngb-dp-months",!e.contentTemplate),r.Ab(2),r.kc("ngTemplateOutlet",(null==e.contentTemplate?null:e.contentTemplate.templateRef)||t),r.Ab(1),r.kc("ngTemplateOutlet",e.footerTemplate)}},directives:function(){return[ht,pt,fx,ct,KT,$T]},styles:["ngb-datepicker{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}.ngb-dp-body{z-index:1050}.ngb-dp-header{background-color:#f8f9fa;background-color:var(--light);border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{background-color:#f8f9fa;background-color:var(--light);font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}"],encapsulation:2,changeDetection:0}),t})();var WT=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});let GT=(()=>{class t{processKey(t,e){const{state:n,calendar:r}=e;switch(t.which){case WT.PageUp:e.focusDate(r.getPrev(n.focusedDate,t.shiftKey?"y":"m",1));break;case WT.PageDown:e.focusDate(r.getNext(n.focusedDate,t.shiftKey?"y":"m",1));break;case WT.End:e.focusDate(t.shiftKey?n.maxDate:n.lastDate);break;case WT.Home:e.focusDate(t.shiftKey?n.minDate:n.firstDate);break;case WT.ArrowLeft:e.focusDate(r.getPrev(n.focusedDate,"d",1));break;case WT.ArrowUp:e.focusDate(r.getPrev(n.focusedDate,"d",r.getDaysPerWeek()));break;case WT.ArrowRight:e.focusDate(r.getNext(n.focusedDate,"d",1));break;case WT.ArrowDown:e.focusDate(r.getNext(n.focusedDate,"d",r.getDaysPerWeek()));break;case WT.Enter:case WT.Space:e.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),KT=(()=>{class t{constructor(t,e,n,r){this.i18n=t,this.datepicker=e,this._keyboardService=n,this._service=r}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){t.context.disabled||t.hidden||this.datepicker.onDateSelect(t.date)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(PT),r.Mb(HT),r.Mb(GT),r.Mb(LT))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,e){1&t&&r.bc("keydown",function(t){return e.onKeyDown(t)})},inputs:{month:"month"},decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(r.xc(0,gE,3,2,"div",0),r.xc(1,wE,1,1,"ng-template",1)),2&t&&(r.kc("ngIf",e.viewModel.weekdays.length>0),r.Ab(1),r.kc("ngForOf",e.viewModel.weeks))},directives:[ht,ct,pt],styles:['ngb-datepicker-month{display:block}.ngb-dp-week-number,.ngb-dp-weekday{font-style:italic;line-height:2rem;text-align:center}.ngb-dp-weekday{color:#5bc0de;color:var(--info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{background-color:#f8f9fa;background-color:var(--light);border-bottom:1px solid rgba(0,0,0,.125);border-radius:0}.ngb-dp-day,.ngb-dp-week-number,.ngb-dp-weekday{height:2rem;width:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}'],encapsulation:2}),t})(),$T=(()=>{class t{constructor(t){this.i18n=t,this.navigation=FT,this.months=[],this.navigate=new r.n,this.select=new r.n}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(PT))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-datepicker-navigation"]],inputs:{months:"months",date:"date",disabled:"disabled",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},decls:8,vars:4,consts:function(){let t,e,n,r;return t=$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,e=$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,n=$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,r=$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",t,"title",e,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",n,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"button",1),r.bc("click",function(t){return e.onClickPrev(t)}),r.Nb(2,"span",2),r.Qb(),r.Qb(),r.xc(3,IE,1,4,"ngb-datepicker-navigation-select",3),r.xc(4,kE,1,1,void 0,4),r.Rb(5,"div",5),r.Rb(6,"button",6),r.bc("click",function(t){return e.onClickNext(t)}),r.Nb(7,"span",2),r.Qb(),r.Qb()),2&t&&(r.Ab(1),r.kc("disabled",e.prevDisabled),r.Ab(2),r.kc("ngIf",e.showSelect),r.Ab(1),r.kc("ngIf",!e.showSelect),r.Ab(2),r.kc("disabled",e.nextDisabled))},directives:function(){return[ht,px,ct]},styles:["ngb-datepicker-navigation{align-items:center;display:flex}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg);width:.75em}.ngb-dp-arrow{display:flex;flex:1 1 auto;height:2rem;margin:0;padding-left:0;padding-right:0;width:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{margin-left:.15em;margin-right:.25em;transform:rotate(45deg)}.ngb-dp-arrow-btn{background-color:transparent;border:none;margin:0 .5rem;padding:0 .25rem;z-index:1}.ngb-dp-arrow-btn:focus{outline-style:auto;outline-width:1px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}"],encapsulation:2,changeDetection:0}),t})();const YT=(t,e)=>!!e&&e.some(e=>e.contains(t)),XT=(t,e)=>!e||null!=function(t,e){return e?void 0===t.closest?null:t.closest(e):null}(t,e),JT="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function ZT(t,e,n,r,i,o,s,a){var u;n&&t.runOutsideAngular((u=()=>{const u=sS(e,"keydown").pipe(CS(i),ge(t=>t.which===WT.Escape),Object(rI.a)(t=>t.preventDefault())),c=sS(e,"mousedown").pipe(Object(ee.a)(t=>{const e=t.target;return 2!==t.button&&!YT(e,s)&&("inside"===n?YT(e,o)&&XT(e,a):"outside"===n?!YT(e,o):XT(e,a)||!YT(e,o))}),CS(i)),l=sS(e,"mouseup").pipe(kS(c),ge(([t,e])=>e),function(t,e=ow.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new AS(r,e))}(0),CS(i));hS([u.pipe(Object(ee.a)(t=>0)),l.pipe(Object(ee.a)(t=>1))]).subscribe(e=>t.run(()=>r(e)))},JT?()=>setTimeout(()=>u(),100):u))}const tx=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ex(t){const e=Array.from(t.querySelectorAll(tx)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const nx=(t,e,n,r=!1)=>{t.runOutsideAngular(()=>{const t=sS(e,"focusin").pipe(CS(n),Object(ee.a)(t=>t.target));sS(e,"keydown").pipe(CS(n),ge(t=>t.which===WT.Tab),kS(t)).subscribe(([t,n])=>{const[r,i]=ex(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&sS(e,"click").pipe(CS(n),kS(t),Object(ee.a)(t=>t[1])).subscribe(t=>t.focus())})},rx=/\s+/,ix=new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=s.top-(e.offsetHeight+u+c);break;case"bottom":d=s.top+s.height;break;case"left":f=s.left-(e.offsetWidth+l+h);break;case"right":f=s.left+s.width}switch(o){case"top":d=s.top;break;case"bottom":d=s.top+s.height-e.offsetHeight;break;case"left":f=s.left;break;case"right":f=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=s.left+s.width/2-e.offsetWidth/2:d=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,b=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=b&&p.bottom<=m}};function ox(t,e,n,r,i){let o=Array.isArray(n)?n:n.split(rx);const s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=e.classList,u=t=>{const[e,n]=t.split("-"),r=[];return i&&(r.push(`${i}-${e}`),n&&r.push(`${i}-${e}-${n}`),r.forEach(t=>{a.add(t)})),r};i&&s.forEach(t=>{a.remove(`${i}-${t}`)});let c=o.findIndex(t=>"auto"===t);c>=0&&s.forEach(function(t){null==o.find(e=>-1!==e.search("^"+t))&&o.splice(c++,1,t)});const l=e.style;l.position="absolute",l.top="0",l.left="0",l["will-change"]="transform";let h=null,d=!1;for(h of o){let n=u(h);if(ix.positionElements(t,e,h,r)){d=!0;break}i&&n.forEach(t=>{a.remove(t)})}return d||(h=o[0],u(h),ix.positionElements(t,e,h,r)),h}function sx(){return new ux}let ax=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:sx,token:t,providedIn:"root"}),t})(),ux=(()=>{class t extends ax{parse(t){if(null!=t){const e=t.trim().split("-");if(1===e.length&&GE(e[0]))return{year:HE(e[0]),month:null,day:null};if(2===e.length&&GE(e[0])&&GE(e[1]))return{year:HE(e[0]),month:HE(e[1]),day:null};if(3===e.length&&GE(e[0])&&GE(e[1])&&GE(e[2]))return{year:HE(e[0]),month:HE(e[1]),day:HE(e[2])}}return null}format(t){return t?`${t.year}-${GE(t.month)?YE(t.month):""}-${GE(t.day)?YE(t.day):""}`:""}}return t.\u0275fac=function(e){return cx(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const cx=r.Tb(ux);let lx=(()=>{class t extends UT{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"],this.restoreFocus=!0}}return t.\u0275fac=function(e){return hx(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const hx=r.Tb(lx);let dx=(()=>{class t{constructor(t,e,n,i,o,s,a,u,c,l,h){this._parserFormatter=t,this._elRef=e,this._vcRef=n,this._renderer=i,this._cfr=o,this._ngZone=s,this._calendar=a,this._dateAdapter=u,this._document=c,this._changeDetector=l,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this.dateSelect=new r.n,this.navigate=new r.n,this.closed=new r.n,this._onChange=t=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement"].forEach(t=>this[t]=h[t]),this._zoneSubscription=s.onStable.subscribe(()=>this._updatePopupPosition())}set showWeekdays(t){this.weekdays=t,this._showWeekdays=t}get showWeekdays(){return this._showWeekdays}get disabled(){return this._disabled}set disabled(t){this._disabled=""===t||t&&"false"!==t,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}registerOnValidatorChange(t){this._validatorChange=t}setDisabledState(t){this.disabled=t}validate(t){const{value:e}=t;if(null!=e){const t=this._fromDateStruct(this._dateAdapter.fromModel(e));if(!t)return{ngbDate:{invalid:e}};if(this.minDate&&t.before(OT.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:e}}};if(this.maxDate&&t.after(OT.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:e}}}}return null}writeValue(t){this._model=this._fromDateStruct(this._dateAdapter.fromModel(t)),this._writeModelValue(this._model)}manualDateChange(t,e=!1){const n=t!==this._inputValue;n&&(this._inputValue=t,this._model=this._fromDateStruct(this._parserFormatter.parse(t))),!n&&e||this._onChange(this._model?this._dateAdapter.toModel(this._model):""===t?null:t),e&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){const t=this._cfr.resolveComponentFactory(HT);this._cRef=this._vcRef.createComponent(t),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef.instance),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(t=>{this.writeValue(t),this._onChange(t),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,nx(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),this._cRef.instance.focus(),ZT(this._ngZone,this._document,this.autoClose,()=>this.close(),this.closed,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this.closed.emit(),this._changeDetector.markForCheck();let t=this._elWithFocus;WE(this.restoreFocus)?t=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(t=this.restoreFocus),t&&t.focus?t.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(t){this.isOpen()&&this._cRef.instance.navigateTo(t)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(t){if((t.minDate||t.maxDate)&&(this._validatorChange(),this.isOpen()&&(t.minDate&&(this._cRef.instance.minDate=this.minDate),t.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(t))),t.datepickerClass){const{currentValue:e,previousValue:n}=t.datepickerClass;this._applyPopupClass(e,n)}}ngOnDestroy(){this.close(),this._zoneSubscription.unsubscribe()}_applyDatepickerInputs(t){["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(e=>{void 0!==this[e]&&(t[e]=this[e])}),t.startDate=this.startDate||this._model}_applyPopupClass(t,e){var n;const r=null===(n=this._cRef)||void 0===n?void 0:n.location.nativeElement;r&&(t&&this._renderer.addClass(r,t),e&&this._renderer.removeClass(r,e))}_applyPopupStyling(t){this._renderer.addClass(t,"dropdown-menu"),this._renderer.addClass(t,"show"),"body"===this.container&&this._renderer.addClass(t,"ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(t){t.navigate.subscribe(t=>this.navigate.emit(t)),t.dateSelect.subscribe(t=>{this.dateSelect.emit(t),!0!==this.autoClose&&"inside"!==this.autoClose||this.close()})}_writeModelValue(t){const e=this._parserFormatter.format(t);this._inputValue=e,this._renderer.setProperty(this._elRef.nativeElement,"value",e),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(t)),this._onTouched())}_fromDateStruct(t){const e=t?new OT(t.year,t.month,t.day):null;return this._calendar.isValid(e)?e:null}_updatePopupPosition(){if(!this._cRef)return;let t;if(t=WE(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this.positionTarget&&!t)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");ox(t,this._cRef.location.nativeElement,this.placement,"body"===this.container)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ax),r.Mb(r.l),r.Mb(r.Q),r.Mb(r.E),r.Mb(r.j),r.Mb(r.A),r.Mb(TT),r.Mb(qT),r.Mb(s),r.Mb(r.h),r.Mb(lx))},t.\u0275dir=r.Hb({type:t,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(t,e){1&t&&r.bc("input",function(t){return e.manualDateChange(t.target.value)})("change",function(t){return e.manualDateChange(t.target.value,!0)})("focus",function(){return e.onFocus()})("blur",function(){return e.onBlur()}),2&t&&r.Ub("disabled",e.disabled)},inputs:{showWeekdays:"showWeekdays",weekdays:"weekdays",disabled:"disabled",autoClose:"autoClose",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],features:[r.zb([{provide:MS,useExisting:Object(r.U)(()=>t),multi:!0},{provide:VS,useExisting:Object(r.U)(()=>t),multi:!0},{provide:UT,useExisting:lx}]),r.yb]}),t})(),fx=(()=>{class t{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(PT))},t.\u0275cmp=r.Gb({type:t,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,e){2&t&&r.Eb("bg-primary",e.selected)("text-white",e.selected)("text-muted",e.isMuted())("outside",e.isMuted())("active",e.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},attrs:EE,decls:1,vars:1,template:function(t,e){1&t&&r.zc(0),2&t&&r.Ac(e.i18n.getDayNumerals(e.date))},styles:["[ngbDatepickerDayView]{background:transparent;border-radius:.25rem;height:2rem;line-height:2rem;text-align:center;width:2rem}[ngbDatepickerDayView].outside{opacity:.5}"],encapsulation:2,changeDetection:0}),t})(),px=(()=>{class t{constructor(t,e){this.i18n=t,this._renderer=e,this.select=new r.n,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new OT(this.date.year,HE(t),1))}changeYear(t){this.select.emit(new OT(HE(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(PT),r.Mb(r.E))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,e){if(1&t&&(r.Gc(TE,3,r.l),r.Gc(xE,3,r.l)),2&t){let t;r.rc(t=r.cc())&&(e.monthSelect=t.first),r.rc(t=r.cc())&&(e.yearSelect=t.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},decls:6,vars:4,consts:function(){let t,e,n,r;return t=$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,e=$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,n=$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`,r=$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`,[["aria-label",t,"title",e,1,"custom-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",n,"title",r,1,"custom-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,e){1&t&&(r.Rb(0,"select",0,1),r.bc("change",function(t){return e.changeMonth(t.target.value)}),r.xc(2,AE,2,3,"option",2),r.Qb(),r.Rb(3,"select",3,4),r.bc("change",function(t){return e.changeYear(t.target.value)}),r.xc(5,RE,2,2,"option",2),r.Qb()),2&t&&(r.kc("disabled",e.disabled),r.Ab(2),r.kc("ngForOf",e.months),r.Ab(1),r.kc("disabled",e.disabled),r.Ab(2),r.kc("ngForOf",e.years))},directives:[ct,qk,Hk],styles:["ngb-datepicker-navigation-select>.custom-select{flex:1 1 auto;font-size:.875rem;height:1.85rem;padding:0 .5rem}ngb-datepicker-navigation-select>.custom-select:focus{z-index:1}ngb-datepicker-navigation-select>.custom-select::-ms-value{background-color:transparent!important}"],encapsulation:2,changeDetection:0}),t})();new Date(1882,10,12),new Date(2174,10,25);let gx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt,$k]]}),t})(),mx=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),bx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["",8,"navbar"]]}),t})(),vx=(()=>{class t{constructor(t){this.elementRef=t,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(t,e){2&t&&r.Eb("disabled",e.disabled)},inputs:{disabled:"disabled"}}),t})(),yx=(()=>{class t{constructor(t,e){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=e.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Object(r.U)(()=>Ix)),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,e,n){if(1&t&&r.Fb(n,vx,0),2&t){let t;r.rc(t=r.cc())&&(e.menuItems=t)}},hostVars:5,hostBindings:function(t,e){1&t&&r.bc("keydown.ArrowUp",function(t){return e.dropdown.onKeyDown(t)})("keydown.ArrowDown",function(t){return e.dropdown.onKeyDown(t)})("keydown.Home",function(t){return e.dropdown.onKeyDown(t)})("keydown.End",function(t){return e.dropdown.onKeyDown(t)})("keydown.Enter",function(t){return e.dropdown.onKeyDown(t)})("keydown.Space",function(t){return e.dropdown.onKeyDown(t)})("keydown.Tab",function(t){return e.dropdown.onKeyDown(t)})("keydown.Shift.Tab",function(t){return e.dropdown.onKeyDown(t)}),2&t&&(r.Bb("x-placement",e.placement),r.Eb("dropdown-menu",!0)("show",e.dropdown.isOpen()))}}),t})(),_x=(()=>{class t{constructor(t,e){this.dropdown=t,this.nativeElement=e.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Object(r.U)(()=>Ix)),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("aria-expanded",e.dropdown.isOpen())}}),t})(),wx=(()=>{class t extends _x{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Object(r.U)(()=>Ix)),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){1&t&&r.bc("click",function(){return e.dropdown.toggle()})("keydown.ArrowUp",function(t){return e.dropdown.onKeyDown(t)})("keydown.ArrowDown",function(t){return e.dropdown.onKeyDown(t)})("keydown.Home",function(t){return e.dropdown.onKeyDown(t)})("keydown.End",function(t){return e.dropdown.onKeyDown(t)})("keydown.Tab",function(t){return e.dropdown.onKeyDown(t)})("keydown.Shift.Tab",function(t){return e.dropdown.onKeyDown(t)}),2&t&&r.Bb("aria-expanded",e.dropdown.isOpen())},features:[r.zb([{provide:_x,useExisting:Object(r.U)(()=>t)}]),r.xb]}),t})(),Ix=(()=>{class t{constructor(t,e,n,i,o,s,a){this._changeDetector=t,this._document=n,this._ngZone=i,this._elementRef=o,this._renderer=s,this._closed$=new $t.a,this._bodyContainer=null,this._open=!1,this.openChange=new r.n,this.placement=e.placement,this.container=e.container,this.autoClose=e.autoClose,this.display=a?"static":"dynamic",this._zoneSubscription=i.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(_e(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.isFirstChange&&this._applyPlacementClasses(),t.dropdownClass){const{currentValue:e,previousValue:n}=t.dropdownClass;this._applyCustomDropdownClass(e,n)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){ZT(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(t){const e=t.which,n=this._getMenuElements();let r=-1,i=null;const o=this._isEventFromToggle(t);if(!o&&n.length&&n.forEach((e,n)=>{e.contains(t.target)&&(i=e),e===this._document.activeElement&&(r=n)}),e!==WT.Space&&e!==WT.Enter){if(e!==WT.Tab){if(o||i){if(this.open(),n.length){switch(e){case WT.ArrowDown:r=Math.min(r+1,n.length-1);break;case WT.ArrowUp:if(this._isDropup()&&-1===r){r=n.length-1;break}r=Math.max(r-1,0);break;case WT.Home:r=0;break;case WT.End:r=n.length-1}n[r].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const e=this._menu.nativeElement.querySelectorAll(tx);t.shiftKey&&t.target===e[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):t.shiftKey||t.target!==e[e.length-1]||(this._anchor.nativeElement.focus(),this.close())}else sS(t.target,"focusout").pipe(_e(1)).subscribe(({relatedTarget:t})=>{this._elementRef.nativeElement.contains(t)||this.close()})}}else!i||!0!==this.autoClose&&"inside"!==this.autoClose||sS(i,"click").pipe(_e(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(t=>!t.disabled).map(t=>t.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&this._applyPlacementClasses("dynamic"===this.display?ox(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;if(this._menu){const e=this._menu.nativeElement;t.appendChild(this._elementRef.nativeElement,e),t.removeStyle(e,"position"),t.removeStyle(e,"transform")}this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const t=this._renderer,e=this._menu.nativeElement,n=this._bodyContainer=this._bodyContainer||t.createElement("div");t.setStyle(n,"position","absolute"),t.setStyle(e,"position","static"),t.setStyle(n,"z-index","1050"),t.appendChild(n,e),t.appendChild(this._document.body,n)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,e){const n="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;n&&(e&&this._renderer.removeClass(n,e),t&&this._renderer.addClass(n,t))}_applyPlacementClasses(t){const e=this._menu;if(e){t||(t=this._getFirstPlacement(this.placement));const n=this._renderer,r=this._elementRef.nativeElement;n.removeClass(r,"dropup"),n.removeClass(r,"dropdown"),e.placement="static"===this.display?null:t;const i=-1!==t.search("^top")?"dropup":"dropdown";n.addClass(r,i);const o=this._bodyContainer;o&&(n.removeClass(o,"dropup"),n.removeClass(o,"dropdown"),n.addClass(o,i))}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.h),r.Mb(mx),r.Mb(s),r.Mb(r.A),r.Mb(r.l),r.Mb(r.E),r.Mb(bx,8))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(t,e,n){if(1&t&&(r.Fb(n,yx,1),r.Fb(n,_x,1)),2&t){let t;r.rc(t=r.cc())&&(e._menu=t.first),r.rc(t=r.cc())&&(e._anchor=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&r.Eb("show",e.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display",dropdownClass:"dropdownClass"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[r.yb]}),t})(),Cx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})(),Ox=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(tT))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(tT))},token:t,providedIn:"root"}),t})();class Sx{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const kx=()=>{};let Ex=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):kx}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(s))},token:t,providedIn:"root"}),t})(),Tx=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(_e(1)).subscribe(()=>{iT(this._zone,this._el.nativeElement,(t,e)=>{e&&JE(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return iT(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Cb("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.Eb("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class xx{close(t){}dismiss(t){}}class Ax{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new $t.a,this._dismissed=new $t.a,this._hidden=new $t.a,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(CS(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(CS(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Object(Yt.a)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),bS(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Rx=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let Dx=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new $t.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.n,this.shown=new $t.a,this.hidden=new $t.a}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){this._show()}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=bS(iT(this._zone,t,()=>t.classList.remove("show"),e),iT(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};bS(iT(this._zone,this._elRef.nativeElement,(t,e)=>{e&&JE(t),t.classList.add("show")},t),iT(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{sS(t,"keydown").pipe(CS(this._closed$),ge(t=>t.which===WT.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(Rx.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;sS(this._dialogEl.nativeElement,"mousedown").pipe(CS(this._closed$),Object(rI.a)(()=>e=!1),re(()=>sS(t,"mouseup").pipe(CS(this._closed$),_e(1))),ge(({target:e})=>t===e)).subscribe(()=>{e=!0}),sS(t,"click").pipe(CS(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(Rx.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=ex(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&iT(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s),r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Gc(DE,3),2&t){let t;r.rc(t=r.cc())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.Bb("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Cb("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.Eb("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Jk,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.jc(),r.Rb(0,"div",0,1),r.Rb(2,"div",2),r.ic(3),r.Qb(),r.Qb()),2&t&&r.Cb("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),Nx=(()=>{class t{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new $t.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new r.n,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];nx(this._ngZone,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:$E(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new xx,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),d=new Ax(h,c,l,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(s,s),d.result.then(a,a),u.close=t=>{d.close(t)},u.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&this._applyBackdropOptions(l.instance,r),d}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(Tx).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(Dx).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{$E(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{$E(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.L?this._createFromTemplateRef(n,i):WE(n)?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new Sx([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new Sx([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new Sx([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.s.create({providers:[{provide:xx,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new Sx([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.g),r.Yb(r.s),r.Yb(s),r.Yb(Ex),r.Yb(r.F),r.Yb(r.A))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(r.g),Object(r.Yb)(r.o),Object(r.Yb)(s),Object(r.Yb)(Ex),Object(r.Yb)(r.F),Object(r.Yb)(r.A))},token:t,providedIn:"root"}),t})(),jx=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.j),r.Yb(r.s),r.Yb(Nx),r.Yb(Ox))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(r.j),Object(r.Yb)(r.o),Object(r.Yb)(Nx),Object(r.Yb)(Ox))},token:t,providedIn:"root"}),t})(),Px=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[jx]}),t})(),Mx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),Lx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),Fx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),Ux=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),Vx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})();class qx{constructor(t,e,n){this.hour=HE(t),this.minute=HE(e),this.second=HE(n)}changeHour(t=1){this.updateHour((isNaN(this.hour)?0:this.hour)+t)}updateHour(t){this.hour=GE(t)?(t<0?24+t:t)%24:NaN}changeMinute(t=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+t)}updateMinute(t){GE(t)?(this.minute=t%60<0?60+t%60:t%60,this.changeHour(Math.floor(t/60))):this.minute=NaN}changeSecond(t=1){this.updateSecond((isNaN(this.second)?0:this.second)+t)}updateSecond(t){GE(t)?(this.second=t<0?60+t%60:t%60,this.changeMinute(Math.floor(t/60))):this.second=NaN}isValid(t=!0){return GE(this.hour)&&GE(this.minute)&&(!t||GE(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let Bx=(()=>{class t{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();function zx(){return new Hx}let Qx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:zx,token:t,providedIn:"root"}),t})(),Hx=(()=>{class t extends Qx{fromModel(t){return t&&KE(t.hour)&&KE(t.minute)?{hour:t.hour,minute:t.minute,second:KE(t.second)?t.second:null}:null}toModel(t){return t&&KE(t.hour)&&KE(t.minute)?{hour:t.hour,minute:t.minute,second:KE(t.second)?t.second:null}:null}}return t.\u0275fac=function(e){return Wx(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Wx=r.Tb(Hx);let Gx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return t=Object(r.Yb)(r.v),new Kx(t);var t},token:t,providedIn:"root"}),t})(),Kx=(()=>{class t extends Gx{constructor(t){super(),this._periods=x(t,S.Standalone,k.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const $x=/[^0-9]/g;let Yx=(()=>{class t{constructor(t,e,n,r){this._config=t,this._ngbTimeAdapter=e,this._cd=n,this.i18n=r,this.onChange=t=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=KE(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=KE(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=KE(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const e=this._ngbTimeAdapter.fromModel(t);this.model=e?new qx(e.hour,e.minute,e.second):new qx,this.seconds||e&&GE(e.second)||(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model.changeSecond(t),this.propagateModelChange()}updateHour(t){const e=this.model.hour>=12,n=HE(t);this.model.updateHour(this.meridian&&(e&&n<12||!e&&12===n)?n+12:n),this.propagateModelChange()}updateMinute(t){this.model.updateMinute(HE(t)),this.propagateModelChange()}updateSecond(t){this.model.updateSecond(HE(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace($x,"")}formatHour(t){return GE(t)?YE(this.meridian?t%12==0?12:t%12:t%24):YE(NaN)}formatMinSec(t){return YE(GE(t)?t:NaN)}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!GE(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Bx),r.Mb(Qx),r.Mb(r.h),r.Mb(Gx))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},features:[r.zb([{provide:MS,useExisting:Object(r.U)(()=>t),multi:!0}]),r.yb],decls:16,vars:25,consts:function(){let t,e,n,r,i,o,s,a,u,c,l,h,d,f;return t=$localize`:@@ngb.timepicker.HH␟ce676ab1d6d98f85c836381cf100a4a91ef95a1f␟4043638465245303811:HH`,e=$localize`:@@ngb.timepicker.hours␟3bbce5fef7e1151da052a4e529453edb340e3912␟8070396816726827304:Hours`,n=$localize`:@@ngb.timepicker.MM␟72c8edf6a50068a05bde70991e36b1e881f4ca54␟1647282246509919852:MM`,r=$localize`:@@ngb.timepicker.minutes␟41e62daa962947c0d23ded0981975d1bddf0bf38␟5531237363767747080:Minutes`,i=$localize`:@@ngb.timepicker.increment-hours␟cb74bc1d625a6c1742f0d7d47306cf495780c218␟5939278348542933629:Increment hours`,o=$localize`:@@ngb.timepicker.decrement-hours␟147c7a19429da7d999e247d22e33fee370b1691b␟3651829882940481818:Decrement hours`,s=$localize`:@@ngb.timepicker.increment-minutes␟f5a4a3bc05e053f6732475d0e74875ec01c3a348␟180147720391025024:Increment minutes`,a=$localize`:@@ngb.timepicker.decrement-minutes␟c1a6899e529c096da5b660385d4e77fe1f7ad271␟7447789825403243588:Decrement minutes`,u=$localize`:@@ngb.timepicker.SS␟ebe38d36a40a2383c5fefa9b4608ffbda08bd4a3␟3628127143071124194:SS`,c=$localize`:@@ngb.timepicker.seconds␟4f2ed9e71a7c981db3e50ae2fedb28aff2ec4e6c␟8874012390997067175:Seconds`,l=$localize`:@@ngb.timepicker.increment-seconds␟912322ecee7d659d04dcf494a70e22e49d334b26␟5364772110539092174:Increment seconds`,h=$localize`:@@ngb.timepicker.decrement-seconds␟5db47ac104294243a70eb9124fbea9d0004ddf69␟753633511487974857:Decrement seconds`,d=$localize`:@@ngb.timepicker.PM␟8d6e691e10306c1b34c6b26805151aaea320ef7f␟3564199131264287502:${"\ufffd0\ufffd"}:INTERPOLATION:`,f=$localize`:@@ngb.timepicker.AM␟69a1f176a93998876952adac57c3bc3863b6105e␟4592818992509942761:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",t,"aria-label",e,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",n,"aria-label",r,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"sr-only"],i,[1,"chevron","ngb-tp-chevron","bottom"],o,s,a,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",u,"aria-label",c,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","input","keydown.ArrowUp","keydown.ArrowDown"],l,h,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],d,f]},template:function(t,e){1&t&&(r.Rb(0,"fieldset",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.xc(3,NE,4,7,"button",3),r.Rb(4,"input",4),r.bc("change",function(t){return e.updateHour(t.target.value)})("input",function(t){return e.formatInput(t.target)})("keydown.ArrowUp",function(t){return e.changeHour(e.hourStep),t.preventDefault()})("keydown.ArrowDown",function(t){return e.changeHour(-e.hourStep),t.preventDefault()}),r.Qb(),r.xc(5,jE,4,7,"button",3),r.Qb(),r.Rb(6,"div",5),r.zc(7,":"),r.Qb(),r.Rb(8,"div",6),r.xc(9,PE,4,7,"button",3),r.Rb(10,"input",7),r.bc("change",function(t){return e.updateMinute(t.target.value)})("input",function(t){return e.formatInput(t.target)})("keydown.ArrowUp",function(t){return e.changeMinute(e.minuteStep),t.preventDefault()})("keydown.ArrowDown",function(t){return e.changeMinute(-e.minuteStep),t.preventDefault()}),r.Qb(),r.xc(11,ME,4,7,"button",3),r.Qb(),r.xc(12,LE,2,0,"div",8),r.xc(13,VE,4,9,"div",9),r.xc(14,qE,1,0,"div",8),r.xc(15,QE,5,9,"div",10),r.Qb(),r.Qb()),2&t&&(r.Eb("disabled",e.disabled),r.kc("disabled",e.disabled),r.Ab(3),r.kc("ngIf",e.spinners),r.Ab(1),r.Eb("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),r.kc("value",e.formatHour(null==e.model?null:e.model.hour))("readOnly",e.readonlyInputs)("disabled",e.disabled),r.Ab(1),r.kc("ngIf",e.spinners),r.Ab(4),r.kc("ngIf",e.spinners),r.Ab(1),r.Eb("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),r.kc("value",e.formatMinSec(null==e.model?null:e.model.minute))("readOnly",e.readonlyInputs)("disabled",e.disabled),r.Ab(1),r.kc("ngIf",e.spinners),r.Ab(1),r.kc("ngIf",e.seconds),r.Ab(1),r.kc("ngIf",e.seconds),r.Ab(1),r.kc("ngIf",e.meridian),r.Ab(1),r.kc("ngIf",e.meridian))},directives:[ht],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{align-items:center;display:flex}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-meridian,.ngb-tp-minute,.ngb-tp-second{align-items:center;display:flex;flex-direction:column;justify-content:space-around}.ngb-tp-spacer{text-align:center;width:1em}'],encapsulation:2}),t})(),Xx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),Jx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})(),Zx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();new r.r("live announcer delay",{providedIn:"root",factory:function(){return 100}});let tA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[gt]]}),t})();const eA=[oT,cT,lT,IT,CT,gx,Cx,Px,Mx,Lx,Fx,Ux,Vx,Xx,Jx,Zx,tA];let nA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[eA,oT,cT,lT,IT,CT,gx,Cx,Px,Mx,Lx,Fx,Ux,Vx,Xx,Jx,Zx,tA]}),t})();const rA=function(){return["/login"]};function iA(t,e){1&t&&(r.Rb(0,"a",13),r.Nb(1,"i",14),r.Qb()),2&t&&r.kc("routerLink",r.nc(1,rA))}const oA=function(){return["/my-profile"]},sA=function(){return["/open-requests"]};function aA(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",15),r.Rb(1,"a",16),r.Nb(2,"i",17),r.Qb(),r.Rb(3,"div",18),r.Rb(4,"a",19),r.zc(5,"Profil"),r.Qb(),r.Rb(6,"a",19),r.zc(7,"Deine Anfragen"),r.Qb(),r.Rb(8,"a",20),r.bc("click",function(){return r.tc(t),r.fc().logout()}),r.zc(9,"Logout"),r.Qb(),r.Qb(),r.Qb()}2&t&&(r.Ab(4),r.kc("routerLink",r.nc(2,oA)),r.Ab(2),r.kc("routerLink",r.nc(3,sA)))}const uA=function(){return["/"]};let cA=(()=>{class t{constructor(t,e){this.auth=t,this.authService=e,this.title="mycargonaut"}logout(){this.authService.logout()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(qe),r.Mb(iS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-root"]],decls:22,vars:4,consts:[[1,"navbar","navbar-dark","navbar-expand","bgCustomGreen","flex"],[1,"navbar-brand","mr-auto",3,"routerLink"],[1,"font-weight-bold","customFont"],["class","nav-item",3,"routerLink",4,"ngIf"],["class","nav-item","ngbDropdown","",4,"ngIf"],[1,"bgCustomGreen","pt-4"],[1,"container"],[1,"row","justify-content-center"],[1,"col-5","col-md-3","text-center"],[1,"bi","bi-instagram","h1","text-white"],[1,"mt-3","text-white","d-block"],[1,"bi","bi-facebook","h1","text-white"],[1,"mt-4","text-white","pb-3"],[1,"nav-item",3,"routerLink"],[1,"bi","bi-box-arrow-in-right","text-white","h2","mb-0"],["ngbDropdown","",1,"nav-item"],["type","button","id","toggleDropdown","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false","ngbDropdownToggle","",1,"nav-link"],[1,"bi","bi-person-circle","text-white","h2","mb-0"],["ngbDropdownMenu","","aria-labelledby","toggleDropdown",1,"dropdown-menu","dropdown-menu-right"],["ngbDropdownItem","",1,"btn","dropdownLinkItem",3,"routerLink"],["ngbDropdownItem","",1,"btn","dropdownLinkItem",3,"click"]],template:function(t,e){1&t&&(r.Rb(0,"nav",0),r.Rb(1,"a",1),r.Rb(2,"div",2),r.zc(3,"MyCargonaut"),r.Qb(),r.Qb(),r.xc(4,iA,2,2,"a",3),r.xc(5,aA,10,4,"div",4),r.Qb(),r.Rb(6,"main"),r.Nb(7,"router-outlet"),r.Qb(),r.Rb(8,"footer",5),r.Rb(9,"div",6),r.Rb(10,"div",7),r.Rb(11,"div",8),r.Nb(12,"i",9),r.Rb(13,"a",10),r.zc(14,"Datenschutz"),r.Qb(),r.Qb(),r.Rb(15,"div",8),r.Nb(16,"i",11),r.Rb(17,"a",10),r.zc(18,"Impressum"),r.Qb(),r.Qb(),r.Qb(),r.Rb(19,"div",7),r.Rb(20,"p",12),r.zc(21,"\xa9 2021 MYCARGONAUT"),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(1),r.kc("routerLink",r.nc(3,uA)),r.Ab(3),r.kc("ngIf",!e.authService.isLoggedIn),r.Ab(1),r.kc("ngIf",e.authService.isLoggedIn))},directives:[bx,jO,ht,MO,Ix,wx,yx,vx],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.dropdownLinkItem[_ngcontent-%COMP%]:hover{background-color:rgba(117,183,152,.6431372549019608)}nav[_ngcontent-%COMP%]{height:4rem}main[_ngcontent-%COMP%]{min-height:calc(100vh - 10rem)}"]}),t})();class lA{constructor(t,e,n,r,i,o,s,a){this.entryId=t,this.requestedUserId=n,this.confirmed=r,this.pending=i,this.rejected=o,this.seatsNeeded=s,this.cubicMetersNeeded=a,this.userId=e}}let hA=(()=>{class t{constructor(t,e,n){this.afs=t,this.router=e,this.alertService=n,this.allUsers=[],this.foundresult=!1}getUsers(){return this.allUsers}setQuery(t,e,n,r){const i={start:t,end:e,date:n,type:r};localStorage.removeItem("searchQuery"),localStorage.setItem("searchQuery",JSON.stringify(i)),this.search(i).then(t=>{if(this.foundresult)this.router.navigate(["/search-page"]);else{const t={type:"danger",message:"Es gibt keine Ergebnisse zu deiner Suche!"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}})}search(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){return this.foundresult=!1,yield Qe.default.firestore().collection("entries").get().then(e=>{const n=[];for(const r of e.docs)if(r.data().start===t.start&&r.data().destination===t.end&&r.data().startDate.day===t.date.day&&r.data().startDate.month===t.date.month&&r.data().startDate.year===t.date.year&&r.data().transportType===t.type){this.foundresult=!0;const t=r.data();t.id=r.id,Qe.default.firestore().collection("users").doc(t.userId).get().then(e=>{t.name=`${e.data().firstname} ${e.data().lastname}`,t.profileimage=e.data().image,n.push(t),this.searchResults=n,localStorage.removeItem("searchResults"),localStorage.setItem("searchResults",JSON.stringify(this.searchResults))})}return this.searchResults})})}getUser(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){return Qe.default.firestore().collection("users").doc(t).get().then(t=>t.data())})}getEntry(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){return Qe.default.firestore().collection("entries").doc(t).get().then(t=>t.data())})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(jw),r.Yb(DO),r.Yb(nS))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),dA=(()=>{class t{constructor(t,e){this.afs=t,this.auth=e,this.user=null,this.entryCollection=t.collection("entries"),this.auth.user.subscribe(t=>{t&&(this.user=t)})}addEntry(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){let e;return t.setUserId(this.user.uid),yield this.entryCollection.add(Object.assign({},t)).then(t=>{e=t.id}),e})}getEntry(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){return(yield this.afs.collection("entries").doc(t).get().toPromise()).data()})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(jw),r.Yb(qe))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fA=(()=>{class t{constructor(t,e,n,r,i){this.authService=t,this.afs=e,this.auth=n,this.entryService=r,this.router=i,this.openRequestCollection=e.collection("open_requests"),this.db=Qe.default.firestore(),this.authService.getcurrentUser().then(t=>{this.user=t})}getOpenRequests(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const t=[],e=this.db.collection("open_requests");return yield e.where("requestedUserId","==",this.user.id).get().then(e=>{e.forEach(e=>{t.push({entryId:e.data().entryId,userId:e.data().userId,requestedUserId:e.data().requestedUserId,confirmed:e.data().confirmed,pending:e.data().pending,rejected:e.data().rejected,seatsNeeded:e.data().seatsNeeded,cubicMetersNeeded:e.data().cubicMetersNeeded,requestId:e.id})})}),t})}getMyOpenRequests(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const t=[],e=this.db.collection("open_requests");return yield e.where("userId","==",this.user.id).get().then(e=>{e.forEach(e=>{e.data().pending&&t.push({entryId:e.data().entryId,userId:e.data().userId,requestedUserId:e.data().requestedUserId,confirmed:e.data().confirmed,pending:e.data().pending,rejected:e.data().rejected,seatsNeeded:e.data().seatsNeeded,cubicMetersNeeded:e.data().cubicMetersNeeded,requestId:e.id})})}),t})}addOpenRequest(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){yield this.openRequestCollection.add(Object.assign({},t)),console.log(t),this.router.navigate(["/open-requests"])})}rejectRequest(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=this.db.collection("open_requests");yield e.doc(t).update({confirmed:!1,pending:!1,rejected:!0})})}confirmRequest(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=this.db.collection("open_requests");yield e.doc(t).update({confirmed:!0,pending:!1,rejected:!1})})}deleteRequest(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=this.db.collection("open_requests");yield e.doc(t).delete()})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(iS),r.Yb(jw),r.Yb(qe),r.Yb(dA),r.Yb(DO))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const pA=["selfClosingAlert"];function gA(t,e){if(1&t&&(r.Rb(0,"p",1),r.Rb(1,"ngb-alert",2,3),r.zc(3),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(1),r.kc("type",t.type),r.Ab(2),r.Ac(t.message)}}let mA=(()=>{class t{constructor(t){this.alertService=t,this.alerts=this.alertService.ALERTS}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(nS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-alert"]],viewQuery:function(t,e){if(1&t&&r.Gc(pA,1),2&t){let t;r.rc(t=r.cc())&&(e.selfClosingAlert=t.first)}},decls:1,vars:1,consts:[["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[3,"type"],["selfClosingAlert",""]],template:function(t,e){1&t&&r.xc(0,gA,4,2,"p",0),2&t&&r.kc("ngForOf",e.alerts)},directives:[ct,uT],styles:[""]}),t})();const bA=function(){return["/search-page"]};function vA(t,e){1&t&&(r.Rb(0,"div",12),r.ec(),r.Rb(1,"svg",13),r.Nb(2,"path",14),r.Qb(),r.Qb()),2&t&&(r.Ab(1),r.kc("routerLink",r.nc(1,bA)))}function yA(t,e){if(1&t&&(r.Rb(0,"li",7),r.Rb(1,"span"),r.zc(2,"Fahrzeug:"),r.Qb(),r.Rb(3,"span"),r.zc(4),r.Qb(),r.Qb()),2&t){const t=r.fc();r.Ab(4),r.Ac(t.element.vehicle)}}function _A(t,e){if(1&t&&(r.Rb(0,"li",7),r.Rb(1,"span"),r.zc(2,"Ladefl\xe4che:"),r.Qb(),r.Rb(3,"span"),r.zc(4),r.Qb(),r.Qb()),2&t){const t=r.fc();r.Ab(4),r.Bc("",t.element.cubicmeter,"m\xb3")}}function wA(t,e){if(1&t&&(r.Rb(0,"li",7),r.Rb(1,"span"),r.zc(2,"Pl\xe4tze:"),r.Qb(),r.Rb(3,"span"),r.zc(4),r.Qb(),r.Qb()),2&t){const t=r.fc();r.Ab(4),r.Ac(t.element.seats)}}function IA(t,e){if(1&t&&(r.Rb(0,"option",22),r.zc(1),r.Qb()),2&t){const t=e.index;r.lc("value",t+1),r.Ab(1),r.Bc(" ",t+1,"m\xb3 ")}}function CA(t,e){if(1&t){const t=r.Sb();r.Rb(0,"select",19),r.bc("ngModelChange",function(e){return r.tc(t),r.fc(2).cubicMetersNeeded=e}),r.Rb(1,"option",20),r.zc(2,"Anzahl an Kubikmetern w\xe4hlen"),r.Qb(),r.xc(3,IA,2,2,"option",21),r.Qb()}if(2&t){const t=r.fc(2);r.kc("ngModel",t.cubicMetersNeeded),r.Ab(3),r.kc("ngForOf",t.cubicmeters)}}function OA(t,e){if(1&t&&(r.Rb(0,"option",22),r.zc(1),r.Qb()),2&t){const t=e.index;r.lc("value",t+1),r.Ab(1),r.Bc(" Platz f\xfcr ",t+1," Mitfahrer ")}}function SA(t,e){if(1&t){const t=r.Sb();r.Rb(0,"select",23),r.bc("ngModelChange",function(e){return r.tc(t),r.fc(2).seatsNeeded=e}),r.Rb(1,"option",20),r.zc(2,"Anzahl an Mitfahrern w\xe4hlen"),r.Qb(),r.xc(3,OA,2,2,"option",21),r.Qb()}if(2&t){const t=r.fc(2);r.kc("ngModel",t.seatsNeeded),r.Ab(3),r.kc("ngForOf",t.seats)}}function kA(t,e){if(1&t&&(r.Rb(0,"div",15),r.Rb(1,"label",16),r.zc(2,"Ich ben\xf6tige:"),r.Qb(),r.xc(3,CA,4,2,"select",17),r.xc(4,SA,4,2,"select",18),r.Qb()),2&t){const t=r.fc();r.Ab(3),r.kc("ngIf","Mitfahrgelegenheit"!=t.element.transportType),r.Ab(1),r.kc("ngIf","Mitfahrgelegenheit"==t.element.transportType)}}function EA(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",26),r.bc("click",function(){return r.tc(t),r.fc(2).createRequest()}),r.zc(1," Anfragen "),r.Qb()}}function TA(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",26),r.bc("click",function(){return r.tc(t),r.fc(2).createRequest()}),r.zc(1," Anbieten "),r.Qb()}}function xA(t,e){if(1&t&&(r.Rb(0,"div",24),r.xc(1,EA,2,0,"button",25),r.xc(2,TA,2,0,"button",25),r.Qb()),2&t){const t=r.fc();r.Ab(1),r.kc("ngIf","Angebot"==t.element.entryType),r.Ab(1),r.kc("ngIf","Angebot"!=t.element.entryType)}}const AA=function(t){return[t]};let RA=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.route=e,this.authFire=n,this.auth=r,this.search=i,this.openRequestService=o,this.name="",this.cubicmeters=[],this.seatsNeeded="",this.cubicMetersNeeded="",this.confirmed=!1,this.pending=!0,this.rejected=!1,this.user=n.user,this.route.queryParams.subscribe(t=>{this.id=t.id,this.art=t.art}),JSON.parse(localStorage.getItem("searchResults"))&&(this.helper=JSON.parse(localStorage.getItem("searchResults")).filter(t=>t.id===this.id),this.element=this.helper[0])}ngOnInit(){this.user.subscribe(t=>{this.authenticatedUser=t.uid,console.log("current user"),console.log(this.authenticatedUser)}),this.fetchData().then(()=>{null!=this.element.seats?(console.log(this.element.seats),this.seats=new Array(parseInt(this.element.seats)),this.cubicmeters=[]):(console.log(this.element.cubicmeter),this.cubicmeters=new Array(this.element.cubicmeter),this.seats=[])}),this.element||this.router.navigate(["/search-page"])}createRequest(){"Mitfahrgelegenheit"===this.element.transportType?console.log("Anfrage/Angebot Mitfahrgelegenheit. Anzahl ben\xf6tigter Sitze:",this.seatsNeeded):console.log("Anfrage/Angebot G\xfctertransport. Anzahl ben\xf6tigter Kubikmeter:",this.cubicMetersNeeded),console.log(" this.element.id: "+this.element);const t=new lA(this.id,this.element.userId,this.authenticatedUser,this.confirmed,this.pending,this.rejected,this.seatsNeeded,this.cubicMetersNeeded);this.openRequestService.addOpenRequest(t)}fetchData(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const t=JSON.parse(localStorage.getItem("searchResults")).filter(t=>t.id===this.id);this.search.search(JSON.parse(localStorage.getItem("searchQuery")));const e=t[0];this.name=e.name,this.profileimage=e.profileimage,yield this.search.getEntry(this.id).then(t=>{this.element=t,console.log("Element ",this.element)})})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(DO),r.Mb(dC),r.Mb(qe),r.Mb(iS),r.Mb(hA),r.Mb(fA))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-detail-page"]],decls:47,vars:21,consts:[["class","d-flex justify-content-start align-items-start mt-4",4,"ngIf"],[1,"container","mt-2","text-center"],[1,"custom-heading","mb-4"],[1,"list-group","mx-2"],["aria-current","true",1,"list-group-item","active","py-1","d-flex","align-items-center"],[3,"routerLink"],["width","40","height","40",1,"rounded-circle","mr-2",3,"src"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["id","description",1,"text-left"],["class","form-group mt-5",4,"ngIf"],["class","row w-100 justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-start","align-items-start","mt-4"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short",3,"routerLink"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"form-group","mt-5"],["for","needSelection"],["class","form-control needSelection","name","cubicmeter-needed",3,"ngModel","ngModelChange",4,"ngIf"],["class","form-control","id","needSelection","name","seats-needed",3,"ngModel","ngModelChange",4,"ngIf"],["name","cubicmeter-needed",1,"form-control","needSelection",3,"ngModel","ngModelChange"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","needSelection","name","seats-needed",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","w-100","justify-content-center"],["class","btn my-5 bgCustomGreen font-weight-bold text-white",3,"click",4,"ngIf"],[1,"btn","my-5","bgCustomGreen","font-weight-bold","text-white",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"app-alert"),r.xc(1,vA,3,2,"div",0),r.Rb(2,"div",1),r.Rb(3,"h2",2),r.zc(4),r.Qb(),r.Rb(5,"ul",3),r.Rb(6,"li",4),r.Rb(7,"span"),r.zc(8,"Fahrer:"),r.Qb(),r.Rb(9,"span",5),r.Nb(10,"img",6),r.zc(11),r.Qb(),r.Qb(),r.Rb(12,"li",7),r.Rb(13,"span"),r.zc(14,"Start:"),r.Qb(),r.Rb(15,"span"),r.zc(16),r.Qb(),r.Qb(),r.Rb(17,"li",7),r.Rb(18,"span"),r.zc(19,"Ziel:"),r.Qb(),r.Rb(20,"span"),r.zc(21),r.Qb(),r.Qb(),r.Rb(22,"li",7),r.Rb(23,"span"),r.zc(24,"Datum:"),r.Qb(),r.Rb(25,"span"),r.zc(26),r.Qb(),r.Qb(),r.Rb(27,"li",7),r.Rb(28,"span"),r.zc(29,"Uhrzeit:"),r.Qb(),r.Rb(30,"span"),r.zc(31),r.Qb(),r.Qb(),r.xc(32,yA,5,1,"li",8),r.xc(33,_A,5,1,"li",8),r.xc(34,wA,5,1,"li",8),r.Rb(35,"li",7),r.Rb(36,"span"),r.zc(37,"Beschreibung:"),r.Qb(),r.Rb(38,"span",9),r.zc(39),r.Qb(),r.Qb(),r.Rb(40,"li",7),r.Rb(41,"span"),r.zc(42,"Preis:"),r.Qb(),r.Rb(43,"span"),r.zc(44),r.Qb(),r.Qb(),r.Qb(),r.xc(45,kA,5,2,"div",10),r.xc(46,xA,3,2,"div",11),r.Qb()),2&t&&(r.Ab(1),r.kc("ngIf",e.element),r.Ab(3),r.Ac(e.art),r.Ab(5),r.kc("routerLink",r.oc(19,AA,"/supplier-profile/"+e.element.userId)),r.Ab(1),r.lc("src",e.profileimage,r.uc),r.Ab(1),r.Ac(e.name),r.Ab(5),r.Ac(e.element.start),r.Ab(5),r.Ac(e.element.destination),r.Ab(5),r.Dc("",e.element.startDate.day,".",e.element.startDate.month,".",e.element.startDate.year,""),r.Ab(5),r.Cc("",e.element.startTime.hour,":",e.element.startTime.minute,""),r.Ab(1),r.kc("ngIf",e.element.vehicle),r.Ab(1),r.kc("ngIf","Mitfahrgelegenheit"!=e.element.transportType),r.Ab(1),r.kc("ngIf","Mitfahrgelegenheit"==e.element.transportType),r.Ab(5),r.Ac(e.element.description),r.Ab(5),r.Bc("",e.element.price," \u20ac"),r.Ab(1),r.kc("ngIf",e.auth.isLoggedIn),r.Ab(1),r.kc("ngIf",e.auth.isLoggedIn))},directives:[mA,ht,NO,Vk,rk,Ak,qk,Hk,ct],styles:["#pfeil[_ngcontent-%COMP%]{cursor:pointer}.list-group-item.active[_ngcontent-%COMP%]{background-color:rgba(71,159,118,.2);color:#000;border:none}.list-group-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#description[_ngcontent-%COMP%]{max-width:55%}"]}),t})();const DA=function(){return["/create-entry"]};function NA(t,e){1&t&&(r.Rb(0,"a",27),r.zc(1," Angebot/Gesuch erstellen "),r.Qb()),2&t&&r.kc("routerLink",r.nc(1,DA))}const jA=function(t,e,n){return{year:t,month:e,day:n}};let PA=(()=>{class t{constructor(t,e,n,r){this.authService=t,this.searchService=e,this.alertService=n,this.afa=r,this.year=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth()+1,this.currentDay=(new Date).getDate(),this.type="",this.loggedInUser=null,this.afa.user.subscribe(t=>{t&&(this.loggedInUser=t)})}ngOnInit(){}search(){if(void 0!==this.start&&void 0!==this.end&&void 0!==this.date&&""!==this.type)this.searchService.setQuery(this.start,this.end,this.date,this.type);else{const t={type:"danger",message:"Bitte f\xfclle alle Felder aus"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(iS),r.Mb(hA),r.Mb(nS),r.Mb(qe))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-home"]],decls:58,vars:10,consts:[["id","searchWrapper"],["id","searchInnerWrapper"],[1,"d-flex","justify-content-center","align-items-center","h-100"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],[1,"h4","customFont","font-weight-bold"],[1,"row","w-100","justify-content-center"],[1,"col-6","px-1"],["type","text","placeholder","z.B. K\xf6ln","name","start",1,"form-control","mt-n2",3,"ngModel","ngModelChange"],["type","text","ngbDatepicker","","placeholder","Datum","name","date",1,"form-control","custom-select","mt-3",3,"minDate","ngModel","click","ngModelChange"],["d","ngbDatepicker"],["type","text","placeholder","z.B. Berlin","name","end",1,"form-control","mt-n2",3,"ngModel","ngModelChange"],["name","type",1,"custom-select","mt-3",3,"ngModel","ngModelChange"],["selected","","disabled","","value",""],["value","Ladefl\xe4che"],["value","Mitfahrgelegenheit"],[1,"btn","mt-3","bgCustomGreen","font-weight-bold","text-white",3,"click"],[1,"container","text-center","mt-4","pb-4"],[1,"customFont","font-weight-bold"],[1,"row","justify-content-center","m-0","mt-5","container","align-items-center"],[1,"col","d-flex","justify-content-center"],[1,"rounded-circle","bgCustomGreen","customFont","font-weight-bold","text-white","round-number"],[1,"m-0","font-weight-bold"],[1,"col-8","text-left","d-flex","align-items-center"],[1,"m-0"],[1,"row","justify-content-center","m-0","mt-4","container","align-items-center"],[1,"row","min-vw-100","justify-content-center","d-inline-flex","m-0","mb-5","pb-4"],["class","btn mt-3 bgCustomGreen font-weight-bold text-white",3,"routerLink",4,"ngIf"],[1,"btn","mt-3","bgCustomGreen","font-weight-bold","text-white",3,"routerLink"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.Rb(3,"div",3),r.Rb(4,"h1",4),r.zc(5," Finde deinen (Mit-)Fahrer "),r.Qb(),r.Rb(6,"div",5),r.Rb(7,"div",6),r.Rb(8,"p"),r.zc(9,"Start"),r.Qb(),r.Rb(10,"input",7),r.bc("ngModelChange",function(t){return e.start=t}),r.Qb(),r.Rb(11,"input",8,9),r.bc("click",function(){return r.tc(t),r.sc(12).toggle()})("ngModelChange",function(t){return e.date=t}),r.Qb(),r.Qb(),r.Rb(13,"div",6),r.Rb(14,"p"),r.zc(15,"Ziel"),r.Qb(),r.Rb(16,"input",10),r.bc("ngModelChange",function(t){return e.end=t}),r.Qb(),r.Rb(17,"select",11),r.bc("ngModelChange",function(t){return e.type=t}),r.Rb(18,"option",12),r.zc(19,"Art der Fahrt"),r.Qb(),r.Rb(20,"option",13),r.zc(21,"G\xfctertransport"),r.Qb(),r.Rb(22,"option",14),r.zc(23,"Personentransport"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(24,"div",5),r.Rb(25,"button",15),r.bc("click",function(){return e.search()}),r.zc(26," Suche starten "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(27,"app-alert"),r.Rb(28,"div"),r.Rb(29,"div",16),r.Rb(30,"h4",17),r.zc(31,"So funktioniert's"),r.Qb(),r.Rb(32,"div",18),r.Rb(33,"div",19),r.Rb(34,"div",20),r.Rb(35,"h4",21),r.zc(36,"1"),r.Qb(),r.Qb(),r.Qb(),r.Rb(37,"div",22),r.Rb(38,"p",23),r.zc(39," Finde Deinen Cargonauten oder biete selbst Fahrten an. "),r.Qb(),r.Qb(),r.Qb(),r.Rb(40,"div",24),r.Rb(41,"div",19),r.Rb(42,"div",20),r.Rb(43,"h4",21),r.zc(44,"2"),r.Qb(),r.Qb(),r.Qb(),r.Rb(45,"div",22),r.Rb(46,"p",23),r.zc(47," Vereinbare eine Fahrt \xfcber unsere Plattform. Abgerechnet wird in Bar vor Beginn der Fahrt. "),r.Qb(),r.Qb(),r.Qb(),r.Rb(48,"div",24),r.Rb(49,"div",19),r.Rb(50,"div",20),r.Rb(51,"h4",21),r.zc(52,"3"),r.Qb(),r.Qb(),r.Qb(),r.Rb(53,"div",22),r.Rb(54,"p",23),r.zc(55," Fahre mit deinem (Mit-)Fahrer zum gew\xfcnschten Ziel oder lasse Deine G\xfcter transportieren. "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(56,"div",25),r.xc(57,NA,2,2,"a",26),r.Qb(),r.Qb()}2&t&&(r.Ab(10),r.kc("ngModel",e.start),r.Ab(1),r.kc("minDate",r.qc(6,jA,e.year,e.currentMonth,e.currentDay))("ngModel",e.date),r.Ab(5),r.kc("ngModel",e.end),r.Ab(1),r.kc("ngModel",e.type),r.Ab(40),r.kc("ngIf",null!=e.loggedInUser))},directives:[US,rk,Ak,dx,Vk,qk,Hk,mA,ht,jO],styles:["#searchWrapper[_ngcontent-%COMP%]{height:17rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#searchInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#searchInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}.round-number[_ngcontent-%COMP%]{height:60px;width:60px;display:flex;justify-content:center;align-items:center}"]}),t})();class MA{constructor(t,e,n,r){this.entryId=t,this.status=e,this.date=n,this.done=r}setDate(t){this.date=t}}let LA=(()=>{class t{}return t.booked="booked",t.started="started",t.arrived="arrived",t.finished="finished",t})(),FA=(()=>{class t{constructor(t,e){this.afs=t,this.auth=e,this.user=null,this.db=Qe.default.firestore(),this.trackingCollection=t.collection("tracking"),this.auth.user.subscribe(t=>{t&&(this.user=t)})}addTracking(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){yield this.trackingCollection.add(Object.assign({},t))})}updateTracking(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function*(){yield this.trackingCollection.doc(t).update({done:e,date:(new Date).toLocaleDateString()+", "+(new Date).toLocaleTimeString()})})}getTrackingIDByEntryIdAndStatus(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function*(){let n;const r=this.db.collection("tracking");return yield r.where("entryId","==",t).get().then(t=>{t.forEach(t=>{t.data().status===e&&(n=t.id)})}),n})}getTrackingByEntryId(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=[],n=this.db.collection("tracking");return yield n.where("entryId","==",t).get().then(t=>{t.forEach(t=>{e.push(new MA(t.data().entryId,t.data().status,t.data().date,t.data().done))})}),e})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(jw),r.Yb(qe))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),UA=(()=>{class t{constructor(t,e){this.auth=t,this.afs=e,this.user=null,this.db=Qe.default.firestore(),this.auth.user.subscribe(t=>{t&&(this.user=t)}),this.vehicleCollection=e.collection("vehicles"),this.vehicles=this.vehicleCollection.valueChanges()}addVehicle(t){t.setUserId(Qe.default.auth().currentUser.uid),this.vehicleCollection.add(Object.assign({},t))}getVehicles(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=[],n=this.db.collection("vehicles");return yield n.where("userId","==",t).get().then(t=>{t.forEach(t=>{const n=new rw;n.setVehicleId(t.id),n.setUserId(t.data().userId),n.setTransportType(t.data().transportType),n.setBrand(t.data().brand),n.setYearOfManufacture(t.data().yearOfManufacture),n.setNumberOfSeats(t.data().numberOfSeats),n.setLength(t.data().length),n.setHeight(t.data().height),n.setWidth(t.data().width),e.push(n)})}),e})}deleteVehicle(t,e){return console.log(t),console.log(e),e===this.user.uid?this.afs.collection("vehicles").doc(t).delete():null}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(qe),r.Yb(jw))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function VA(t,e){if(1&t&&(r.Rb(0,"option",38),r.zc(1),r.Qb()),2&t){const t=e.$implicit;r.kc("value",t.brand),r.Ab(1),r.Bc(" ",t.brand," ")}}function qA(t,e){if(1&t&&(r.Rb(0,"div"),r.Rb(1,"div",12),r.Rb(2,"label",35),r.zc(3,"Fahrzeug"),r.Qb(),r.Rb(4,"select",36),r.xc(5,VA,2,2,"option",37),r.Qb(),r.Qb(),r.Qb()),2&t){const t=r.fc();r.Ab(5),r.kc("ngForOf",t.vehicles)}}function BA(t,e){1&t&&(r.Rb(0,"div"),r.Rb(1,"div",12),r.Rb(2,"label",39),r.zc(3,"L\xe4nge der Fl\xe4che in cm"),r.Qb(),r.Nb(4,"input",40),r.Qb(),r.Rb(5,"div",12),r.Rb(6,"label",41),r.zc(7,"Breite der Fl\xe4che in cm"),r.Qb(),r.Nb(8,"input",42),r.Qb(),r.Rb(9,"div",12),r.Rb(10,"label",43),r.zc(11,"H\xf6he der Fl\xe4che in cm"),r.Qb(),r.Nb(12,"input",44),r.Qb(),r.Qb())}function zA(t,e){1&t&&(r.Rb(0,"div",12),r.Rb(1,"label",45),r.zc(2,"Anzahl der Sitzpl\xe4tze"),r.Qb(),r.Nb(3,"input",46),r.Qb())}function QA(t,e){1&t&&(r.Rb(0,"div"),r.Rb(1,"div",12),r.Rb(2,"label",47),r.zc(3,"Preis in \u20ac"),r.Qb(),r.Nb(4,"input",48),r.Qb(),r.Qb())}const HA=function(){return["/"]},WA=function(t,e,n){return{year:t,month:e,day:n}};let GA=(()=>{class t{constructor(t,e,n,r,i,o){this.auth=t,this.router=e,this.entryService=n,this.trackingService=r,this.vehicleService=i,this.alertService=o,this.form=new kk({type:new Sk,start:new Sk,end:new Sk,date:new Sk,time:new Sk,vehicle:new Sk,searchtype:new Sk,length:new Sk,width:new Sk,height:new Sk,seats:new Sk,description:new Sk,price:new Sk}),this.year=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth()+1,this.currentDay=(new Date).getDate(),this.time={hour:13,minute:30},this.vehicles=[],this.user=t.user}ngOnInit(){this.user.subscribe(t=>{this.authenticatedUser=t,this.loadVehicles()})}onSubmit(){if(null!==this.form.value.type&&null!==this.form.value.start&&null!==this.form.value.end&&null!==this.form.value.date&&null!==this.form.value.time&&null!==this.form.value.searchtype&&null!==this.form.value.description&&(null!==this.form.value.seats||null!==this.form.value.length&&null!==this.form.value.width&&null!==this.form.value.height)){const t=new nw(this.form.value.type,this.form.value.start,this.form.value.end,this.form.value.date,this.form.value.time,this.form.value.description,this.form.value.price,this.form.value.searchtype,this.form.value.length,this.form.value.width,this.form.value.height,this.form.value.seats,"");this.entryService.addEntry(t).then(t=>{this.initializeTracking(t)});const e={type:"success",message:"Dein Eintrag wurde erstellt"};this.router.navigate([""]),this.alertService.ALERTS.push(e),setTimeout(()=>this.alertService.close(e),5e3)}else{const t={type:"danger",message:"Bitte f\xfclle alle Felder aus"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}}initializeTracking(t){const e=new MA(t,LA.booked,(new Date).toLocaleDateString(),!0),n=new MA(t,LA.started,null,!1),r=new MA(t,LA.arrived,null,!1),i=new MA(t,LA.finished,null,!1);this.trackingService.addTracking(e).then(()=>this.trackingService.addTracking(n).then(()=>this.trackingService.addTracking(r).then(()=>this.trackingService.addTracking(i))))}loadVehicles(){this.vehicleService.getVehicles(this.authenticatedUser.uid).then(t=>{this.vehicles=t})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(qe),r.Mb(DO),r.Mb(dA),r.Mb(FA),r.Mb(UA),r.Mb(nS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-create-entry"]],decls:59,vars:13,consts:[["id","createWrapper"],["id","createInnerWrapper"],[1,"d-flex","justify-content-start","align-items-start",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"d-flex","justify-content-center","align-items-center","h-75"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],[1,"h4","customFont","font-weight-bold"],[1,"container","mt-5","mb-5"],[1,"row","d-flex","justify-content-center","flex-col","align-items-center"],[1,"col-sm-12","col-md-12","col-lg-8","col-xl-6"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","typeSelect"],["formControlName","type","id","typeSelect",1,"form-control"],["selected",""],["value","Gesuch"],["for","startInput"],["formControlName","start","type","text","id","startInput","aria-describedby","start","placeholder","z.B. K\xf6ln",1,"form-control"],["for","endInput"],["formControlName","end","type","text","id","endInput","aria-describedby","end","placeholder","z.B. Berlin",1,"form-control"],["for","dateInput"],["formControlName","date","type","text","id","dateInput","aria-describedby","date","ngbDatepicker","","placeholder","Datum",1,"form-control","custom-select","mt-3",3,"minDate","click"],["d","ngbDatepicker"],["for","timeInput"],["formControlName","time","id","timeInput","aria-describedby","time",3,"ngModel","ngModelChange"],[4,"ngIf"],["for","searchType"],["formControlName","searchtype","id","searchType",1,"form-control"],["value","Mitfahrgelegenheit"],[4,"ngIf","ngIfElse"],["elseBlock",""],["for","searchDescription"],["formControlName","description","type","text","id","searchDescription","aria-describedby","searchDescription","placeholder","Beschreibe dein Angebot/Gesuch",1,"form-control"],["type","submit",1,"btn","bgCustomGreen"],["for","vehicleSelect"],["formControlName","vehicle","id","vehicleSelect",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","length"],["formControlName","length","type","text","id","length","aria-describedby","length","placeholder","z.B. 200",1,"form-control"],["for","width"],["formControlName","width","type","text","id","width","aria-describedby","width","placeholder","z.B. 120",1,"form-control"],["for","height"],["formControlName","height","type","text","id","height","aria-describedby","height","placeholder","z.B. 100",1,"form-control"],["for","seats"],["formControlName","seats","type","text","id","seats","aria-describedby","seats","placeholder","z.B. 2",1,"form-control"],["for","price"],["formControlName","price","type","text","id","price","aria-describedby","price","placeholder","z.B. 30",1,"form-control"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.ec(),r.Rb(3,"svg",3),r.Nb(4,"path",4),r.Qb(),r.Qb(),r.dc(),r.Rb(5,"div",5),r.Rb(6,"div",6),r.Rb(7,"h1",7),r.zc(8," Angebot/Gesuch erstellen "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(9,"app-alert"),r.Rb(10,"div",8),r.Rb(11,"div",9),r.Rb(12,"div",10),r.Rb(13,"form",11),r.bc("ngSubmit",function(){return e.onSubmit()}),r.Rb(14,"div",12),r.Rb(15,"label",13),r.zc(16,"Was m\xf6chten Sie anlegen?"),r.Qb(),r.Rb(17,"select",14),r.Rb(18,"option",15),r.zc(19,"Angebot"),r.Qb(),r.Rb(20,"option",16),r.zc(21,"Gesuch"),r.Qb(),r.Qb(),r.Qb(),r.Rb(22,"div",12),r.Rb(23,"label",17),r.zc(24,"Start"),r.Qb(),r.Nb(25,"input",18),r.Qb(),r.Rb(26,"div",12),r.Rb(27,"label",19),r.zc(28,"Ziel"),r.Qb(),r.Nb(29,"input",20),r.Qb(),r.Rb(30,"div",12),r.Rb(31,"label",21),r.zc(32,"Datum"),r.Qb(),r.Rb(33,"input",22,23),r.bc("click",function(){return r.tc(t),r.sc(34).toggle()}),r.Qb(),r.Qb(),r.Rb(35,"div",12),r.Rb(36,"label",24),r.zc(37,"Uhrzeit"),r.Qb(),r.Rb(38,"ngb-timepicker",25),r.bc("ngModelChange",function(t){return e.time=t}),r.Qb(),r.Qb(),r.xc(39,qA,6,1,"div",26),r.Rb(40,"div",12),r.Rb(41,"label",27),r.zc(42,"Was m\xf6chten Sie anbieten/suchen?"),r.Qb(),r.Rb(43,"select",28),r.Rb(44,"option",15),r.zc(45,"Ladefl\xe4che"),r.Qb(),r.Rb(46,"option",29),r.zc(47,"Mitfahrgelegenheit"),r.Qb(),r.Qb(),r.Qb(),r.xc(48,BA,13,0,"div",30),r.xc(49,zA,4,0,"ng-template",null,31,r.yc),r.Rb(51,"div",12),r.Rb(52,"label",32),r.zc(53,"Beschreibung"),r.Qb(),r.Nb(54,"textarea",33),r.Qb(),r.xc(55,QA,5,0,"div",26),r.Rb(56,"div",6),r.Rb(57,"button",34),r.zc(58," Erstellen "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=r.sc(50);r.Ab(2),r.kc("routerLink",r.nc(8,HA)),r.Ab(11),r.kc("formGroup",e.form),r.Ab(20),r.kc("minDate",r.qc(9,WA,e.year,e.currentMonth,e.currentDay)),r.Ab(5),r.kc("ngModel",e.time),r.Ab(1),r.kc("ngIf","Angebot"===e.form.value.type),r.Ab(9),r.kc("ngIf","Ladefl\xe4che"===e.form.value.searchtype)("ngIfElse",t),r.Ab(7),r.kc("ngIf","Angebot"===e.form.value.type)}},directives:[NO,mA,Rk,ik,Pk,Vk,rk,Lk,qk,Hk,US,dx,Yx,ht,ct],styles:["#createWrapper[_ngcontent-%COMP%]{height:17rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#createInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#createInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}.btn[_ngcontent-%COMP%]{color:#fff}"]}),t})();function KA(t,e){if(1&t&&(r.Rb(0,"h1",10),r.zc(1),r.Qb()),2&t){const t=r.fc();r.Ab(1),r.Bc(" ",t.search.searchResults.length," Ergebnis f\xfcr Deine Route ")}}function $A(t,e){if(1&t&&(r.Rb(0,"h1",10),r.zc(1),r.Qb()),2&t){const t=r.fc();r.Ab(1),r.Bc(" ",t.search.searchResults.length," Ergebnisse f\xfcr Deine Route ")}}function YA(t,e){if(1&t&&(r.Rb(0,"h4",10),r.zc(1),r.Qb()),2&t){const t=r.fc().$implicit;r.Ab(1),r.Fc(" ",t.startDate.day,".",t.startDate.month,".",t.startDate.year," - ",t.startTime.hour,":",t.startTime.minute," ")}}function XA(t,e){if(1&t&&(r.Rb(0,"span",24),r.zc(1),r.Qb()),2&t){const t=r.fc().$implicit;r.Ab(1),r.Bc("",t.cubicmeter," Kubikmeter")}}function JA(t,e){if(1&t&&(r.Rb(0,"span",24),r.zc(1),r.Qb()),2&t){const t=r.fc().$implicit;r.Ab(1),r.Bc("",t.seats," Sitzpl\xe4tze")}}function ZA(t,e){if(1&t&&(r.Rb(0,"span",25),r.zc(1),r.Qb()),2&t){const t=r.fc().$implicit;r.Ab(1),r.Bc("",t.price," \u20ac")}}const tR=function(){return["/detail-page"]},eR=function(t,e){return{id:t,art:e}};function nR(t,e){if(1&t&&(r.Rb(0,"div",11),r.Rb(1,"div",12),r.Rb(2,"div",13),r.Rb(3,"div",14),r.Rb(4,"div",15),r.Rb(5,"div",16),r.Nb(6,"img",17),r.Qb(),r.Rb(7,"div",18),r.xc(8,YA,2,5,"h4",19),r.Rb(9,"h6",20),r.zc(10),r.Qb(),r.Rb(11,"h6",21),r.zc(12),r.Qb(),r.Rb(13,"p"),r.zc(14),r.Qb(),r.xc(15,XA,2,1,"span",22),r.xc(16,JA,2,1,"ng-template",null,8,r.yc),r.xc(18,ZA,2,1,"span",23),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit,n=r.sc(17);r.kc("routerLink",r.nc(11,tR))("queryParams",r.pc(12,eR,t.id,t.entryType)),r.Ab(6),r.lc("src",t.profileimage,r.uc),r.Ab(2),r.kc("ngIf",t.startDate),r.Ab(2),r.Cc(" ",t.start," - ",t.destination," "),r.Ab(2),r.Ac(t.name),r.Ab(2),r.Ac(t.description),r.Ab(1),r.kc("ngIf","Ladefl\xe4che"===t.transportType)("ngIfElse",n),r.Ab(3),r.kc("ngIf","Angebot"==t.entryType)}}const rR=function(){return["/"]};let iR=(()=>{class t{constructor(t,e){this.search=t,this.router=e,this.search.search(JSON.parse(localStorage.getItem("searchQuery")))}ngOnInit(){this.count=this.search.searchResults.length,this.search.searchResults||this.router.navigate(["/"])}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(hA),r.Mb(DO))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-search-page"]],decls:14,vars:7,consts:[["id","searchWrapper"],["id","searchInnerWrapper"],[1,"d-flex","justify-content-start","align-items-start",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"d-flex","justify-content-center","align-items-center","h-75"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],["class","h4 customFont font-weight-bold",4,"ngIf","ngIfElse"],["elseBlock",""],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"h4","customFont","font-weight-bold"],[3,"routerLink","queryParams"],[1,"d-flex","justify-content-center","flex-row","align-items-center","container-fluid"],[1,"card","mt-2","w-100","p-0"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-3"],["width","100","height","100",1,"rounded-circle",3,"src"],[1,"col-9","pl-5"],["class","h4 customFont font-weight-bold",4,"ngIf"],[1,"text-muted"],[1,"mt-n1"],["class","\n                  badge\n                  rounded-pill\n                  bgCustomGreen\n                  font-weight-bold\n                  customFont\n                  p-2\n                ","style","color: white",4,"ngIf","ngIfElse"],["class","\n                  badge\n                  rounded-pill\n                  bgCustomGreen\n                  font-weight-bold\n                  customFont\n                  ml-3\n                  p-2\n                ","style","color: white",4,"ngIf"],[1,"badge","rounded-pill","bgCustomGreen","font-weight-bold","customFont","p-2",2,"color","white"],[1,"badge","rounded-pill","bgCustomGreen","font-weight-bold","customFont","ml-3","p-2",2,"color","white"]],template:function(t,e){if(1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.ec(),r.Rb(3,"svg",3),r.Nb(4,"path",4),r.Qb(),r.Qb(),r.dc(),r.Rb(5,"div",5),r.Rb(6,"div",6),r.xc(7,KA,2,1,"h1",7),r.xc(8,$A,2,1,"ng-template",null,8,r.yc),r.Rb(10,"h6"),r.zc(11),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(12,"app-alert"),r.xc(13,nR,19,15,"div",9)),2&t){const t=r.sc(9);r.Ab(2),r.kc("routerLink",r.nc(6,rR)),r.Ab(5),r.kc("ngIf",1==e.search.searchResults.length)("ngIfElse",t),r.Ab(4),r.Cc(" ",e.search.searchResults[0].start," - ",e.search.searchResults[0].destination," "),r.Ab(2),r.kc("ngForOf",e.search.searchResults)}},directives:[NO,ht,mA,ct],styles:["#searchWrapper[_ngcontent-%COMP%]{height:17rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#searchInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#searchInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}"]}),t})();const oR=function(){return["/register"]};let sR=(()=>{class t{constructor(t,e){this.auth=t,this.authService=e,this.form=new kk({email:new Sk,password:new Sk})}ngOnInit(){}onSubmit(){this.authService.login(this.form.value.email,this.form.value.password)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(qe),r.Mb(iS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-login"]],decls:23,vars:3,consts:[["id","registerWrapper"],[1,"p-4","h4","customFont","font-weight-bold",2,"text-align","center"],[1,"d-flex","justify-content-center","align-items-center","h-200"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],[1,"row","justify-content-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","emailInput"],["formControlName","email","type","email","id","emailInput","placeholder","E-Mail","required","",1,"form-control"],["for","passwordInput"],["formControlName","password","type","password","id","passwordInput","placeholder","Passwort","required","",1,"form-control"],[1,"p-5","row","justify-content-center"],["type","submit",1,"btn","mt-3","bgCustomGreen","font-weight-bold","text-white"],[2,"font-size","small"],[2,"color","#5cad87",3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"app-alert"),r.Rb(1,"div",0),r.Rb(2,"h1",1),r.zc(3," Einloggen "),r.Qb(),r.Rb(4,"div",2),r.Rb(5,"div",3),r.Rb(6,"div",4),r.Rb(7,"form",5),r.bc("ngSubmit",function(){return e.onSubmit()}),r.Rb(8,"div",6),r.Rb(9,"label",7),r.zc(10,"E-Mail"),r.Qb(),r.Nb(11,"input",8),r.Qb(),r.Rb(12,"div",6),r.Rb(13,"label",9),r.zc(14,"Passwort"),r.Qb(),r.Nb(15,"input",10),r.Qb(),r.Rb(16,"div",11),r.Rb(17,"button",12),r.zc(18," Einloggen "),r.Qb(),r.Qb(),r.Rb(19,"p",13),r.zc(20," Du hast noch kein Konto? "),r.Rb(21,"a",14),r.zc(22,"Jetzt registrieren!"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(7),r.kc("formGroup",e.form),r.Ab(14),r.kc("routerLink",r.nc(2,oR)))},directives:[mA,Rk,ik,Pk,US,rk,Lk,Gk,jO],styles:[""]}),t})(),aR=(()=>{class t{constructor(t,e){this.authService=t,this.alertService=e,this.user=[],this.form=new kk({lastName:new Sk,firstName:new Sk,email:new Sk,birthday:new Sk,image:new Sk,password:new Sk,passwordControl:new Sk})}ngOnInit(){}onSubmit(){if(this.form.value.password!==this.form.value.passwordControl&&""!==this.form.value.lastName&&""!==this.form.value.firstName&&""!==this.form.value.email&&""!==this.form.value.password&&""!==this.form.value.passwordControl){const t={type:"danger",message:"Passw\xf6rter stimmen nicht \xfcberein!"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}else this.authService.register(this.form.value.lastName,this.form.value.firstName,this.form.value.email,this.form.value.birthday,this.form.value.image,this.form.value.password)}setProfileImage(t){this.authService.file=t.target.files[0]}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(iS),r.Mb(nS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-register"]],decls:42,vars:1,consts:[["id","registerWrapper"],[1,"p-4","h4","customFont","font-weight-bold",2,"text-align","center"],[1,"d-flex","justify-content-center","align-items-center","h-200"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],[1,"row","justify-content-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","lastnameInput",1,"form-label"],["formControlName","lastName","type","text","id","lastnameInput","aria-describedby","lastnameInput","placeholder","Name","required","",1,"form-control"],["for","firstnameInput"],["formControlName","firstName","type","text","id","firstnameInput","aria-describedby","firstnameInput","placeholder","Vorname","required","",1,"form-control"],["for","emailInput"],["formControlName","email","type","email","id","emailInput","aria-describedby","emailInput","placeholder","E-Mail","required","",1,"form-control"],["for","birthdayInput"],["formControlName","birthday","type","date","id","birthdayInput","aria-describedby","birthdayInput","placeholder","Geburtstag","min","1930-12-31","max","2005-12-31",1,"form-control"],["for","imageUploadInput"],["formControlName","image","type","file","id","imageUploadInput","placeholder","Profilbild hochladen",1,"form-control-file",3,"change"],[1,"form-group","needs-validation"],["for","passwordInput"],["formControlName","password","type","password","id","passwordInput","placeholder","Passwort","required","",1,"form-control"],["for","passwordControlInput"],["formControlName","passwordControl","type","password","id","passwordControlInput","placeholder","Passwort","required","",1,"form-control"],[2,"font-size","small"],[1,"p-5","row","justify-content-center"],["type","submit",1,"btn","mt-3","bgCustomGreen","font-weight-bold","text-white"]],template:function(t,e){1&t&&(r.Nb(0,"app-alert"),r.Rb(1,"div",0),r.Rb(2,"h1",1),r.zc(3," Registrieren "),r.Qb(),r.Rb(4,"div",2),r.Rb(5,"div",3),r.Rb(6,"div",4),r.Rb(7,"form",5),r.bc("ngSubmit",function(){return e.onSubmit()}),r.Rb(8,"div",6),r.Rb(9,"label",7),r.zc(10,"Name*"),r.Qb(),r.Nb(11,"input",8),r.Qb(),r.Rb(12,"div",6),r.Rb(13,"label",9),r.zc(14,"Vorname*"),r.Qb(),r.Nb(15,"input",10),r.Qb(),r.Rb(16,"div",6),r.Rb(17,"label",11),r.zc(18,"E-Mail*"),r.Qb(),r.Nb(19,"input",12),r.Qb(),r.Rb(20,"div",6),r.Rb(21,"label",13),r.zc(22,"Geburtstag"),r.Qb(),r.Nb(23,"input",14),r.Qb(),r.Rb(24,"div",6),r.Rb(25,"label",15),r.zc(26,"Profilbild"),r.Qb(),r.Rb(27,"input",16),r.bc("change",function(t){return e.setProfileImage(t)}),r.Qb(),r.Qb(),r.Rb(28,"div",17),r.Rb(29,"label",18),r.zc(30,"Passwort*"),r.Qb(),r.Nb(31,"input",19),r.Qb(),r.Rb(32,"div",6),r.Rb(33,"label",20),r.zc(34,"Passwort best\xe4tigen*"),r.Qb(),r.Nb(35,"input",21),r.Qb(),r.Nb(36,"br"),r.Rb(37,"p",22),r.zc(38,"*Pflichtfleder"),r.Qb(),r.Rb(39,"div",23),r.Rb(40,"button",24),r.zc(41," Registrieren "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(7),r.kc("formGroup",e.form))},directives:[mA,Rk,ik,Pk,US,rk,Lk,Gk],styles:[""]}),t})();function uR(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div"),r.Rb(1,"div",1),r.Rb(2,"div",2),r.Rb(3,"div",3),r.ec(),r.Rb(4,"svg",4),r.Nb(5,"path",5),r.Qb(),r.Qb(),r.dc(),r.Rb(6,"div",6),r.Rb(7,"div",7),r.Rb(8,"h1",8),r.zc(9," Fahrzeug anlegen "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(10,"app-alert"),r.Rb(11,"div",9),r.Rb(12,"div",10),r.Rb(13,"div",11),r.Rb(14,"form",12),r.bc("ngSubmit",function(){return r.tc(t),r.fc().createVehicle()}),r.Rb(15,"div",13),r.Rb(16,"label",14),r.zc(17,"Transportart"),r.Qb(),r.Rb(18,"select",15),r.Rb(19,"option"),r.zc(20,"G\xfcter"),r.Qb(),r.Rb(21,"option"),r.zc(22,"PKW"),r.Qb(),r.Qb(),r.Qb(),r.Rb(23,"div",13),r.Rb(24,"label",16),r.zc(25,"Marke"),r.Qb(),r.Nb(26,"input",17),r.Qb(),r.Rb(27,"div",13),r.Rb(28,"label",18),r.zc(29,"Baujahr"),r.Qb(),r.Nb(30,"input",19),r.Qb(),r.Rb(31,"div",13),r.Rb(32,"label",20),r.zc(33,"L\xe4nge"),r.Qb(),r.Nb(34,"input",21),r.Qb(),r.Rb(35,"div",13),r.Rb(36,"label",22),r.zc(37,"Breite"),r.Qb(),r.Nb(38,"input",23),r.Qb(),r.Rb(39,"div",13),r.Rb(40,"label",24),r.zc(41,"H\xf6he"),r.Qb(),r.Nb(42,"input",25),r.Qb(),r.Rb(43,"div",13),r.Rb(44,"label",26),r.zc(45,"Sitzpl\xe4tze"),r.Qb(),r.Nb(46,"input",27),r.Qb(),r.Rb(47,"div",7),r.Rb(48,"button",28),r.zc(49,"Erstellen"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=r.fc();r.Ab(14),r.kc("formGroup",t.vehicleFrontend)}}let cR=(()=>{class t{constructor(t,e,n,r){this.auth=t,this.vehicleService=e,this.router=n,this.alertService=r,this.vehicleFrontend=new kk({brand:new Sk,height:new Sk,length:new Sk,width:new Sk,numberOfSeats:new Sk,transportType:new Sk,yearOfManufacture:new Sk}),this.user=t.user}ngOnInit(){this.user.subscribe(t=>{this.authenticatedUser=t})}valueIsFilledOut(t){return null!=t}createVehicle(){const t=new rw;if(this.valueIsFilledOut(this.vehicleFrontend.value.brand)&&this.valueIsFilledOut(this.vehicleFrontend.value.height)&&this.valueIsFilledOut(this.vehicleFrontend.value.length)&&this.valueIsFilledOut(this.vehicleFrontend.value.width)&&this.valueIsFilledOut(this.vehicleFrontend.value.numberOfSeats)&&this.valueIsFilledOut(this.vehicleFrontend.value.transportType)){t.brand=this.vehicleFrontend.value.brand,t.height=this.vehicleFrontend.value.height,t.length=this.vehicleFrontend.value.length,t.width=this.vehicleFrontend.value.width,t.numberOfSeats=this.vehicleFrontend.value.numberOfSeats,t.transportType=this.vehicleFrontend.value.transportType,t.yearOfManufacture=this.vehicleFrontend.value.yearOfManufacture,this.vehicleService.addVehicle(t);const e={type:"success",message:"Dein Fahrzeug wurde hinzugef\xfcgt"};this.router.navigate(["my-profile"]),this.alertService.ALERTS.push(e),setTimeout(()=>this.alertService.close(e),5e3)}else{const t={type:"danger",message:"Bitte f\xfclle alle Felder aus"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}}deleteVehicleByIdAndUser(){this.vehicleService.deleteVehicle(null,null)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(qe),r.Mb(UA),r.Mb(DO),r.Mb(nS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-vehicle-management"]],decls:1,vars:1,consts:[[4,"ngIf"],["id","createWrapper"],["id","createInnerWrapper"],[1,"d-flex","justify-content-start","align-items-start"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"d-flex","justify-content-center","align-items-center","h-75"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],[1,"h4","customFont","font-weight-bold"],[1,"container","mt-5","mb-5"],[1,"row","d-flex","justify-content-center","flex-col","align-items-center"],[1,"col-sm-12","col-md-12","col-lg-8","col-xl-6"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","transportSelect"],["formControlName","transportType","id","transportSelect",1,"form-control"],["for","brand"],["formControlName","brand","type","text","id","brand","aria-describedby","brand","placeholder","Marke",1,"form-control"],["for","yearOfManufacture"],["formControlName","yearOfManufacture","type","text","id","yearOfManufacture","aria-describedby","yearOfManufacture","placeholder","Baujahr",1,"form-control"],["for","length"],["formControlName","length","type","text","id","length","aria-describedby","length","placeholder","L\xe4nge",1,"form-control"],["for","width"],["formControlName","width","type","text","id","width","aria-describedby","width","placeholder","Breite",1,"form-control"],["for","height"],["formControlName","height","type","text","id","height","aria-describedby","height","placeholder","H\xf6he",1,"form-control"],["for","seats"],["formControlName","numberOfSeats","type","text","id","seats","aria-describedby","seats","placeholder","Sitzpl\xe4tze",1,"form-control"],["type","submit",1,"btn","bgCustomGreen"]],template:function(t,e){1&t&&r.xc(0,uR,50,1,"div",0),2&t&&r.kc("ngIf",e.auth.user)},directives:[ht,mA,Rk,ik,Pk,Vk,rk,Lk,qk,Hk,US],styles:["#createWrapper[_ngcontent-%COMP%]{height:17rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#createInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#createInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}.btn[_ngcontent-%COMP%]{color:#fff}"]}),t})(),lR=(()=>{class t{constructor(t,e){this.afs=t,this.bookingService=e,this.db=Qe.default.firestore(),this.ratingCollection=t.collection("rating"),this.bookingCollection=t.collection("booking")}addRating(t,e){return Object(Be.__awaiter)(this,void 0,void 0,function*(){t.setBookingId(e),yield this.ratingCollection.doc().set(Object.assign({},t))})}getRatings(){return this.ratingCollection.valueChanges({idField:"id"})}getRatingByUser(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){const e=[],n=[];return this.bookingService.getBookingBySupplier(t).then(t=>Object(Be.__awaiter)(this,void 0,void 0,function*(){t.forEach(t=>{e.push(t.bookingId)})})).then(()=>{this.db.collection("rating").where("bookingId","in",e).get().then(t=>{t.forEach(t=>{const e=new iw(t.data().rating,t.data().title,t.data().description,t.data().bookingId);n.push(e)})})}),n})}getAverageRatingByUser(t){return Object(Be.__awaiter)(this,void 0,void 0,function*(){let e=0,n=0,r=0;const i=[];return new Promise((o,s)=>{this.bookingService.getBookingBySupplier(t).then(t=>Object(Be.__awaiter)(this,void 0,void 0,function*(){t.forEach(t=>{i.push(t.bookingId)})})).then(()=>{this.db.collection("rating").where("bookingId","in",i).get().then(t=>{t.forEach(t=>{e++,n+=Number(t.data().rating)}),r=n/e,o(r)}).catch(t=>{s(t)})})})})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(jw),r.Yb(rS))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const hR=function(t){return[t]};function dR(t,e){if(1&t&&(r.Rb(0,"div",6),r.Rb(1,"div",7),r.Rb(2,"div",6),r.Rb(3,"div",16),r.Rb(4,"div",17),r.Rb(5,"div",8),r.Rb(6,"div",18),r.Rb(7,"h4",19),r.zc(8),r.Qb(),r.Rb(9,"h6"),r.zc(10),r.Qb(),r.Rb(11,"p"),r.zc(12),r.Qb(),r.Rb(13,"span",20),r.zc(14),r.Qb(),r.Rb(15,"span",21),r.zc(16," Zum Tracking"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(8),r.Cc("",t.start," - ",t.destination,""),r.Ab(2),r.Fc("",t.startDate.day,".",t.startDate.month,".",t.startDate.year," - ",t.startTime.hour,":",t.startTime.minute,""),r.Ab(2),r.Ac(t.description),r.Ab(2),r.Bc(" ",t.price,"\u20ac"),r.Ab(1),r.kc("routerLink",r.oc(10,hR,"/tracking/entry/"+t.entryId))}}function fR(t,e){if(1&t&&(r.Rb(0,"div",6),r.Rb(1,"div",16),r.Rb(2,"div",17),r.Rb(3,"div",8),r.Rb(4,"div",18),r.Rb(5,"h4",19),r.zc(6),r.Qb(),r.Rb(7,"h6"),r.zc(8),r.Qb(),r.Rb(9,"p"),r.zc(10),r.Qb(),r.Rb(11,"span",22),r.zc(12," Zum Tracking"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(6),r.Cc("",t.start," - ",t.destination,""),r.Ab(2),r.Fc("",t.startDate.day,".",t.startDate.month,".",t.startDate.year," - ",t.startTime.hour,":",t.startTime.minute,""),r.Ab(2),r.Ac(t.description),r.Ab(1),r.kc("routerLink",r.oc(9,hR,"/tracking/booking/"+t.entryId))}}function pR(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",6),r.Rb(1,"div",16),r.Rb(2,"div",17),r.Rb(3,"div",8),r.Rb(4,"div",23),r.Rb(5,"h4",19),r.zc(6),r.Qb(),r.Rb(7,"p",24),r.zc(8),r.Qb(),r.Rb(9,"p",24),r.zc(10),r.Qb(),r.Rb(11,"span",25),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc().deleteVehicle(n.vehicleId)}),r.zc(12," Fahrzeug l\xf6schen "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(6),r.Ac(t.brand),r.Ab(2),r.Bc("Anzahl der Sitzpl\xe4tze: ",t.numberOfSeats,""),r.Ab(2),r.Bc("Baujahr: ",t.yearOfManufacture,"")}}const gR=function(){return["/"]},mR=function(){return["/create-vehicle"]};let bR=(()=>{class t{constructor(t,e,n,r,i){this.afs=t,this.auth=e,this.userService=n,this.vehicleService=r,this.ratingService=i,this.vehiclesList=[],this.user=e.user,this.user.subscribe(t=>{this.authenticatedUser=t,this.userService.getOffersFromCurrentUser(this.authenticatedUser.uid).then(()=>{this.vehicleService.getVehicles(this.authenticatedUser.uid).then(t=>{this.vehiclesList=t})}).then(()=>{this.userService.getBookingsFromCurrentUser(this.authenticatedUser.uid)})}),this.userService.getcurrentUser().then(t=>{this.id=t.id,this.email=t.email,this.password=t.password,this.firstName=t.firstName,this.lastName=t.lastName,this.birthday=t.birthday,this.image=t.image})}ngOnInit(){}deleteVehicle(t){this.vehicleService.deleteVehicle(t,this.id).then(()=>{location.reload()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(jw),r.Mb(qe),r.Mb(iS),r.Mb(UA),r.Mb(lR))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-my-profile"]],decls:40,vars:12,consts:[["id","profileWrapper"],["id","profileInnerWrapper"],[1,"d-flex","justify-content-start","align-items-start",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"d-flex","justify-content-center","align-items-center","h-75",2,"margin-left","30px"],[1,"col-sm-12","col-md-12","col-lg-12","col-xl-12"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],[1,"row"],[1,"col-4","d-flex","justify-content-center","flex-col"],["width","100","height","100",1,"rounded-circle",3,"src"],[1,"col-8"],[1,"d-flex","justify-content-center","flex-col","align-items-center","m-2"],["class","col-sm-12 col-md-12 col-lg-12 col-xl-12",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","flex-col","align-items-center","m-2",2,"font-size","small"],[2,"color","#5cad87",3,"routerLink"],[1,"card","m-2"],[1,"card-body"],[1,"col-12",2,"margin-left","10px"],[1,"h4","customFont","font-weight-bold"],[1,"badge","rounded-pill","bgCustomGreen","font-weight-bold","customFont",2,"color","white"],[1,"badge","rounded-pill","bgCustomGreen","font-weight-bold","customFont","m-2",2,"color","white",3,"routerLink"],[1,"badge","rounded-pill","bgCustomGreen","font-weight-bold","customFont",2,"color","white",3,"routerLink"],[1,"col-9",2,"margin-left","10px"],[2,"margin-top","-10px"],[1,"badge","rounded-pill","bgCustomGreen","font-weight-bold","customFont",2,"color","white",3,"click"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.ec(),r.Rb(3,"svg",3),r.Nb(4,"path",4),r.Qb(),r.Qb(),r.dc(),r.Rb(5,"div",5),r.Rb(6,"div",6),r.Rb(7,"div",7),r.Rb(8,"div",6),r.Rb(9,"div",8),r.Rb(10,"div",9),r.Nb(11,"img",10),r.Qb(),r.Rb(12,"div",11),r.Rb(13,"h3"),r.zc(14),r.Qb(),r.Rb(15,"h6"),r.zc(16),r.Qb(),r.Rb(17,"h6"),r.zc(18),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(19,"app-alert"),r.Rb(20,"div",6),r.Rb(21,"h3",12),r.zc(22,"Deine Fahrten"),r.Qb(),r.Rb(23,"h5"),r.zc(24,"Angebotene Fahrten"),r.Qb(),r.xc(25,dR,17,12,"div",13),r.Rb(26,"h5"),r.zc(27,"Gebuchte Fahrten"),r.Qb(),r.Rb(28,"div",6),r.Rb(29,"div",7),r.xc(30,fR,13,11,"div",13),r.Qb(),r.Qb(),r.Rb(31,"h5"),r.zc(32,"Deine Fahrzeuge"),r.Qb(),r.Rb(33,"div",6),r.Rb(34,"div",7),r.xc(35,pR,13,3,"div",13),r.Qb(),r.Qb(),r.Rb(36,"p",14),r.zc(37," Du hast noch ein Fahrzeug? "),r.Rb(38,"a",15),r.zc(39,"Jetzt anlegen!"),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(2),r.kc("routerLink",r.nc(10,gR)),r.Ab(9),r.lc("src",e.image,r.uc),r.Ab(3),r.Cc(" ",e.firstName," ",e.lastName," "),r.Ab(2),r.Ac(e.email),r.Ab(2),r.Bc("Geburtsdatum: ",e.birthday,""),r.Ab(7),r.kc("ngForOf",e.userService.offers),r.Ab(5),r.kc("ngForOf",e.userService.bookingsFromSelectedUser),r.Ab(5),r.kc("ngForOf",e.vehiclesList),r.Ab(3),r.kc("routerLink",r.nc(11,mR)))},directives:[NO,mA,ct,jO],styles:["#profileWrapper[_ngcontent-%COMP%]{height:17rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#profileInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#profileInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}.btn[_ngcontent-%COMP%]{color:#fff}"]}),t})();function vR(t,e){1&t&&(r.Rb(0,"div",27),r.Nb(1,"i",28),r.Qb())}function yR(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",29),r.bc("click",function(){return r.tc(t),r.fc().starting()}),r.zc(1,"Starten "),r.Qb()}}function _R(t,e){1&t&&(r.Rb(0,"div",27),r.Nb(1,"i",28),r.Qb())}function wR(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",29),r.bc("click",function(){return r.tc(t),r.fc().updating()}),r.zc(1,"Aktualisieren "),r.Qb()}}function IR(t,e){1&t&&(r.Rb(0,"div",27),r.Nb(1,"i",28),r.Qb())}function CR(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",29),r.bc("click",function(){return r.tc(t),r.fc().finished()}),r.zc(1,"Abschlie\xdfen "),r.Qb()}}function OR(t,e){1&t&&(r.Rb(0,"div",27),r.Nb(1,"i",28),r.Qb())}function SR(t,e){1&t&&r.Nb(0,"i",48)}function kR(t,e){1&t&&r.Nb(0,"i",49)}function ER(t,e){1&t&&r.Nb(0,"i",48)}function TR(t,e){1&t&&r.Nb(0,"i",49)}function xR(t,e){1&t&&r.Nb(0,"i",48)}function AR(t,e){1&t&&r.Nb(0,"i",49)}function RR(t,e){1&t&&r.Nb(0,"i",48)}function DR(t,e){1&t&&r.Nb(0,"i",49)}function NR(t,e){1&t&&r.Nb(0,"i",48)}function jR(t,e){1&t&&r.Nb(0,"i",50)}function PR(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",30),r.Rb(1,"div",31),r.Rb(2,"div",32),r.Rb(3,"h2",15),r.zc(4,"Bewertung"),r.Qb(),r.Rb(5,"p"),r.zc(6,"Bitte bewerte Deine Fahrt!"),r.Qb(),r.Rb(7,"form",33),r.bc("ngSubmit",function(){return r.tc(t),r.fc().onSubmit()}),r.Rb(8,"select",34),r.Rb(9,"option",35),r.zc(10,"5"),r.Qb(),r.Rb(11,"option",36),r.zc(12,"4"),r.Qb(),r.Rb(13,"option",37),r.zc(14,"3"),r.Qb(),r.Rb(15,"option",38),r.zc(16,"2"),r.Qb(),r.Rb(17,"option",39),r.zc(18,"1"),r.Qb(),r.Qb(),r.xc(19,SR,1,0,"i",40),r.xc(20,kR,1,0,"ng-template",null,41,r.yc),r.xc(22,ER,1,0,"i",40),r.xc(23,TR,1,0,"ng-template",null,41,r.yc),r.xc(25,xR,1,0,"i",40),r.xc(26,AR,1,0,"ng-template",null,41,r.yc),r.xc(28,RR,1,0,"i",40),r.xc(29,DR,1,0,"ng-template",null,41,r.yc),r.xc(31,NR,1,0,"i",40),r.xc(32,jR,1,0,"ng-template",null,41,r.yc),r.Rb(34,"div",42),r.Rb(35,"label",43),r.zc(36,"Titel"),r.Qb(),r.Nb(37,"input",44),r.Qb(),r.Rb(38,"div",42),r.Rb(39,"label",45),r.zc(40,"Bewertung"),r.Qb(),r.Nb(41,"textarea",46),r.Qb(),r.Rb(42,"div",6),r.Rb(43,"button",47),r.zc(44," Bewertung abschicken "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=r.sc(21),e=r.fc();r.Ab(7),r.kc("formGroup",e.form),r.Ab(12),r.kc("ngIf",e.form.value.rating>=1)("ngIfElse",t),r.Ab(3),r.kc("ngIf",e.form.value.rating>=2)("ngIfElse",t),r.Ab(3),r.kc("ngIf",e.form.value.rating>=3)("ngIfElse",t),r.Ab(3),r.kc("ngIf",e.form.value.rating>=4)("ngIfElse",t),r.Ab(3),r.kc("ngIf",e.form.value.rating>=5)("ngIfElse",t)}}const MR=function(){return["/my-profile"]};let LR=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.auth=t,this.ratingService=e,this.entryService=n,this.bookingService=r,this.trackingService=i,this.route=o,this.router=s,this.alertService=a,this.trackingList=[],this.suppliers=[],this.searchers=[],this.status1=new MA("","","",!1),this.status2=new MA("","","",!1),this.status3=new MA("","","",!1),this.status4=new MA("","","",!1),this.status1Message="Deine Fahrt ist gebucht",this.status2Message="Der Fahrer ist unterwegs",this.status3Message="Der Fahrer ist am Zielort angekommen",this.status4Message="Deine Fahrt ist abgeschlossen",this.form=new kk({rating:new Sk,title:new Sk,ratingDescription:new Sk}),this.user=t.user,this.route.paramMap.subscribe(t=>{this.bookingId=t.get("bookingId"),this.trackingEntryId=t.get("entryId")})}ngOnInit(){this.user.subscribe(t=>{this.authenticatedUser=t}),null!==this.bookingId?this.loadEntryViaBooking():(this.entryId=this.trackingEntryId,this.loadEntry())}loadTrackingList(){this.trackingService.getTrackingByEntryId(this.entryId).then(t=>{t.forEach(t=>{const e=new MA(t.entryId,t.status,t.date,t.done);null!==this.bookingId&&"booked"===t.status&&this.bookingService.getBooking(this.bookingId).then(t=>{e.setDate(t.bookingDate)}),this.trackingList.push(e)})}).then(()=>{this.setStatus()})}loadEntryViaBooking(){this.bookingService.getBooking(this.bookingId).then(t=>{this.entryId=t.entry}).then(()=>{this.loadEntry()})}loadEntry(){this.entryService.getEntry(this.entryId).then(t=>{this.start=t.start,this.end=t.destination,this.date=t.startDate.day+"."+t.startDate.month+"."+t.startDate.year,this.time=t.startTime.hour+":"+t.startTime.minute}).then(()=>{this.loadTrackingList()})}starting(){this.updateTracking(LA.started)}updating(){this.updateTracking(LA.arrived)}finished(){this.updateTracking(LA.finished)}updateTracking(t){this.trackingService.getTrackingIDByEntryIdAndStatus(this.entryId,t).then(t=>{this.trackingService.updateTracking(t,!0).then(()=>{location.reload()})})}setStatus(){for(const t of this.trackingList)"booked"===t.status?this.status1=t:"started"===t.status?this.status2=t:"arrived"===t.status?this.status3=t:"finished"===t.status&&(this.status4=t);this.status=this.status4.done?this.status4Message:this.status3.done?this.status3Message:this.status2.done?this.status2Message:this.status1Message}onSubmit(){if(null!==this.form.value.rating&&null!==this.form.value.title&&null!==this.form.value.ratingDescription){const t=new iw(this.form.value.rating,this.form.value.title,this.form.value.ratingDescription);this.ratingService.addRating(t,this.bookingId).then(()=>{const t={type:"success",message:"Deine Bewertung wurde abgeschickt"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}).catch(()=>{const t={type:"danger",message:"Es tut uns Leid, aber es gab einen Fehler beim abschicken deiner Bewertung"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)})}else{const t={type:"danger",message:"Bitte f\xfclle alle Felder aus"};this.alertService.ALERTS.push(t),setTimeout(()=>this.alertService.close(t),5e3)}this.router.navigate(["my-profile"])}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(qe),r.Mb(lR),r.Mb(dA),r.Mb(rS),r.Mb(FA),r.Mb(dC),r.Mb(DO),r.Mb(nS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-tracking"]],decls:72,vars:31,consts:[["id","createWrapper"],["id","createInnerWrapper"],[1,"d-flex","justify-content-start","align-items-start",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"d-flex","justify-content-center","align-items-center","h-75"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],[1,"h4","customFont","font-weight-bold"],[1,"container","m-3"],[1,"row","d-flex","justify-content-center","align-items-center","mt-4"],[1,"col-2","col-sm-2","col-md-1","col-lg-1","col-xl-1"],[1,"bi","bi-check-circle-fill","colorCustomGreen","h2"],[1,"col-10","col-sm-10","col-md-8","col-lg-7","col-xl-6"],[1,"mb-1"],[1,"row","d-flex","justify-content-center","align-items-center","mt-4","mb-4"],[1,"h5","customFont","font-weight-bold"],[1,"timeline"],[1,"contentcontainer","right"],[1,"row"],["class","icon col-2",4,"ngIf"],[1,"col-10"],[1,"mb-0"],[1,"infotext","mb-0"],[1,"infotext"],["type","button","class","btn bgCustomGreen",3,"click",4,"ngIf"],[1,"contentcontainer","right","mb-5"],["class","container",4,"ngIf"],[1,"icon","col-2"],[1,"bi","bi-check-circle-fill","colorCustomGreen","h3"],["type","button",1,"btn","bgCustomGreen",3,"click"],[1,"container"],[1,"row","d-flex","text-center","justify-content-center","align-items-center","mb-5"],[1,"col-sm-12","col-md-12","col-lg-8","col-xl-6"],[3,"formGroup","ngSubmit"],["formControlName","rating","aria-label","Default select example",1,"form-select","mr-2"],["value","5","selected",""],["value","4"],["value","3"],["value","2"],["value","1"],["class","bi bi-star-fill colorCustomGreen mr-1",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"form-group","text-left"],["for","title"],["formControlName","title","type","text","id","title","aria-describedby","title","placeholder","Super Fahrer!",1,"form-control"],["for","ratingDescription"],["formControlName","ratingDescription","type","text","id","ratingDescription","aria-describedby","ratingDescription","placeholder","Berichte von Deiner Erfahrung mit dem Fahrer",1,"form-control"],["type","submit",1,"btn","bgCustomGreen","mt-2"],[1,"bi","bi-star-fill","colorCustomGreen","mr-1"],[1,"bi","bi-star","colorCustomGreen","mr-1"],[1,"bi","bi-star","colorCustomGreen"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.ec(),r.Rb(3,"svg",3),r.Nb(4,"path",4),r.Qb(),r.Qb(),r.dc(),r.Rb(5,"div",5),r.Rb(6,"div",6),r.Rb(7,"h1",7),r.zc(8," Status deiner Fahrt updaten "),r.Qb(),r.Rb(9,"h6"),r.zc(10),r.Qb(),r.Rb(11,"h6"),r.zc(12),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(13,"app-alert"),r.Rb(14,"div",8),r.Rb(15,"div",9),r.Rb(16,"div",10),r.Nb(17,"i",11),r.Qb(),r.Rb(18,"div",12),r.Rb(19,"p",13),r.zc(20),r.Qb(),r.Rb(21,"p"),r.zc(22),r.Qb(),r.Qb(),r.Qb(),r.Nb(23,"hr"),r.Rb(24,"div",14),r.Rb(25,"h2",15),r.zc(26,"Detaillierter Verlauf"),r.Qb(),r.Qb(),r.Rb(27,"div",16),r.Rb(28,"div",17),r.Rb(29,"div",18),r.xc(30,vR,2,0,"div",19),r.Rb(31,"div",20),r.Rb(32,"p",21),r.zc(33),r.Qb(),r.Rb(34,"p",22),r.zc(35),r.Qb(),r.Rb(36,"p",23),r.zc(37),r.Qb(),r.xc(38,yR,2,0,"button",24),r.Qb(),r.Qb(),r.Qb(),r.Rb(39,"div",17),r.Rb(40,"div",18),r.xc(41,_R,2,0,"div",19),r.Rb(42,"div",20),r.Rb(43,"p",21),r.zc(44),r.Qb(),r.Rb(45,"p",22),r.zc(46),r.Qb(),r.Rb(47,"p",23),r.zc(48),r.Qb(),r.xc(49,wR,2,0,"button",24),r.Qb(),r.Qb(),r.Qb(),r.Rb(50,"div",17),r.Rb(51,"div",18),r.xc(52,IR,2,0,"div",19),r.Rb(53,"div",20),r.Rb(54,"p",21),r.zc(55),r.Qb(),r.Rb(56,"p",22),r.zc(57),r.Qb(),r.Rb(58,"p",23),r.zc(59),r.Qb(),r.xc(60,CR,2,0,"button",24),r.Qb(),r.Qb(),r.Qb(),r.Rb(61,"div",25),r.Rb(62,"div",18),r.xc(63,OR,2,0,"div",19),r.Rb(64,"div",20),r.Rb(65,"p",21),r.zc(66),r.Qb(),r.Rb(67,"p",22),r.zc(68),r.Qb(),r.Rb(69,"p",23),r.zc(70),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.xc(71,PR,45,11,"div",26)),2&t&&(r.Ab(2),r.kc("routerLink",r.nc(30,MR)),r.Ab(8),r.Cc("",e.start," - ",e.end,""),r.Ab(2),r.Ac(e.date),r.Ab(8),r.Ec(" Deine Fahrt von ",e.start," nach ",e.end," am ",e.date," um ",e.time,":"),r.Ab(2),r.Ac(e.status),r.Ab(8),r.kc("ngIf",e.status1.done),r.Ab(3),r.Ac(e.status1.date),r.Ab(2),r.Ac(e.status1Message),r.Ab(2),r.Cc("",e.start," - ",e.end,""),r.Ab(1),r.kc("ngIf",e.trackingEntryId&&!e.status2.done),r.Ab(3),r.kc("ngIf",e.status2.done),r.Ab(3),r.Ac(e.status2.date),r.Ab(2),r.Ac(e.status2Message),r.Ab(2),r.Ac(e.start),r.Ab(1),r.kc("ngIf",e.trackingEntryId&&!e.status3.done),r.Ab(3),r.kc("ngIf",e.status3.done),r.Ab(3),r.Ac(e.status3.date),r.Ab(2),r.Ac(e.status3Message),r.Ab(2),r.Ac(e.end),r.Ab(1),r.kc("ngIf",e.trackingEntryId&&!e.status4.done),r.Ab(3),r.kc("ngIf",e.status4.done),r.Ab(3),r.Ac(e.status4.date),r.Ab(2),r.Ac(e.status4Message),r.Ab(2),r.Ac(e.end),r.Ab(1),r.kc("ngIf",e.bookingId&&e.status4.done))},directives:[NO,mA,ht,Rk,ik,Pk,Vk,rk,Lk,qk,Hk,US],styles:['#createWrapper[_ngcontent-%COMP%]{height:17rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#createInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#createInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}.btn[_ngcontent-%COMP%]{color:#fff}.infotext[_ngcontent-%COMP%]{font-size:14px;color:#68717a}.icon[_ngcontent-%COMP%]{margin-left:-56px;z-index:2}.timeline[_ngcontent-%COMP%]{position:relative;max-width:1200px;margin:0 auto}.timeline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:6px;background-color:#c4c4c4;top:0;bottom:0;left:50%;margin-left:-6px}.contentcontainer[_ngcontent-%COMP%]{padding:10px 40px;position:relative;background-color:inherit;width:50%}.contentcontainer[_ngcontent-%COMP%]:after{content:"";position:absolute;width:25px;height:25px;right:-17px;background-color:#c4c4c4;border:4px solid #c4c4c4;top:15px;border-radius:50%;z-index:1}.right[_ngcontent-%COMP%]{left:50%}.right[_ngcontent-%COMP%]:after{left:-16px}@media screen and (max-width:600px){.timeline[_ngcontent-%COMP%]:after{left:31px}.contentcontainer[_ngcontent-%COMP%]{width:100%;padding-left:70px;padding-right:25px}.right[_ngcontent-%COMP%]:after{left:15px}.right[_ngcontent-%COMP%]{left:0}}']}),t})();const FR=function(){return["/"]};function UR(t,e){1&t&&(r.Rb(0,"h6",11),r.zc(1,"Suche Deine Fahrt! "),r.Qb()),2&t&&r.kc("routerLink",r.nc(1,FR))}function VR(t,e){1&t&&(r.Rb(0,"h6",12),r.zc(1,"Alle Anfragen"),r.Qb())}function qR(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",13),r.Rb(1,"div",14),r.Rb(2,"div",15),r.Rb(3,"h5",16),r.zc(4),r.Qb(),r.Rb(5,"p"),r.zc(6),r.Qb(),r.Rb(7,"p",17),r.zc(8),r.Qb(),r.Rb(9,"div",18),r.Rb(10,"div",19),r.Rb(11,"div",20),r.Rb(12,"button",21),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc().confirmRequests(n.requestId)}),r.zc(13," Best\xe4tigen "),r.Qb(),r.Qb(),r.Rb(14,"div",20),r.Rb(15,"button",21),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc().rejectedRequests(n.requestId)}),r.zc(16," Ablehnen "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(4),r.Cc("",t.firstName," ",t.lastName,""),r.Ab(2),r.Cc("",t.start," - ",t.destination,""),r.Ab(2),r.Fc("",t.startDate.day,".",t.startDate.month,".",t.startDate.year," - ",t.startTime.hour,":",t.startTime.minute,"")}}function BR(t,e){1&t&&(r.Rb(0,"h6",12),r.zc(1,"Best\xe4tigt"),r.Qb())}function zR(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",13),r.Rb(1,"div",14),r.Rb(2,"div",15),r.Rb(3,"button",22),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc().pullBackRequest(n.requestId)}),r.Rb(4,"span",23),r.zc(5,"\xd7"),r.Qb(),r.Qb(),r.Rb(6,"h5",16),r.zc(7),r.Qb(),r.Rb(8,"h6",24),r.zc(9),r.Qb(),r.Rb(10,"button",25),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc().book(n,n.requestId)}),r.zc(11," Jetzt buchen "),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(7),r.Cc("",t.start," - ",t.destination,""),r.Ab(2),r.Fc("",t.startDate.day,".",t.startDate.month,".",t.startDate.year," - ",t.startTime.hour,":",t.startTime.minute,"")}}function QR(t,e){1&t&&(r.Rb(0,"h6",12),r.zc(1,"Ausstehend"),r.Qb())}function HR(t,e){if(1&t&&(r.Rb(0,"div",13),r.Rb(1,"div",14),r.Rb(2,"div",15),r.Rb(3,"h5",16),r.zc(4),r.Qb(),r.Rb(5,"h6",24),r.zc(6),r.Qb(),r.Rb(7,"p",26),r.zc(8),r.Qb(),r.Rb(9,"span",27),r.zc(10),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(4),r.Cc("",t.start," - ",t.destination,""),r.Ab(2),r.Fc("",t.startDate.day,".",t.startDate.month,".",t.startDate.year," - ",t.startTime.hour,":",t.startTime.minute,""),r.Ab(2),r.Ac(t.description),r.Ab(2),r.Bc("",t.price," \u20ac")}}function WR(t,e){1&t&&(r.Rb(0,"h6",12),r.zc(1,"Abgelehnt"),r.Qb())}function GR(t,e){if(1&t&&(r.Rb(0,"div",28),r.Rb(1,"div",14),r.Rb(2,"div",15),r.Rb(3,"h5",16),r.zc(4),r.Qb(),r.Rb(5,"h6",24),r.zc(6),r.Qb(),r.Rb(7,"p",26),r.zc(8),r.Qb(),r.Rb(9,"span",27),r.zc(10),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(4),r.Cc("",t.start," - ",t.destination,""),r.Ab(2),r.Fc("",t.startDate.day,".",t.startDate.month,".",t.startDate.year," - ",t.startTime.hour,":",t.startTime.minute,""),r.Ab(2),r.Ac(t.description),r.Ab(2),r.Bc("",t.price," \u20ac")}}let KR=(()=>{class t{constructor(t,e,n,r,i,o){this.openRequestService=t,this.authService=e,this.entryService=n,this.booking=r,this.router=i,this.route=o,this.openRequestList=[],this.myOpenRequestList=[],this.myConfirmedEntryList=[],this.confirmedEntryList=[],this.userList=[],this.showConfirmed=!1,this.showPending=!1,this.showRejected=!1,this.showAllRequests=!1,this.pendingEntryList=[],this.rejectedEntryList=[],this.route.paramMap.subscribe(t=>{this.userId=t.get("userId"),this.entryId=t.get("entryId")}),this.authService.getUserByUserId(this.userId)}ngOnInit(){this.bookNow(),this.getConfirmRequests()}bookNow(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){this.confirmedEntryList=[],this.pendingEntryList=[],this.rejectedEntryList=[],this.showConfirmed=!1,this.showPending=!1,this.showRejected=!1,yield this.authService.getcurrentUser().then(t=>{this.userId=t.id}),this.openRequestList=yield this.openRequestService.getOpenRequests();for(const t of this.openRequestList){const e=t.entryId,n=yield this.entryService.getEntry(e);!0===t.confirmed?(n.requestId=t.requestId,this.confirmedEntryList.push(yield n)):!0===t.pending?this.pendingEntryList.push(yield n):!0===t.rejected&&this.rejectedEntryList.push(yield n),this.confirmedEntryList.length>0&&(this.showConfirmed=!0),this.pendingEntryList.length>0&&(this.showPending=!0),this.rejectedEntryList.length>0&&(this.showRejected=!0)}})}book(t,e){this.booking.entry=t,this.router.navigate(["/booking/"+e])}getConfirmRequests(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){this.myConfirmedEntryList=[],this.showAllRequests=!1,yield this.authService.getcurrentUser().then(t=>{this.userId=t.id}),this.myOpenRequestList=yield this.openRequestService.getMyOpenRequests();for(const t of this.myOpenRequestList){const e=t.entryId,n=t.requestedUserId,r=yield this.entryService.getEntry(e),i={entryType:r.entryType,start:r.start,destination:r.destination,startDate:r.startDate,startTime:r.startTime,description:r.description,price:r.price,transportType:r.transportType,length:r.length,width:r.width,height:r.height,seats:r.seats,trackingStatus:r.trackingStatus,firstName:"",lastName:"",requestId:t.requestId};this.userData=yield this.authService.getUserByUserId(n),i.firstName=this.userData.firstName,i.lastName=this.userData.lastName,this.myConfirmedEntryList.push(i)}this.myConfirmedEntryList.length>0&&(this.showAllRequests=!0)})}rejectedRequests(t){this.openRequestService.rejectRequest(t).then(()=>{this.getConfirmRequests()})}confirmRequests(t){this.openRequestService.confirmRequest(t).then(()=>{this.getConfirmRequests()})}pullBackRequest(t){this.openRequestService.deleteRequest(t).then(()=>{this.getConfirmRequests()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(fA),r.Mb(iS),r.Mb(dA),r.Mb(rS),r.Mb(DO),r.Mb(dC))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-requests"]],decls:18,vars:11,consts:[["id","profileWrapper"],["id","profileInnerWrapper"],[1,"d-flex","justify-content-start","align-items-start",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"col-sm-12","col-md-12","col-lg-12","col-xl-12"],[1,"customFont","font-weight-bold","d-flex","justify-content-center","flex-col","align-items-center","pt-4"],["class","customFont font-weight-bold d-flex justify-content-left flex-col align-items-center mt-5",3,"routerLink",4,"ngIf"],["class","customFont font-weight-bold d-flex justify-content-left flex-col align-items-center mt-5",4,"ngIf"],["class","d-flex justify-content-center flex-col align-items-center m-2",4,"ngFor","ngForOf"],["class","d-flex justify-content-center flex-col align-items-center m-2 mb-5",4,"ngFor","ngForOf"],[1,"customFont","font-weight-bold","d-flex","justify-content-left","flex-col","align-items-center","mt-5",3,"routerLink"],[1,"customFont","font-weight-bold","d-flex","justify-content-left","flex-col","align-items-center","mt-5"],[1,"d-flex","justify-content-center","flex-col","align-items-center","m-2"],[1,"card",2,"width","20rem"],[1,"card-body"],[1,"card-title"],[1,"text-muted"],[1,"container"],[1,"row"],[1,"col-sm-6","col-md-6","col-lg-6","col-xl-6"],[1,"btn","mt-1","bgCustomGreen","text-white",3,"click"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"card-subtitle","mb-4","text-muted"],[1,"btn","mt-3","bgCustomGreen","font-weight-bold","text-white",3,"click"],[1,"card-text"],[1,"badge","rounded-pill","bgCustomGreen","font-weight-bold","customFont",2,"color","white"],[1,"d-flex","justify-content-center","flex-col","align-items-center","m-2","mb-5"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.ec(),r.Rb(3,"svg",3),r.Nb(4,"path",4),r.Qb(),r.Qb(),r.dc(),r.Rb(5,"div",5),r.Rb(6,"h3",6),r.zc(7,"Meine Anfragen"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(8,"div",5),r.xc(9,UR,2,2,"h6",7),r.xc(10,VR,2,0,"h6",8),r.xc(11,qR,17,9,"div",9),r.xc(12,BR,2,0,"h6",8),r.xc(13,zR,12,7,"div",9),r.xc(14,QR,2,0,"h6",8),r.xc(15,HR,11,9,"div",9),r.xc(16,WR,2,0,"h6",8),r.xc(17,GR,11,9,"div",10),r.Qb()),2&t&&(r.Ab(2),r.kc("routerLink",r.nc(10,FR)),r.Ab(7),r.kc("ngIf",!(e.showAllRequests||e.showConfirmed||e.showPending||e.showRejected)),r.Ab(1),r.kc("ngIf",e.showAllRequests),r.Ab(1),r.kc("ngForOf",e.myConfirmedEntryList),r.Ab(1),r.kc("ngIf",e.showConfirmed),r.Ab(1),r.kc("ngForOf",e.confirmedEntryList),r.Ab(1),r.kc("ngIf",e.showPending),r.Ab(1),r.kc("ngForOf",e.pendingEntryList),r.Ab(1),r.kc("ngIf",e.showRejected),r.Ab(1),r.kc("ngForOf",e.rejectedEntryList))},directives:[NO,ht,ct],styles:["#profileWrapper[_ngcontent-%COMP%]{height:11rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#profileInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#profileInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}"]}),t})();function $R(t,e){1&t&&r.Nb(0,"i",18)}function YR(t,e){1&t&&r.Nb(0,"i",19)}function XR(t,e){1&t&&r.Nb(0,"i",18)}function JR(t,e){1&t&&r.Nb(0,"i",19)}function ZR(t,e){1&t&&r.Nb(0,"i",18)}function tD(t,e){1&t&&r.Nb(0,"i",19)}function eD(t,e){1&t&&r.Nb(0,"i",18)}function nD(t,e){1&t&&r.Nb(0,"i",19)}function rD(t,e){1&t&&r.Nb(0,"i",18)}function iD(t,e){1&t&&r.Nb(0,"i",20)}function oD(t,e){if(1&t&&(r.Rb(0,"div",6),r.Rb(1,"div",21),r.Rb(2,"div",22),r.Rb(3,"div",8),r.Rb(4,"div",23),r.Rb(5,"h4",24),r.zc(6),r.Qb(),r.Rb(7,"h6"),r.zc(8),r.Qb(),r.Rb(9,"p"),r.zc(10),r.Qb(),r.Rb(11,"span",25),r.zc(12),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(6),r.Cc("",t.start," - ",t.destination,""),r.Ab(2),r.Fc("",t.startDate.day,".",t.startDate.month,".",t.startDate.year," - ",t.startTime.hour,":",t.startTime.minute,""),r.Ab(2),r.Ac(t.description),r.Ab(2),r.Bc(" ",t.price,"\u20ac")}}function sD(t,e){1&t&&(r.Rb(0,"h3",14),r.zc(1,"Bewertungen"),r.Qb())}function aD(t,e){if(1&t&&(r.Rb(0,"div",6),r.Rb(1,"div",7),r.Rb(2,"div",6),r.Rb(3,"div",21),r.Rb(4,"div",22),r.Rb(5,"div",8),r.Rb(6,"div",23),r.Rb(7,"h4",24),r.zc(8),r.Qb(),r.Rb(9,"p"),r.zc(10),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=r.fc().$implicit;r.Ab(8),r.Ac(t.title),r.Ab(2),r.Bc(" ",t.description,"")}}function uD(t,e){1&t&&r.xc(0,aD,11,2,"ng-template",26)}const cD=function(){return["/detail-page"]};let lD=(()=>{class t{constructor(t,e,n){this.route=t,this.userService=e,this.ratingService=n,this.currentUser=new ze,this.ratingsList=[],this.ratings=[],this.avgRating=0,this.route.paramMap.subscribe(t=>{this.userId=t.get("userId")}),this.userService.getUserByUserId(this.userId).then(t=>{this.currentUser=t}),this.userService.getOffersFromSelectedUser(this.userId),this.loadRatingByUser(this.userId),this.loadAverageRatingByUser(this.userId)}ngOnInit(){}loadRatingByUser(t){this.ratingService.getRatingByUser(t).then(t=>{this.ratingsList=t})}loadAverageRatingByUser(t){this.ratingService.getAverageRatingByUser(t).then(t=>{this.avgRating=t})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(dC),r.Mb(iS),r.Mb(lR))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-supplier-profile"]],decls:45,vars:20,consts:[["id","profileWrapper"],["id","profileInnerWrapper"],[1,"d-flex","justify-content-start","align-items-start",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"d-flex","justify-content-center","align-items-center","h-75",2,"margin-left","30px"],[1,"col-sm-12","col-md-12","col-lg-12","col-xl-12"],[1,"d-flex","justify-content-center","flex-col","align-items-center"],[1,"row"],[1,"col-4","d-flex","justify-content-center","flex-col"],["width","100","height","100",1,"rounded-circle",3,"src"],[1,"col-8"],["class","bi bi-star-fill colorCustomGreen mr-1",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"d-flex","justify-content-center","flex-col","align-items-center","m-2"],["class","col-sm-12 col-md-12 col-lg-12 col-xl-12",4,"ngFor","ngForOf"],["class","d-flex justify-content-center flex-col align-items-center m-2",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"bi","bi-star-fill","colorCustomGreen","mr-1"],[1,"bi","bi-star","colorCustomGreen","mr-1"],[1,"bi","bi-star","colorCustomGreen"],[1,"card","m-2"],[1,"card-body"],[1,"col-12",2,"margin-left","10px"],[1,"h4","customFont","font-weight-bold"],[1,"badge","rounded-pill","bgCustomGreen","font-weight-bold","customFont",2,"color","white"],["ngbSlide",""]],template:function(t,e){if(1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.ec(),r.Rb(3,"svg",3),r.Nb(4,"path",4),r.Qb(),r.Qb(),r.dc(),r.Rb(5,"div",5),r.Rb(6,"div",6),r.Rb(7,"div",7),r.Rb(8,"div",6),r.Rb(9,"div",8),r.Rb(10,"div",9),r.Nb(11,"img",10),r.Qb(),r.Rb(12,"div",11),r.Rb(13,"h3"),r.zc(14),r.Qb(),r.Rb(15,"h6"),r.zc(16),r.Qb(),r.Rb(17,"h6"),r.zc(18),r.Qb(),r.Rb(19,"div"),r.xc(20,$R,1,0,"i",12),r.xc(21,YR,1,0,"ng-template",null,13,r.yc),r.xc(23,XR,1,0,"i",12),r.xc(24,JR,1,0,"ng-template",null,13,r.yc),r.xc(26,ZR,1,0,"i",12),r.xc(27,tD,1,0,"ng-template",null,13,r.yc),r.xc(29,eD,1,0,"i",12),r.xc(30,nD,1,0,"ng-template",null,13,r.yc),r.xc(32,rD,1,0,"i",12),r.xc(33,iD,1,0,"ng-template",null,13,r.yc),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(35,"app-alert"),r.Rb(36,"div",6),r.Rb(37,"h3",14),r.zc(38,"Angebotene Fahrten"),r.Qb(),r.Rb(39,"div",6),r.Rb(40,"div",7),r.xc(41,oD,13,9,"div",15),r.Qb(),r.Qb(),r.xc(42,sD,2,0,"h3",16),r.Rb(43,"ngb-carousel"),r.xc(44,uD,1,0,void 0,17),r.Qb(),r.Qb()),2&t){const t=r.sc(22);r.Ab(2),r.kc("routerLink",r.nc(19,cD)),r.Ab(9),r.lc("src",e.currentUser.image,r.uc),r.Ab(3),r.Cc("",e.currentUser.firstName," ",e.currentUser.lastName,""),r.Ab(2),r.Ac(e.currentUser.email),r.Ab(2),r.Bc("Geburtsdatum: ",e.currentUser.birthday,""),r.Ab(2),r.kc("ngIf",e.avgRating>=1)("ngIfElse",t),r.Ab(3),r.kc("ngIf",e.avgRating>=2)("ngIfElse",t),r.Ab(3),r.kc("ngIf",e.avgRating>=3)("ngIfElse",t),r.Ab(3),r.kc("ngIf",e.avgRating>=4)("ngIfElse",t),r.Ab(3),r.kc("ngIf",e.avgRating>=5)("ngIfElse",t),r.Ab(9),r.kc("ngForOf",e.userService.offersFromSelectedUser),r.Ab(1),r.kc("ngIf",e.ratingsList),r.Ab(2),r.kc("ngForOf",e.ratingsList)}},directives:[NO,ht,mA,ct,_T,yT],styles:["#profileWrapper[_ngcontent-%COMP%]{height:17rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#profileInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#profileInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}"]}),t})();function hD(t,e){if(1&t&&r.Nb(0,"img",16),2&t){const t=r.fc();r.lc("src",t.supplier.image,r.uc)}}function dD(t,e){if(1&t&&(r.Rb(0,"li",13),r.Rb(1,"span"),r.zc(2,"Angefragte Ladefl\xe4che:"),r.Qb(),r.Rb(3,"span"),r.zc(4),r.Qb(),r.Qb()),2&t){const t=r.fc();r.Ab(4),r.Bc("",t.request.cubicMetersNeeded,"m\xb3")}}function fD(t,e){if(1&t&&(r.Rb(0,"li",13),r.Rb(1,"span"),r.zc(2,"Angefragte Pl\xe4tze:"),r.Qb(),r.Rb(3,"span"),r.zc(4),r.Qb(),r.Qb()),2&t){const t=r.fc();r.Ab(4),r.Ac(t.request.seatsNeeded)}}function pD(t,e){if(1&t&&(r.Rb(0,"li",13),r.Rb(1,"span"),r.zc(2,"Preis:"),r.Qb(),r.Rb(3,"span"),r.zc(4),r.Qb(),r.Qb()),2&t){const t=r.fc();r.Ab(4),r.Bc("",t.entry.price," \u20ac/m\xb3")}}function gD(t,e){if(1&t&&(r.Rb(0,"li",13),r.Rb(1,"span"),r.zc(2,"Preis:"),r.Qb(),r.Rb(3,"span"),r.zc(4),r.Qb(),r.Qb()),2&t){const t=r.fc();r.Ab(4),r.Bc("",t.entry.price," \u20ac/Sitzplatz")}}function mD(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",17),r.Rb(1,"button",18),r.bc("click",function(){return r.tc(t),r.fc().prepareBooking()}),r.zc(2," Buchen "),r.Qb(),r.Qb()}}const bD=function(){return["/"]},vD=[{path:"",component:PA},{path:"booking/:requestId",component:(()=>{class t{constructor(t,e,n,r){this.auth=t,this.route=e,this.router=n,this.booking=r,this.profileImage="",this.supplierName="",this.route.paramMap.subscribe(t=>{this.requestId=t.get("requestId")}),this.getRequest().then(()=>{this.getUser()})}ngOnInit(){void 0===this.entry&&this.router.navigate(["/open-requests"])}getRequest(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){this.entry=this.booking.entry;let t=yield this.booking.getRequest(this.requestId);this.request=t[0]})}getUser(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){let t=yield this.booking.getSupplier(this.request.userId);this.supplier=t[0],console.log("Supplier ",this.supplier)})}prepareBooking(){return Object(Be.__awaiter)(this,void 0,void 0,function*(){if("Ladefl\xe4che"!=this.entry.transportType){let t=new eS(this.request.entryId,this.request.requestedUserId,this.request.userId,(new Date).toLocaleDateString());this.booking.createBooking(t,parseInt(this.request.seatsNeeded),this.requestId)}else{let t=new eS(this.request.entryId,this.request.requestedUserId,this.request.userId,(new Date).toLocaleDateString());this.booking.createBooking(t,parseInt(this.request.cubicMetersNeeded),this.requestId)}})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(iS),r.Mb(dC),r.Mb(DO),r.Mb(rS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-booking"]],decls:47,vars:22,consts:[["id","searchWrapper"],["id","searchInnerWrapper"],[1,"d-flex","justify-content-start","align-items-start",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16","id","pfeil",1,"bi","bi-arrow-left-short"],["fill-rule","evenodd","d","M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"],[1,"d-flex","justify-content-center","align-items-center","h-75"],[1,"d-flex","justify-content-center","flex-col","align-items-center","mt-n4"],[1,"h4","customFont","font-weight-bold"],[1,"text-muted","text-center"],[1,"container","mt-5","text-center"],[1,"list-group","mx-2"],["aria-current","true",1,"list-group-item","active","py-1","d-flex","align-items-center"],["width","40","height","40","class","rounded-circle mr-2",3,"src",4,"ngIf"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","row w-100 justify-content-center",4,"ngIf"],["width","40","height","40",1,"rounded-circle","mr-2",3,"src"],[1,"row","w-100","justify-content-center"],[1,"btn","my-5","bgCustomGreen","font-weight-bold","text-white",3,"click"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.ec(),r.Rb(3,"svg",3),r.Nb(4,"path",4),r.Qb(),r.Qb(),r.dc(),r.Rb(5,"div",5),r.Rb(6,"div",6),r.Rb(7,"h1",7),r.zc(8,"Deine Fahrt buchen!"),r.Qb(),r.Rb(9,"p",8),r.zc(10),r.Nb(11,"br"),r.zc(12),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(13,"app-alert"),r.Rb(14,"div",9),r.Rb(15,"ul",10),r.Rb(16,"li",11),r.Rb(17,"span"),r.zc(18,"Fahrer:"),r.Qb(),r.Rb(19,"span"),r.xc(20,hD,1,1,"img",12),r.zc(21),r.Qb(),r.Qb(),r.Rb(22,"li",13),r.Rb(23,"span"),r.zc(24,"Start:"),r.Qb(),r.Rb(25,"span"),r.zc(26),r.Qb(),r.Qb(),r.Rb(27,"li",13),r.Rb(28,"span"),r.zc(29,"Ziel:"),r.Qb(),r.Rb(30,"span"),r.zc(31),r.Qb(),r.Qb(),r.Rb(32,"li",13),r.Rb(33,"span"),r.zc(34,"Datum:"),r.Qb(),r.Rb(35,"span"),r.zc(36),r.Qb(),r.Qb(),r.Rb(37,"li",13),r.Rb(38,"span"),r.zc(39,"Uhrzeit:"),r.Qb(),r.Rb(40,"span"),r.zc(41),r.Qb(),r.Qb(),r.xc(42,dD,5,1,"li",14),r.xc(43,fD,5,1,"li",14),r.xc(44,pD,5,1,"li",14),r.xc(45,gD,5,1,"li",14),r.Qb(),r.xc(46,mD,3,0,"div",15),r.Qb()),2&t&&(r.Ab(2),r.kc("routerLink",r.nc(21,bD)),r.Ab(8),r.Cc(" ",e.entry.start," - ",e.entry.destination," "),r.Ab(2),r.Dc(" ",e.entry.startDate.day,".",e.entry.startDate.month,".",e.entry.startDate.year," "),r.Ab(8),r.kc("ngIf",e.supplier.image),r.Ab(1),r.Cc("",e.supplier.firstname," ",e.supplier.lastname,""),r.Ab(5),r.Ac(e.entry.start),r.Ab(5),r.Ac(e.entry.destination),r.Ab(5),r.Dc("",e.entry.startDate.day,".",e.entry.startDate.month,".",e.entry.startDate.year,""),r.Ab(5),r.Cc("",e.entry.startTime.hour,":",e.entry.startTime.minute,""),r.Ab(1),r.kc("ngIf","Mitfahrgelegenheit"!=e.entry.transportType),r.Ab(1),r.kc("ngIf","Mitfahrgelegenheit"==e.entry.transportType),r.Ab(1),r.kc("ngIf","Mitfahrgelegenheit"!=e.entry.transportType),r.Ab(1),r.kc("ngIf","Mitfahrgelegenheit"==e.entry.transportType),r.Ab(1),r.kc("ngIf",e.auth.isLoggedIn))},directives:[NO,mA,ht],styles:["#pfeil[_ngcontent-%COMP%]{cursor:pointer}.list-group-item.active[_ngcontent-%COMP%]{background-color:rgba(71,159,118,.2);color:#000;border:none}.list-group-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#description[_ngcontent-%COMP%]{max-width:55%}#searchWrapper[_ngcontent-%COMP%]{height:12rem;width:100vw;background-image:url(https://images.unsplash.com/photo-1571958529064-eaf827bf97d7?auto=format&fit=crop&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&q=80&w=1500);background-position:50%;background-size:cover}#searchInnerWrapper[_ngcontent-%COMP%]{width:100vw;height:100%;background-color:hsla(0,0%,100%,.8)}#searchInnerWrapper[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column!important}"]}),t})()},{path:"create-entry",component:GA},{path:"search-page",component:iR},{path:"login",component:sR},{path:"register",component:aR},{path:"create-vehicle",component:cR},{path:"my-profile",component:bR},{path:"tracking/booking/:bookingId",component:LR},{path:"tracking/entry/:entryId",component:LR},{path:"supplier-profile/:userId",component:lD},{path:"detail-page",component:RA},{path:"open-requests",component:KR}];let yD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[WO.forRoot(vD,{onSameUrlNavigation:"reload"})],WO]}),t})();const _D={apiKey:"AIzaSyD1EQ6R5sGj9kpp4cHHVhXRDXHw9iiC4sk",authDomain:"kms-kargonaut-production.firebaseapp.com",projectId:"kms-kargonaut-production",storageBucket:"kms-kargonaut-production.appspot.com",messagingSenderId:"623337410384",appId:"1:623337410384:web:c42b2eba91e180569c2655"};let wD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t,bootstrap:[cA]}),t.\u0275inj=r.Jb({providers:[],imports:[[Kt,nA,yD,je.a.initializeApp(_D),Pw,Yk,$k]]}),t})();Object(r.T)(),Wt().bootstrapModule(wD).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);